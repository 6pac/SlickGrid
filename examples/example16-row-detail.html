<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <link rel="shortcut icon" type="image/ico" href="favicon.ico" />
  <link rel="stylesheet" href="../slick.grid.css" type="text/css"/>
  <link rel="stylesheet" href="../css/smoothness/jquery-ui-1.11.3.custom.css" type="text/css"/>
  <link rel="stylesheet" href="examples.css" type="text/css"/>
  <link rel="stylesheet" href="../plugins/slick.detailview.css" type="text/css"/>
  <style>
    .detail {
        padding: 5px
    }
    label {
        font-weight: bold;
    }
  </style>
</head>
<body>
<div style="position:relative">
  <div style="width:600px;">
    <div id="myGrid" style="width:100%;height:600px;"></div>
  </div>
  <br/>

  <div class="options-panel">
    <h2>Demonstrates:</h2>
    <ul>
      <li>Checkbox row select column</li>
    </ul>
      <h2>View Source:</h2>
      <ul>
          <li><A href="https://github.com/6pac/SlickGrid/blob/master/examples/example-checkbox-row-select.html" target="_sourcewindow"> View the source for this example on Github</a></li>
      </ul>

  </div>
</div>

<script src="../lib/firebugx.js"></script>

<script src="../lib/jquery-1.11.2.min.js"></script>
<script src="../lib/jquery-ui-1.11.3.min.js"></script>
<script src="../lib/jquery.event.drag-2.3.0.js"></script>

<script src="../slick.core.js"></script>
<script src="../plugins/slick.detailview.js"></script>
<script src="../slick.formatters.js"></script>
<script src="../plugins/slick.rowselectionmodel.js"></script>
<script src="../slick.grid.js"></script>
<script src="../slick.dataview.js"></script>

<script>
    var dataView;
    var grid;
    var data = [];
    var columns = [      
      {id: "sel", name: "#", field: "num", behavior: "select", cssClass: "cell-selection", width: 40, resizable: false, selectable: false },
      {id: "title", name: "Title", field: "title", width: 120, minWidth: 120, cssClass: "cell-title"},
      {id: "duration", name: "Duration", field: "duration"},
      {id: "%", name: "% Complete", field: "percentComplete", width: 80, resizable: false, formatter: Slick.Formatters.PercentCompleteBar},
      {id: "start", name: "Start", field: "start", minWidth: 60},
      {id: "finish", name: "Finish", field: "finish", minWidth: 60},
      {id: "effort-driven", name: "Effort Driven", width: 80, minWidth: 20, maxWidth: 80, cssClass: "cell-effort-driven", field: "effortDriven", formatter: Slick.Formatters.Checkmark}
    ];
    var options = {
      editable: false,
      enableAddRow: false,
      enableCellNavigation: true
    };

    function DataItem(i) {
      this.num = i;
      this.id = "id_" + i;
      this.percentComplete = Math.round(Math.random() * 100);
      this.effortDriven = (i % 5 == 0);
      this.start = "01/01/2009";
      this.finish = "01/05/2009";
      this.title = "Task " + i;
      this.duration = "5 days";
    }

    function loadingTemplate() {
      return [
        '<div>',
        '<h4>Loading...</h4>',
        '</div>'
      ].join('');
    }

    function postTemplate(item) {
      return filledTemplateRows = [
        '<div>',
        '<h4>' + item.title + '</h4>',
        '<div class="detail"><label>Duration:</label> <span>' + item.duration + '</span></div>',
        '<div class="detail"><label>% Complete:</label> <span>' + item.percentComplete + '</span></div>',
        '<div class="detail"><label>Start:</label> <span>' + item.start + '</span></div>',
        '<div class="detail"><label>Finish:</label> <span>' + item.finish + '</span></div>',
        '<div class="detail"><label>Effort Driven:</label> <span>' + item.effortDriven + '</span></div>',
        '</div>'
      ].join('');
    }

    $(function () {
      // prepare the data
      for (var i = 0; i < 5000; i++) {
        data[i] = new DataItem(i);
      }
      dataView = new Slick.Data.DataView({ inlineFilters: true });

      // create the selection
      var detailSelectColumn = new Slick.DetailSelectColumn({
        cssClass: "detailView-toggle",
        preTemplate: loadingTemplate,
        postTemplate: postTemplate,
        templateRowCount: 6
      });

      // push the plugin as first column
      columns.unshift(detailSelectColumn.getColumnDefinition());

      grid = new Slick.Grid("#myGrid", dataView, columns, options);
      
      // register the column
      grid.setSelectionModel(new Slick.RowSelectionModel({selectActiveRow: false}));
      grid.registerPlugin(detailSelectColumn);
      
      // initialize the model after all the events have been hooked up
      dataView.beginUpdate();
      dataView.setItems(data);
      dataView.endUpdate();
    })
  </script>
</body>
</html>
