/**
 * SlickGrid v4.0.1
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-06-30
 * file: ./controls/slick.gridmenu.js
 */
"use strict";!function(R){Slick.Utils.extend(!0,R,{Slick:{Controls:{GridMenu:function(p,e,o){var h,l,n,C,s,f,d,M,y,b=e,k=e&&e.getUID?e.getUID():"",v=!1,E=o,S=this,w={showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",useClickToRepositionMenu:!0,headerColumnValueExtractor:function(e){return e.name}},r=new Slick.BindingEventService;function t(e){h=e.getOptions();var n,t=E.gridMenu&&E.gridMenu.menuWidth||w.menuWidth;(s=h&&h.hasOwnProperty("frozenColumn")&&0<=h.frozenColumn?document.querySelector(`.${k} .slick-header-right`):document.querySelector(`.${k} .slick-header-left`)).style.width=`calc(100% - ${t}px)`,(E.gridMenu&&null!=E.gridMenu.resizeOnShowHeaderRow?E.gridMenu:w).resizeOnShowHeaderRow&&E.showHeaderRow&&(n=document.querySelector(`.${k}.slick-headerrow`))&&(n.style.width=`calc(100% - ${t}px)`),(E.gridMenu&&void 0!==E.gridMenu.showButton?E.gridMenu:w).showButton&&((d=document.createElement("button")).className="slick-gridmenu-button",d.ariaLabel="Grid Menu",E.gridMenu&&E.gridMenu.iconCssClass?d.classList.add(...E.gridMenu.iconCssClass.split(" ")):((n=document.createElement("img")).src=E.gridMenu&&E.gridMenu.iconImage?E.gridMenu.iconImage:"../images/drag-handle.png",d.appendChild(n)),o.iconCssClass&&d.classList.add(...o.iconCssClass.split(" ")),s.parentElement.insertBefore(d,s.parentElement.firstChild),r.bind(d,"click",a)),(M=document.createElement("div")).className="slick-gridmenu "+k,M.style.display="none",document.body.appendChild(M);(t=document.createElement("button")).type="button",t.className="close",t.dataset.dismiss="slick-gridmenu",t.ariaLabel="Close";var i=document.createElement("span");i.className="close",i.ariaHidden="true",i.innerHTML="&times;",t.appendChild(i),M.appendChild(t),(C=document.createElement("div")).className="slick-gridmenu-custom",C.role="menu",M.appendChild(C),T(E,C),b.onColumnsReordered.subscribe(z),(E=Slick.Utils.extend({},w,E)).gridMenu&&E.gridMenu.columnTitle&&((l=document.createElement("div")).className="title",l.innerHTML=E.gridMenu.columnTitle,M.appendChild(l)),r.bind(M,"click",B),(f=document.createElement("span")).className="slick-gridmenu-list",f.role="menu",r.bind(document.body,"mousedown",m),r.bind(document.body,"beforeunload",u),e.onBeforeDestroy.subscribe(u)}function u(){S.onAfterMenuShow.unsubscribe(),S.onBeforeMenuShow.unsubscribe(),S.onMenuClose.unsubscribe(),S.onCommand.unsubscribe(),S.onColumnsChanged.unsubscribe(),b.onColumnsReordered.unsubscribe(z),b.onBeforeDestroy.unsubscribe(),b.onSetOptions.unsubscribe(),r.unbindAll(),M&&M.remove&&M.remove(),i()}function i(){r.unbindAll();var e=document.querySelector("div.slick-gridmenu."+k);e&&(e.style.display="none"),s&&(s.style.width="100%"),d&&d.remove(),M&&M.remove()}function T(t,i){if(t.gridMenu&&t.gridMenu.customItems){E.gridMenu&&E.gridMenu.customTitle&&((n=document.createElement("div")).className="title",n.innerHTML=E.gridMenu.customTitle,i.appendChild(n));for(let n=0,e=t.gridMenu.customItems.length;n<e;n++){let e=!0;var o=t.gridMenu.customItems[n],l={grid:b,menu:M,columns:p,visibleColumns:L()},s=O(o.itemVisibilityOverride,l),l=O(o.itemUsabilityOverride,l);s&&(Object.prototype.hasOwnProperty.call(o,"itemUsabilityOverride")&&(o.disabled=!l),(s=document.createElement("div")).className="slick-gridmenu-item",s.role="menuitem",!o.divider&&"divider"!==o||(s.classList.add("slick-gridmenu-item-divider"),e=!1),o.disabled&&s.classList.add("slick-gridmenu-item-disabled"),o.hidden&&s.classList.add("slick-gridmenu-item-hidden"),o.cssClass&&s.classList.add(...o.cssClass.split(" ")),o.tooltip&&(s.title=o.tooltip),(l=document.createElement("div")).className="slick-gridmenu-icon",s.appendChild(l),o.iconCssClass&&l.classList.add(...o.iconCssClass.split(" ")),o.iconImage&&(l.style.backgroundImage="url("+o.iconImage+")"),(l=document.createElement("span")).className="slick-gridmenu-content",l.innerHTML=o.title,s.appendChild(l),o.textCssClass&&l.classList.add(...o.textCssClass.split(" ")),i.appendChild(s),e)&&r.bind(s,"click",g.bind(this,o))}}}function c(){i(),t(b)}function a(o){var l=o.touches?o.touches[0]:o,s=(o.preventDefault(),Slick.Utils.emptyElement(f),Slick.Utils.emptyElement(C),T(E,C),z(),y=[],{grid:b,menu:M,allColumns:p,visibleColumns:L()});if((!E||!E.gridMenu||O(E.gridMenu.menuUsabilityOverride,s))&&("function"!=typeof o.stopPropagation||0!=S.onBeforeMenuShow.notify(s,o,S).getReturnValue())){let n,t,i;for(let e=0;e<p.length;e++){n=p[e].id,i=p[e].excludeFromGridMenu?"hidden":"";var d=document.createElement("li"),r=(d.className=i,d.ariaLabel=p[e]&&p[e].name,document.createElement("input")),r=(r.type="checkbox",r.id=k+"-gridmenu-colpicker-"+n,r.dataset.columnid=p[e].id,d.appendChild(r),null==b.getColumnIndex(p[e].id)||p[e].hidden||(r.checked=!0),y.push(r),t=(E&&E.gridMenu&&E.gridMenu.headerColumnValueExtractor?E.gridMenu:w).headerColumnValueExtractor(p[e],h),document.createElement("label"));r.htmlFor=k+"-gridmenu-colpicker-"+n,r.innerHTML=t,d.appendChild(r),f.appendChild(d)}!E.gridMenu||E.gridMenu.hideForceFitButton&&E.gridMenu.hideSyncResizeButton||f.appendChild(document.createElement("hr")),E.gridMenu&&E.gridMenu.hideForceFitButton||(u=E.gridMenu&&E.gridMenu.forceFitTitle||w.forceFitTitle,(c=document.createElement("li")).ariaLabel=u,c.role="menuitem",f.appendChild(c),(a=document.createElement("input")).type="checkbox",a.id=k+"-gridmenu-colpicker-forcefit",a.dataset.option="autoresize",c.appendChild(a),(m=document.createElement("label")).htmlFor=k+"-gridmenu-colpicker-forcefit",m.textContent=u,c.appendChild(m),b.getOptions().forceFitColumns&&(a.checked=!0)),E.gridMenu&&E.gridMenu.hideSyncResizeButton||(u=E.gridMenu&&E.gridMenu.syncResizeTitle||w.syncResizeTitle,(c=document.createElement("li")).ariaLabel=u,f.appendChild(c),(m=document.createElement("input")).type="checkbox",m.id=k+"-gridmenu-colpicker-syncresize",m.dataset.option="syncresize",c.appendChild(m),(a=document.createElement("label")).htmlFor=k+"-gridmenu-colpicker-syncresize",a.textContent=u,c.appendChild(a),b.getOptions().syncColumnCellResize&&(m.checked=!0));let e="BUTTON"===o.target.nodeName?o.target:o.target.querySelector("button");e=e||o.target.parentElement,M.style.display="block",M.style.opacity="0";var u=Slick.Utils.offset(e),c=M.offsetWidth,a=(E.gridMenu&&void 0!==E.gridMenu.useClickToRepositionMenu?E.gridMenu:w).useClickToRepositionMenu,m=(E.gridMenu&&E.gridMenu.contentMinWidth?E.gridMenu:w).contentMinWidth,c=c<m?m:c+5,g=a&&0<l.pageY?l.pageY:u.top+10,a=a&&0<l.pageX?l.pageX:u.left+10,u=(E.gridMenu&&void 0!==E.gridMenu.marginBottom?E.gridMenu:w).marginBottom;M.style.top=g+10+"px",M.style.left=a-c+10+"px",0<m&&(M.style.minWidth=m+"px"),E.gridMenu&&void 0!==E.gridMenu.height?M.style.height=E.gridMenu.height+"px":M.style.maxHeight=R.innerHeight-l.clientY-u+"px",M.style.display="block",M.style.opacity="1",M.appendChild(f),v=!0,"function"==typeof o.stopPropagation&&S.onAfterMenuShow.notify(s,o,S).getReturnValue()}}function m(e){(M===e.target||M&&M.contains(e.target)||!v)&&"close"!==e.target.className||x(e)}function g(e,n){var t=e.command||"";e.disabled||e.divider||"divider"===e||(null!=t&&""!=t&&(t={grid:b,command:t,item:e,allColumns:p,visibleColumns:L()},S.onCommand.notify(t,n,S),"function"==typeof e.action)&&e.action.call(this,n,t),E.gridMenu&&E.gridMenu.leaveOpen||n.defaultPrevented||x(n),n.preventDefault(),n.stopPropagation())}function x(e){var n;M&&(Slick.Utils.hide(M),v=!1,n={grid:b,menu:M,allColumns:p,visibleColumns:L()},S.onMenuClose.notify(n,e,S).getReturnValue())}function z(){for(var e=b.getColumns().slice(0),n=new Array(p.length),t=0;t<n.length;t++)void 0===b.getColumnIndex(p[t].id)?n[t]=p[t]:n[t]=e.shift();p=n}function B(e){var n;if("autoresize"===e.target.dataset.option)i=L(),n=e.target.checked,b.setOptions({forceFitColumns:n}),b.setColumns(i);else if("syncresize"===e.target.dataset.option)b.setOptions({syncColumnCellResize:!!e.target.checked});else if("checkbox"===e.target.type){const n=e.target.checked;var i=e.target.dataset.columnid||"";let t=[];y.forEach((e,n)=>{e.checked&&(p[n].hidden&&(p[n].hidden=!1),t.push(p[n]))}),t.length?(i={columnId:i,showing:n,grid:b,allColumns:p,columns:t},b.setColumns(t),S.onColumnsChanged.notify(i,e,S)):e.target.checked=!0}}function L(){return b.getColumns()}function O(e,n){return"function"!=typeof e||e.call(this,n)}e.onSetOptions.subscribe(function(e,n){var t;n&&n.optionsBefore&&n.optionsAfter&&(t=0<=n.optionsBefore.frozenColumn&&-1===n.optionsAfter.frozenColumn,n=-1===n.optionsBefore.frozenColumn&&0<=n.optionsAfter.frozenColumn,t||n)&&c()}),t(b),Slick.Utils.extend(this,{init:t,getAllColumns:function(){return p},getVisibleColumns:L,destroy:u,deleteMenu:i,recreateGridMenu:c,showGridMenu:a,setOptions:function(e){o=Slick.Utils.extend({},o,e)},updateAllTitles:function(e){n&&n.innerHTML&&(n.innerHTML=e.customTitle),l&&l.innerHTML&&(l.innerHTML=e.columnTitle)},hideMenu:x,onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onMenuClose:new Slick.Event,onCommand:new Slick.Event,onColumnsChanged:new Slick.Event})}}}})}(window);