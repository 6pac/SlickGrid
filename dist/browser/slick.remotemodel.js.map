{
  "version": 3,
  "sources": ["../../src/slick.remotemodel.js"],
  "sourcesContent": ["(function ($) {\n  /***\n   * A sample AJAX data store implementation.\n   * Right now, it's hooked up to load search results from Octopart, but can\n   * easily be extended to support any JSONP-compatible backend that accepts paging parameters.\n   */\n  function RemoteModel() {\n    // private\n    var PAGESIZE = 50;\n    var data = {length: 0};\n    var searchstr = \"\";\n    var sortcol = null;\n    var sortdir = 1;\n    var h_request = null;\n    var req = null; // ajax request\n\n    // events\n    var onDataLoading = new Slick.Event();\n    var onDataLoaded = new Slick.Event();\n\n\n    function init() {\n    }\n\n\n    function isDataLoaded(from, to) {\n      for (var i = from; i <= to; i++) {\n        if (data[i] == undefined || data[i] == null) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n\n    function clear() {\n      for (var key in data) {\n        delete data[key];\n      }\n      data.length = 0;\n    }\n\n\n    function ensureData(from, to) {\n      if (req) {\n        req.abort();\n        for (var i = req.fromPage; i <= req.toPage; i++)\n          data[i * PAGESIZE] = undefined;\n      }\n\n      if (from < 0) {\n        from = 0;\n      }\n\n      if (data.length > 0) {\n        to = Math.min(to, data.length - 1);\n      }\n\n      var fromPage = Math.floor(from / PAGESIZE);\n      var toPage = Math.floor(to / PAGESIZE);\n\n      while (data[fromPage * PAGESIZE] !== undefined && fromPage < toPage)\n        fromPage++;\n\n      while (data[toPage * PAGESIZE] !== undefined && fromPage < toPage)\n        toPage--;\n\n      if (fromPage > toPage || ((fromPage == toPage) && data[fromPage * PAGESIZE] !== undefined)) {\n        // TODO:  look-ahead\n        onDataLoaded.notify({from: from, to: to});\n        return;\n      }\n\n      var url = \"http://octopart.com/api/v3/parts/search?apikey=68b25f31&include[]=short_description&show[]=uid&show[]=manufacturer&show[]=mpn&show[]=brand&show[]=octopart_url&show[]=short_description&q=\" + searchstr + \"&start=\" + (fromPage * PAGESIZE) + \"&limit=\" + (((toPage - fromPage) * PAGESIZE) + PAGESIZE);\n\n      if (sortcol != null) {\n        url += (\"&sortby=\" + sortcol + ((sortdir > 0) ? \"+asc\" : \"+desc\"));\n      }\n\n      if (h_request != null) {\n        clearTimeout(h_request);\n      }\n\n      h_request = setTimeout(function () {\n        for (var i = fromPage; i <= toPage; i++)\n          data[i * PAGESIZE] = null; // null indicates a 'requested but not available yet'\n\n        onDataLoading.notify({from: from, to: to});\n\n        req = $.jsonp({\n          url: url,\n          callbackParameter: \"callback\",\n          cache: true,\n          success: onSuccess,\n          error: function () {\n            onError(fromPage, toPage);\n          }\n        });\n        req.fromPage = fromPage;\n        req.toPage = toPage;\n      }, 50);\n    }\n\n\n    function onError(fromPage, toPage) {\n      alert(\"error loading pages \" + fromPage + \" to \" + toPage);\n    }\n\n    function onSuccess(resp) {\n      var from = resp.request.start, to = from + resp.results.length;\n      data.length = Math.min(parseInt(resp.hits),1000); // limitation of the API\n\n      for (var i = 0; i < resp.results.length; i++) {\n        var item = resp.results[i].item;\n\n        data[from + i] = item;\n        data[from + i].index = from + i;\n      }\n\n      req = null;\n\n      onDataLoaded.notify({from: from, to: to});\n    }\n\n\n    function reloadData(from, to) {\n      for (var i = from; i <= to; i++)\n        delete data[i];\n\n      ensureData(from, to);\n    }\n\n\n    function setSort(column, dir) {\n      sortcol = column;\n      sortdir = dir;\n      clear();\n    }\n\n    function setSearch(str) {\n      searchstr = str;\n      clear();\n    }\n\n\n    init();\n\n    return {\n      // properties\n      \"data\": data,\n\n      // methods\n      \"clear\": clear,\n      \"isDataLoaded\": isDataLoaded,\n      \"ensureData\": ensureData,\n      \"reloadData\": reloadData,\n      \"setSort\": setSort,\n      \"setSearch\": setSearch,\n\n      // events\n      \"onDataLoading\": onDataLoading,\n      \"onDataLoaded\": onDataLoaded\n    };\n  }\n\n  // exports\n  $.extend(true, window, { \n    Slick: { \n      Data: { \n        RemoteModel: RemoteModel \n      }\n    }\n  });\n})(jQuery);"],
  "mappings": "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",
  "names": ["i"]
}
