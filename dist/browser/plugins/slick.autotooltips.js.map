{
  "version": 3,
  "sources": ["../../../src/plugins/slick.autotooltips.ts"],
  "sourcesContent": ["import type { AutoTooltipOption, Column, SlickPlugin } from '../models/index.js';\r\nimport { type SlickEventData, Utils as Utils_ } from '../slick.core.js';\r\nimport type { SlickGrid } from '../slick.grid.js';\r\n\r\n// for (iife) load Slick methods from global Slick object, or use imports for (esm)\r\nconst Utils = IIFE_ONLY ? Slick.Utils : Utils_;\r\n\r\n/**\r\n * AutoTooltips plugin to show/hide tooltips when columns are too narrow to fit content.\r\n */\r\nexport class SlickAutoTooltips implements SlickPlugin {\r\n  // --\r\n  // public API\r\n  pluginName = 'AutoTooltips' as const;\r\n\r\n  // --\r\n  // protected props\r\n  protected _grid!: SlickGrid;\r\n  protected _options?: AutoTooltipOption;\r\n  protected _defaults: AutoTooltipOption = {\r\n    enableForCells: true,\r\n    enableForHeaderCells: false,\r\n    maxToolTipLength: undefined,\r\n    replaceExisting: true\r\n  };\r\n\r\n  /**\r\n   * Constructor of the SlickGrid 3rd party plugin, it can optionally receive options\r\n   * @param {boolean} [options.enableForCells=true]        - Enable tooltip for grid cells\r\n   * @param {boolean} [options.enableForHeaderCells=false] - Enable tooltip for header cells\r\n   * @param {number}  [options.maxToolTipLength=null]      - The maximum length for a tooltip\r\n   * @param {boolean} [options.replaceExisting=null]       - Allow preventing custom tooltips from being overwritten by auto tooltips\r\n   */\r\n  constructor(options?: AutoTooltipOption) {\r\n    this._options = Utils.extend(true, {}, this._defaults, options);\r\n  }\r\n\r\n  /**\r\n   * Initialize plugin.\r\n   */\r\n  init(grid: SlickGrid) {\r\n    this._grid = grid;\r\n    if (this._options?.enableForCells) {\r\n      this._grid.onMouseEnter.subscribe(this.handleMouseEnter.bind(this));\r\n    }\r\n    if (this._options?.enableForHeaderCells) {\r\n      this._grid.onHeaderMouseEnter.subscribe(this.handleHeaderMouseEnter.bind(this));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Destroy plugin.\r\n   */\r\n  destroy() {\r\n    if (this._options?.enableForCells) {\r\n      this._grid.onMouseEnter.unsubscribe(this.handleMouseEnter.bind(this));\r\n    }\r\n    if (this._options?.enableForHeaderCells) {\r\n      this._grid.onHeaderMouseEnter.unsubscribe(this.handleHeaderMouseEnter.bind(this));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle mouse entering grid cell to add/remove tooltip.\r\n   * @param {SlickEventData} event - The event\r\n   */\r\n  protected handleMouseEnter(event: SlickEventData) {\r\n    const cell = this._grid.getCellFromEvent(event);\r\n    if (cell) {\r\n      let node: HTMLElement | null = this._grid.getCellNode(cell.row, cell.cell);\r\n      let text;\r\n      if (this._options && node && (!node.title || this._options?.replaceExisting)) {\r\n        if (node.clientWidth < node.scrollWidth) {\r\n          text = node.textContent?.trim() ?? '';\r\n          if (this._options?.maxToolTipLength && text.length > this._options?.maxToolTipLength) {\r\n            text = text.substring(0, this._options.maxToolTipLength - 3) + '...';\r\n          }\r\n        } else {\r\n          text = '';\r\n        }\r\n        node.title = text;\r\n      }\r\n      node = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle mouse entering header cell to add/remove tooltip.\r\n   * @param {SlickEventData} event   - The event\r\n   * @param {object} args.column - The column definition\r\n   */\r\n  protected handleHeaderMouseEnter(event: SlickEventData, args: { column: Column; }) {\r\n    const column = args.column;\r\n    let node: HTMLDivElement | null;\r\n    const targetElm = (event.target as HTMLDivElement);\r\n\r\n    if (targetElm) {\r\n      node = targetElm.closest<HTMLDivElement>('.slick-header-column');\r\n      if (node && !(column?.toolTip)) {\r\n        const titleVal = (targetElm.clientWidth < node.clientWidth) ? column?.name ?? '' : '';\r\n        node.title = Utils.getHtmlStringOutput(titleVal, 'innerHTML');\r\n      }\r\n    }\r\n    node = null;\r\n  }\r\n}\r\n\r\n// extend Slick namespace on window object when building as iife\r\nif (IIFE_ONLY && window.Slick) {\r\n  Utils.extend(true, window, {\r\n    Slick: {\r\n      AutoTooltips: SlickAutoTooltips\r\n    }\r\n  });\r\n}\r\n"],
  "mappings": ";;;;;;;AAKA,MAAM,QAAoB,MAAM,OAKnB,oBAAN,MAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAuBpD,YAAY,SAA6B;AApBzC;AAAA;AAAA,wCAAa;AAIb;AAAA;AAAA,0BAAU;AACV,0BAAU;AACV,0BAAU,aAA+B;AAAA,QACvC,gBAAgB;AAAA,QAChB,sBAAsB;AAAA,QACtB,kBAAkB;AAAA,QAClB,iBAAiB;AAAA,MACnB;AAUE,WAAK,WAAW,MAAM,OAAO,IAAM,CAAC,GAAG,KAAK,WAAW,OAAO;AAAA,IAChE;AAAA;AAAA;AAAA;AAAA,IAKA,KAAK,MAAiB;AAxCxB;AAyCI,WAAK,QAAQ,OACT,UAAK,aAAL,WAAe,kBACjB,KAAK,MAAM,aAAa,UAAU,KAAK,iBAAiB,KAAK,IAAI,CAAC,IAEhE,UAAK,aAAL,WAAe,wBACjB,KAAK,MAAM,mBAAmB,UAAU,KAAK,uBAAuB,KAAK,IAAI,CAAC;AAAA,IAElF;AAAA;AAAA;AAAA;AAAA,IAKA,UAAU;AArDZ;AAsDI,OAAI,UAAK,aAAL,WAAe,kBACjB,KAAK,MAAM,aAAa,YAAY,KAAK,iBAAiB,KAAK,IAAI,CAAC,IAElE,UAAK,aAAL,WAAe,wBACjB,KAAK,MAAM,mBAAmB,YAAY,KAAK,uBAAuB,KAAK,IAAI,CAAC;AAAA,IAEpF;AAAA;AAAA;AAAA;AAAA;AAAA,IAMU,iBAAiB,OAAuB;AAlEpD;AAmEI,UAAM,OAAO,KAAK,MAAM,iBAAiB,KAAK;AAC9C,UAAI,MAAM;AACR,YAAI,OAA2B,KAAK,MAAM,YAAY,KAAK,KAAK,KAAK,IAAI,GACrE;AACJ,QAAI,KAAK,YAAY,SAAS,CAAC,KAAK,UAAS,UAAK,aAAL,WAAe,qBACtD,KAAK,cAAc,KAAK,eAC1B,QAAO,gBAAK,gBAAL,mBAAkB,WAAlB,YAA4B,KAC/B,UAAK,aAAL,WAAe,oBAAoB,KAAK,WAAS,UAAK,aAAL,mBAAe,sBAClE,OAAO,KAAK,UAAU,GAAG,KAAK,SAAS,mBAAmB,CAAC,IAAI,UAGjE,OAAO,IAET,KAAK,QAAQ,OAEf,OAAO;AAAA,MACT;AAAA,IACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOU,uBAAuB,OAAuB,MAA2B;AA3FrF;AA4FI,UAAM,SAAS,KAAK,QAChB,MACE,YAAa,MAAM;AAEzB,UAAI,cACF,OAAO,UAAU,QAAwB,sBAAsB,GAC3D,QAAQ,EAAE,yBAAQ,WAAU;AAC9B,YAAM,WAAY,UAAU,cAAc,KAAK,gBAAe,sCAAQ,SAAR,YAAqB;AACnF,aAAK,QAAQ,MAAM,oBAAoB,UAAU,WAAW;AAAA,MAC9D;AAEF,aAAO;AAAA,IACT;AAAA,EACF;AAGA,EAAiB,OAAO,SACtB,MAAM,OAAO,IAAM,QAAQ;AAAA,IACzB,OAAO;AAAA,MACL,cAAc;AAAA,IAChB;AAAA,EACF,CAAC;",
  "names": []
}
