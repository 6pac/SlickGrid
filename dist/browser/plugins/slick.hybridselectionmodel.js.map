{
  "version": 3,
  "sources": ["../../../src/plugins/slick.hybridselectionmodel.ts"],
  "sourcesContent": ["import {\n  keyCode as keyCode_,\n  SlickEvent as SlickEvent_,\n  SlickEventData as SlickEventData_,\n  SlickEventHandler as SlickEventHandler_,\n  SlickRange as SlickRange_,\n  Utils as Utils_\n} from '../slick.core.js';\nimport { Draggable as Draggable_ } from '../slick.interactions.js';\nimport { SlickCellRangeDecorator as SlickCellRangeDecorator_ } from './slick.cellrangedecorator.js';\nimport { SlickCellRangeSelector as SlickCellRangeSelector_ } from './slick.cellrangeselector.js';\nimport type { CustomDataView, HybridSelectionModelOption, OnActiveCellChangedEventArgs, SelectionModel } from '../models/index.js';\nimport type { SlickDataView } from '../slick.dataview.js';\nimport type { SlickCrossGridRowMoveManager as SlickCrossGridRowMoveManager_ } from './slick.crossgridrowmovemanager.js';\nimport type { SlickRowMoveManager as SlickRowMoveManager_ } from './slick.rowmovemanager.js';\nimport type { SlickGrid } from '../slick.grid.js';\n\n// for (iife) load Slick methods from global Slick object, or use imports for (esm)\nconst Draggable = IIFE_ONLY ? Slick.Draggable : Draggable_;\nconst keyCode = IIFE_ONLY ? Slick.keyCode : keyCode_;\nconst SlickEvent = IIFE_ONLY ? Slick.Event : SlickEvent_;\nconst SlickEventData = IIFE_ONLY ? Slick.EventData : SlickEventData_;\nconst SlickEventHandler = IIFE_ONLY ? Slick.EventHandler : SlickEventHandler_;\nconst SlickRange = IIFE_ONLY ? Slick.Range : SlickRange_;\nconst SlickCellRangeDecorator = IIFE_ONLY ? Slick.CellRangeDecorator : SlickCellRangeDecorator_;\nconst SlickCellRangeSelector = IIFE_ONLY ? Slick.CellRangeSelector : SlickCellRangeSelector_;\nconst Utils = IIFE_ONLY ? Slick.Utils : Utils_;\n\nexport class SlickHybridSelectionModel implements SelectionModel {\n  // hybrid selection model is CellSelectionModel except when selecting\n  // specific columns, which behave as RowSelectionModel\n\n  // --\n  // public API\n  pluginName = 'HybridSelectionModel' as const;\n  onSelectedRangesChanged = new SlickEvent<SlickRange_[]>('onSelectedRangesChanged');\n\n  // --\n  // protected props\n  protected _cachedPageRowCount = 0;\n  protected _dataView?: CustomDataView | SlickDataView;\n  protected _eventHandler = new SlickEventHandler();\n  protected _grid!: SlickGrid;\n  protected _prevSelectedRow?: number;\n  protected _prevKeyDown = '';\n  protected _ranges: SlickRange_[] = [];\n  protected _selector: SlickCellRangeSelector_;\n  protected _isRowMoveManagerHandler: any;\n  protected _activeSelectionIsRow = false;\n  protected _options: HybridSelectionModelOption;\n  protected _defaults: HybridSelectionModelOption = {\n    selectActiveCell: true,\n    selectActiveRow: true,\n    dragToSelect: false,\n    autoScrollWhenDrag: true,\n    handleRowMoveManagerColumn: true, // Row Selection on RowMoveManage column\n    rowSelectColumnIds: [],         // Row Selection on these columns\n    rowSelectOverride: undefined,     // function to toggle Row Selection Models\n    cellRangeSelector: undefined,\n    selectionType: 'mixed',\n  };\n\n  constructor(options?: HybridSelectionModelOption) {\n    this._options = Utils.extend(true, {}, this._defaults, options);\n\n    if (options === undefined || options.cellRangeSelector === undefined) {\n      this._selector = new SlickCellRangeSelector({\n        selectionCss: { border: '2px solid black' } as CSSStyleDeclaration,\n        copyToSelectionCss: { border: '2px solid purple' } as CSSStyleDeclaration\n      });\n    } else {\n      this._selector = options.cellRangeSelector;\n    }\n  }\n\n  // Region: Setup\n  // -----------------------------------------------------------------------------\n\n  init(grid: SlickGrid) {\n    if (Draggable === undefined) {\n      throw new Error('Slick.Draggable is undefined, make sure to import \"slick.interactions.js\"');\n    }\n\n    this._grid = grid;\n    Utils.addSlickEventPubSubWhenDefined(grid.getPubSubService(), this);\n\n    if (this._options?.selectionType === 'cell') {\n      this._activeSelectionIsRow = false;\n    } else if (this._options?.selectionType === 'row') {\n      this._activeSelectionIsRow = true;\n    }\n\n    if (!this._selector && this._options?.dragToSelect) {\n      if (!SlickCellRangeDecorator) {\n        throw new Error('Slick.CellRangeDecorator is required when option dragToSelect set to true');\n      }\n      this._selector = new SlickCellRangeSelector({\n        selectionCss: { border: 'none' } as CSSStyleDeclaration,\n        autoScroll: this._options?.autoScrollWhenDrag\n      });\n    }\n\n    if (grid.hasDataView()) {\n      this._dataView = grid.getData<CustomDataView | SlickDataView>();\n    }\n\n    this._eventHandler\n      .subscribe(this._grid.onActiveCellChanged, this.handleActiveCellChange.bind(this))\n      .subscribe(this._grid.onClick, this.handleClick.bind(this))\n      .subscribe(this._grid.onKeyDown, this.handleKeyDown.bind(this))\n\n    if (this._selector) {\n      grid.registerPlugin(this._selector);\n      this._eventHandler\n        .subscribe(this._selector.onCellRangeSelecting, (e, args) => this.handleCellRangeSelected(e, { ...args, caller: 'onCellRangeSelecting' }))\n        .subscribe(this._selector.onCellRangeSelected, (e, args) => this.handleCellRangeSelected(e, { ...args, caller: 'onCellRangeSelected' }))\n      this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this));\n    }\n  }\n\n  destroy() {\n    this._eventHandler.unsubscribeAll();\n    if (this._selector) {\n      this._grid?.unregisterPlugin(this._selector);\n    }\n    this._selector?.destroy();\n  }\n\n  getOptions(): HybridSelectionModelOption {\n    return this._options;\n  }\n\n  // Region: CellSelectionModel Members\n  // -----------------------------------------------------------------------------\n\n  protected removeInvalidRanges(ranges: SlickRange_[]) {\n    const result: SlickRange_[] = [];\n\n    for (let i = 0; i < ranges.length; i++) {\n      const r = ranges[i];\n      if (this._grid.canCellBeSelected(r.fromRow, r.fromCell) && this._grid.canCellBeSelected(r.toRow, r.toCell)) {\n        result.push(r);\n      }\n    }\n\n    return result;\n  }\n\n  protected rangesAreEqual(range1: SlickRange_[], range2: SlickRange_[]) {\n    let areDifferent = (range1.length !== range2.length);\n    if (!areDifferent) {\n      for (let i = 0; i < range1.length; i++) {\n        if (\n          range1[i].fromCell !== range2[i].fromCell\n          || range1[i].fromRow !== range2[i].fromRow\n          || range1[i].toCell !== range2[i].toCell\n          || range1[i].toRow !== range2[i].toRow\n        ) {\n          areDifferent = true;\n          break;\n        }\n      }\n    }\n    return !areDifferent;\n  }\n\n  // Region: RowSelectionModel Members\n  // -----------------------------------------------------------------------------\n\n  protected rangesToRows(ranges: SlickRange_[]): number[] {\n    const rows: number[] = [];\n    for (let i = 0; i < ranges.length; i++) {\n      for (let j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {\n        rows.push(j);\n      }\n    }\n    return rows;\n  }\n\n  protected rowsToRanges(rows: number[]) {\n    const ranges: SlickRange_[] = [];\n    const lastCell = this._grid.getColumns().length - 1;\n    rows.forEach(row => ranges.push(new SlickRange(row, 0, row, lastCell)));\n    return ranges;\n  }\n\n  protected getRowsRange(from: number, to: number) {\n    let i;\n    const rows: number[] = [];\n    for (i = from; i <= to; i++) {\n      rows.push(i);\n    }\n    for (i = to; i < from; i++) {\n      rows.push(i);\n    }\n    return rows;\n  }\n\n  getCellRangeSelector(): SlickCellRangeSelector_ | undefined {\n    return this._selector;\n  }\n\n  getSelectedRanges(): SlickRange_[] {\n    return this._ranges;\n  }\n\n  getSelectedRows(): number[] {\n    return this.rangesToRows(this._ranges);\n  }\n\n  setSelectedRows(rows: number[]): void {\n    this.setSelectedRanges(this.rowsToRanges(rows), 'SlickHybridSelectionModel.setSelectedRows', '');\n  }\n\n  // Region: Shared Members\n  // -----------------------------------------------------------------------------\n\n  /** Provide a way to force a recalculation of page row count (for example on grid resize) */\n  resetPageRowCount() {\n    this._cachedPageRowCount = 0;\n  }\n\n  setSelectedRanges(ranges: SlickRange_[], caller = 'SlickHybridSelectionModel.setSelectedRanges', selectionMode = '') {\n    // simple check for: empty selection didn't change, prevent firing onSelectedRangesChanged\n    if ((!this._ranges || this._ranges.length === 0) && (!ranges || ranges.length === 0)) { return; }\n\n    // if range has not changed, don't fire onSelectedRangesChanged\n    const rangeHasChanged = !this.rangesAreEqual(this._ranges, ranges);\n\n    if (this._activeSelectionIsRow) {\n      this._ranges = ranges;\n\n      // provide extra \"caller\" argument through SlickEventData event to avoid breaking the previous pubsub event structure\n      // that only accepts an array of selected range `SlickRange[]`, the SlickEventData args will be merged and used later by `onSelectedRowsChanged`\n      const eventData = new SlickEventData(new CustomEvent('click', { detail: { caller, selectionMode } }), this._ranges);\n      this.onSelectedRangesChanged.notify(this._ranges, eventData);\n    } else {\n      this._ranges = this.removeInvalidRanges(ranges);\n      if (rangeHasChanged) {\n        // provide extra \"caller\" argument through SlickEventData event to avoid breaking the previous pubsub event structure\n        // that only accepts an array of selected range `SlickRange[]`, the SlickEventData args will be merged and used later by `onSelectedRowsChanged`\n        const eventData = new SlickEventData(new CustomEvent('click', { detail: { caller, selectionMode, addDragHandle: true } }), this._ranges);\n        this.onSelectedRangesChanged.notify(this._ranges, eventData);\n      }\n    }\n  }\n\n  currentSelectionModeIsRow() {\n    return this._activeSelectionIsRow;\n  }\n\n  refreshSelections() {\n    if (this._activeSelectionIsRow) {\n      this.setSelectedRows(this.getSelectedRows());\n    } else {\n      this.setSelectedRanges(this.getSelectedRanges(), undefined, '');\n    }\n  }\n\n  getRowMoveManagerPlugin(): SlickRowMoveManager_ | SlickCrossGridRowMoveManager_ | undefined {\n    return this._grid.getPluginByName('RowMoveManager') || this._grid.getPluginByName('CrossGridRowMoveManager');\n  }\n\n  rowSelectionModelIsActive(data: OnActiveCellChangedEventArgs): boolean {\n    if (this._options?.selectionType === 'cell') {\n      return false;\n    } else if (this._options?.selectionType === 'row') {\n      return true;\n    }\n\n    // work out required selection mode\n    if (this._options?.rowSelectOverride) {\n      return this._options?.rowSelectOverride(data, this, this._grid);\n    }\n\n    if (!Utils.isDefined(data.cell)) { return false; }\n\n    if (this._options?.handleRowMoveManagerColumn) {\n      const rowMoveManager = this.getRowMoveManagerPlugin();\n      if (rowMoveManager?.isHandlerColumn(data.cell)) { return true; }\n    }\n\n    const targetColumn = this._grid.getVisibleColumns()[data.cell];\n    if (targetColumn) {\n      return this._options?.rowSelectColumnIds.includes('' + targetColumn.id) || false;\n    }\n    return false;\n  }\n\n  protected handleActiveCellChange(_e: SlickEventData_, args: OnActiveCellChangedEventArgs) {\n    this._prevSelectedRow = undefined;\n    const isCellDefined = Utils.isDefined(args.cell);\n    const isRowDefined = Utils.isDefined(args.row);\n    this._activeSelectionIsRow = this.rowSelectionModelIsActive(args);\n\n    if (this._activeSelectionIsRow) {\n      if (this._options?.selectActiveRow && isRowDefined) {\n        this.setSelectedRanges([new SlickRange(args.row, 0, args.row, this._grid.getColumns().length - 1)], undefined, '');\n      }\n    } else {\n      if (this._options?.selectActiveCell && isRowDefined && isCellDefined) {\n        // if any row selections are visible, leave them untouched unless `selectActiveCell` is enabled\n        if (this._options.selectActiveRow) {\n          this.setSelectedRanges([new SlickRange(args.row, args.cell)], undefined, '');\n        }\n      } else if (!this._options?.selectActiveCell || (!isRowDefined && !isCellDefined)) {\n        // clear the previous selection once the cell changes\n        this.setSelectedRanges([], undefined, '');\n      }\n    }\n  }\n\n  protected isKeyAllowed(key: string, isShiftKeyPressed?: boolean): boolean {\n    return [\n      'ArrowLeft',\n      'ArrowRight',\n      'ArrowUp',\n      'ArrowDown',\n      'PageDown',\n      'PageUp',\n      'Home',\n      'End',\n      ...(!isShiftKeyPressed ? ['a', 'A'] : []),\n    ].some((k) => k === key);\n  }\n\n  protected handleKeyDown(e: SlickEventData_) {\n    if (!this._activeSelectionIsRow) {\n      let ranges: SlickRange_[], last: SlickRange_;\n      const colLn = this._grid.getColumns().length;\n      const active = this._grid.getActiveCell();\n      let dataLn = 0;\n      if (this._dataView && 'getPagingInfo' in this._dataView) {\n        dataLn = this._dataView?.getPagingInfo().pageSize || this._dataView.getLength();\n      } else {\n        dataLn = this._grid.getDataLength();\n      }\n\n      if (active && (e.shiftKey || e.ctrlKey) && !e.altKey && this.isKeyAllowed(e.key as string, e.shiftKey)) {\n        ranges = this.getSelectedRanges().slice();\n        if (!ranges.length) {\n          ranges.push(new SlickRange(active.row, active.cell));\n        }\n        // keyboard can work with last range only\n        last = ranges.pop() as SlickRange_;\n\n        // can't handle selection out of active cell\n        if (!last.contains(active.row, active.cell)) {\n          last = new SlickRange(active.row, active.cell);\n        }\n\n        let dRow = last.toRow - last.fromRow;\n        let dCell = last.toCell - last.fromCell;\n        let toCell: undefined | number;\n        let toRow = 0;\n\n        // when using Ctrl+{a, A} we will change our position to cell 0,0 and select all grid cells\n        if (e.ctrlKey && e.key?.toLowerCase() === 'a') {\n          this._grid.setActiveCell(0, 0, false, false, true);\n          active.row = 0;\n          active.cell = 0;\n          toCell = colLn - 1;\n          toRow = dataLn - 1;\n        }\n\n        // walking direction\n        const dirRow = active.row === last.fromRow ? 1 : -1;\n        const dirCell = active.cell === last.fromCell ? 1 : -1;\n        const isSingleKeyMove = e.key!.startsWith('Arrow');\n\n        if (isSingleKeyMove && !e.ctrlKey) {\n          // single cell move: (Arrow{Up/ArrowDown/ArrowLeft/ArrowRight})\n          if (e.key === 'ArrowLeft') {\n            dCell -= dirCell;\n          } else if (e.key === 'ArrowRight') {\n            dCell += dirCell;\n          } else if (e.key === 'ArrowUp') {\n            dRow -= dirRow;\n          } else if (e.key === 'ArrowDown') {\n            dRow += dirRow;\n          }\n          toRow = active.row + dirRow * dRow;\n        } else {\n          // multiple cell moves: (Home, End, Page{Up/Down})\n          if (this._cachedPageRowCount < 1) {\n            this._cachedPageRowCount = this._grid.getViewportRowCount();\n          }\n          if (this._prevSelectedRow === undefined) {\n            this._prevSelectedRow = active.row;\n          }\n\n          if ((!e.ctrlKey && e.shiftKey && e.key === 'Home') || (e.ctrlKey && e.shiftKey && e.key === 'ArrowLeft')) {\n            toCell = 0;\n            toRow = active.row;\n          } else if ((!e.ctrlKey && e.shiftKey && e.key === 'End') || (e.ctrlKey && e.shiftKey && e.key === 'ArrowRight')) {\n            toCell = colLn - 1;\n            toRow = active.row;\n          } else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowUp') {\n            toRow = 0;\n          } else if (e.ctrlKey && e.shiftKey && e.key === 'ArrowDown') {\n            toRow = dataLn - 1;\n          } else if (e.ctrlKey && e.shiftKey && e.key === 'Home') {\n            toCell = 0;\n            toRow = 0;\n          } else if (e.ctrlKey && e.shiftKey && e.key === 'End') {\n            toCell = colLn - 1;\n            toRow = dataLn - 1;\n          } else if (e.key === 'PageUp') {\n            if (this._prevSelectedRow >= 0) {\n              toRow = this._prevSelectedRow - this._cachedPageRowCount;\n            }\n            if (toRow < 0) {\n              toRow = 0;\n            }\n          } else if (e.key === 'PageDown') {\n            if (this._prevSelectedRow <= dataLn - 1) {\n              toRow = this._prevSelectedRow + this._cachedPageRowCount;\n            }\n            if (toRow > dataLn - 1) {\n              toRow = dataLn - 1;\n            }\n          }\n          this._prevSelectedRow = toRow;\n        }\n\n        // define new selection range\n        toCell ??= active.cell + dirCell * dCell;\n        const new_last = new SlickRange(active.row, active.cell, toRow, toCell);\n        if (this.removeInvalidRanges([new_last]).length) {\n          ranges.push(new_last);\n          const viewRow = dirRow > 0 ? new_last.toRow : new_last.fromRow;\n          const viewCell = dirCell > 0 ? new_last.toCell : new_last.fromCell;\n\n          if (isSingleKeyMove) {\n            this._grid.scrollRowIntoView(viewRow);\n            this._grid.scrollCellIntoView(viewRow, viewCell);\n          } else {\n            this._grid.scrollRowIntoView(toRow);\n            this._grid.scrollCellIntoView(toRow, viewCell);\n          }\n        } else {\n          ranges.push(last);\n        }\n\n        this.setSelectedRanges(ranges, undefined, '');\n\n        e.preventDefault();\n        e.stopPropagation();\n        this._prevKeyDown = e.key as string;\n      }\n    } else {\n      const activeRow = this._grid.getActiveCell();\n      if (this._grid.getOptions().multiSelect && activeRow\n        && e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey\n        && (e.which === keyCode.UP || e.which === keyCode.DOWN)) {\n        let selectedRows = this.getSelectedRows();\n        selectedRows.sort((x, y) => x - y);\n\n        if (!selectedRows.length) {\n          selectedRows = [activeRow.row];\n        }\n\n        let active: number;\n        let top = selectedRows[0];\n        let bottom = selectedRows[selectedRows.length - 1];\n\n        if (e.which === keyCode.DOWN) {\n          active = activeRow.row < bottom || top === bottom ? ++bottom : ++top;\n        } else {\n          active = activeRow.row < bottom ? --bottom : --top;\n        }\n\n        if (active >= 0 && active < this._grid.getDataLength()) {\n          this._grid.scrollRowIntoView(active);\n          const tempRanges = this.rowsToRanges(this.getRowsRange(top, bottom));\n          this.setSelectedRanges(tempRanges, undefined, '');\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    }\n  }\n\n  protected handleClick(e: SlickEventData_): boolean | void {\n    if (!this._activeSelectionIsRow) { return; }\n\n    const cell = this._grid.getCellFromEvent(e);\n    if (!cell || !this._grid.canCellBeActive(cell.row, cell.cell)) {\n      return false;\n    }\n\n    if (!this._grid.getOptions().multiSelect || (\n      !e.ctrlKey && !e.shiftKey && !e.metaKey)) {\n      return false;\n    }\n\n    let selection = this.rangesToRows(this._ranges);\n    const idx = selection.indexOf(cell.row);\n\n    if (idx === -1 && (e.ctrlKey || e.metaKey)) {\n      selection.push(cell.row);\n      this._grid.setActiveCell(cell.row, cell.cell);\n    } else if (idx !== -1 && (e.ctrlKey || e.metaKey)) {\n      selection = selection.filter((o) => o !== cell.row);\n      this._grid.setActiveCell(cell.row, cell.cell);\n    } else if (selection.length && e.shiftKey) {\n      const last = selection.pop() as number;\n      const from = Math.min(cell.row, last);\n      const to = Math.max(cell.row, last);\n      selection = [];\n      for (let i = from; i <= to; i++) {\n        if (i !== last) {\n          selection.push(i);\n        }\n      }\n      selection.push(last);\n      this._grid.setActiveCell(cell.row, cell.cell);\n    }\n\n    const tempRanges = this.rowsToRanges(selection);\n    this.setSelectedRanges(tempRanges, undefined, '');\n    e.stopImmediatePropagation();\n\n    return true;\n  }\n\n  protected handleBeforeCellRangeSelected(e: SlickEventData_, cell: { row: number; cell: number; }): boolean | void {\n    if (this._activeSelectionIsRow) {\n      if (!this._isRowMoveManagerHandler) {\n        const rowMoveManager = this._grid.getPluginByName<SlickRowMoveManager_>('RowMoveManager') || this._grid.getPluginByName<SlickCrossGridRowMoveManager_>('CrossGridRowMoveManager');\n        this._isRowMoveManagerHandler = rowMoveManager ? rowMoveManager.isHandlerColumn : Utils.noop;\n      }\n      if (this._grid.getEditorLock().isActive() || this._isRowMoveManagerHandler(cell.cell)) {\n        e.stopPropagation();\n        return false;\n      }\n      this._grid.setActiveCell(cell.row, cell.cell);\n    } else {\n      if (this._grid.getEditorLock().isActive()) {\n        e.stopPropagation();\n        return false;\n      }\n    }\n  }\n\n  protected handleCellRangeSelected(_e: SlickEventData_, args: { range: SlickRange_; selectionMode: string; allowAutoEdit?: boolean; caller: 'onCellRangeSelecting' | 'onCellRangeSelected' }) {\n    //console.log('hybridSelectionModel.handleCellRangeSelected: ' + JSON.stringify(args.range) + '/' + args.selectionMode);\n    if (this._activeSelectionIsRow) {\n      if (!this._grid.getOptions().multiSelect || (!this._options?.selectActiveRow && this._options?.selectionType !== 'row')) {\n        return false;\n      }\n      this.setSelectedRanges([new SlickRange(args.range.fromRow, 0, args.range.toRow, this._grid.getColumns().length - 1)], undefined, args.selectionMode);\n    } else {\n      if (args.caller === 'onCellRangeSelecting') {\n        return false;\n      }\n      this._grid.setActiveCell(args.range.fromRow, args.range.fromCell, (args.allowAutoEdit ? undefined : false), false, true);\n      this.setSelectedRanges([args.range], undefined, args.selectionMode);\n    }\n    return true;\n  }\n}\n\n// extend Slick namespace on window object when building as iife\nif (IIFE_ONLY && window.Slick) {\n  Utils.extend(true, window, {\n    Slick: {\n      HybridSelectionModel: SlickHybridSelectionModel\n    }\n  });\n}\n"],
  "mappings": "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",
  "names": []
}
