{
  "version": 3,
  "sources": ["../../../src/controls/slick.pager.ts"],
  "sourcesContent": ["import type { PagingInfo } from '../models/index.js';\r\nimport { BindingEventService as BindingEventService_, SlickGlobalEditorLock as SlickGlobalEditorLock_, Utils as Utils_ } from '../slick.core.js';\r\nimport type { SlickDataView } from '../slick.dataview.js';\r\nimport type { SlickGrid } from '../slick.grid.js';\r\n\r\n// for (iife) load Slick methods from global Slick object, or use imports for (esm)\r\nconst BindingEventService = IIFE_ONLY ? Slick.BindingEventService : BindingEventService_;\r\nconst SlickGlobalEditorLock = IIFE_ONLY ? Slick.GlobalEditorLock : SlickGlobalEditorLock_;\r\nconst Utils = IIFE_ONLY ? Slick.Utils : Utils_;\r\n\r\nexport interface GridPagerOption {\r\n  showAllText: string;\r\n  showPageText: string;\r\n  showCountText: string;\r\n  showCount: boolean;\r\n  pagingOptions: Array<{ data: number; name: string; ariaLabel: string; }>;\r\n  showPageSizes: boolean;\r\n}\r\n\r\nexport class SlickGridPager {\r\n  // --\r\n  // public API\r\n\r\n  // --\r\n  // protected props\r\n  protected _container: HTMLElement; // the container might be a string, a jQuery object or a native element\r\n  protected _statusElm!: HTMLElement;\r\n  protected _bindingEventService: BindingEventService_;\r\n  protected _options: GridPagerOption;\r\n  protected _defaults: GridPagerOption = {\r\n    showAllText: 'Showing all {rowCount} rows',\r\n    showPageText: 'Showing page {pageNum} of {pageCount}',\r\n    showCountText: 'From {countBegin} to {countEnd} of {rowCount} rows',\r\n    showCount: false,\r\n    pagingOptions: [\r\n      { data: 0, name: 'All', ariaLabel: 'Show All Pages' },\r\n      { data: -1, name: 'Auto', ariaLabel: 'Auto Page Size' },\r\n      { data: 25, name: '25', ariaLabel: 'Show 25 rows per page' },\r\n      { data: 50, name: '50', ariaLabel: 'Show 50 rows per page' },\r\n      { data: 100, name: '100', ariaLabel: 'Show 100 rows per page' },\r\n    ],\r\n    showPageSizes: false\r\n  };\r\n\r\n  constructor(protected readonly dataView: SlickDataView, protected readonly grid: SlickGrid, selectorOrElm: HTMLElement | string, options?: Partial<GridPagerOption>) {\r\n    this._container = this.getContainerElement(selectorOrElm) as HTMLElement;\r\n    this._options = Utils.extend(true, {}, this._defaults, options);\r\n    this._bindingEventService = new BindingEventService();\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.constructPagerUI();\r\n    this.updatePager(this.dataView.getPagingInfo());\r\n    this.dataView.onPagingInfoChanged.subscribe((_e, pagingInfo) => {\r\n      this.updatePager(pagingInfo);\r\n    });\r\n  }\r\n\r\n  /** Destroy function when element is destroyed */\r\n  destroy() {\r\n    this.setPageSize(0);\r\n    this._bindingEventService.unbindAll();\r\n    Utils.emptyElement(this._container);\r\n  }\r\n\r\n  protected getNavState() {\r\n    const cannotLeaveEditMode = !SlickGlobalEditorLock.commitCurrentEdit();\r\n    const pagingInfo = this.dataView.getPagingInfo();\r\n    const lastPage = pagingInfo.totalPages - 1;\r\n\r\n    return {\r\n      canGotoFirst: !cannotLeaveEditMode && pagingInfo.pageSize !== 0 && pagingInfo.pageNum > 0,\r\n      canGotoLast: !cannotLeaveEditMode && pagingInfo.pageSize !== 0 && pagingInfo.pageNum !== lastPage,\r\n      canGotoPrev: !cannotLeaveEditMode && pagingInfo.pageSize !== 0 && pagingInfo.pageNum > 0,\r\n      canGotoNext: !cannotLeaveEditMode && pagingInfo.pageSize !== 0 && pagingInfo.pageNum < lastPage,\r\n      pagingInfo\r\n    };\r\n  }\r\n\r\n  protected setPageSize(n: number) {\r\n    this.dataView.setRefreshHints({\r\n      isFilterUnchanged: true\r\n    });\r\n    this.dataView.setPagingOptions({ pageSize: n });\r\n  }\r\n\r\n  protected gotoFirst() {\r\n    if (this.getNavState().canGotoFirst) {\r\n      this.dataView.setPagingOptions({ pageNum: 0 });\r\n    }\r\n  }\r\n\r\n  protected gotoLast() {\r\n    const state = this.getNavState();\r\n    if (state.canGotoLast) {\r\n      this.dataView.setPagingOptions({ pageNum: state.pagingInfo.totalPages - 1 });\r\n    }\r\n  }\r\n\r\n  protected gotoPrev() {\r\n    const state = this.getNavState();\r\n    if (state.canGotoPrev) {\r\n      this.dataView.setPagingOptions({ pageNum: state.pagingInfo.pageNum - 1 });\r\n    }\r\n  }\r\n\r\n  protected gotoNext() {\r\n    const state = this.getNavState();\r\n    if (state.canGotoNext) {\r\n      this.dataView.setPagingOptions({ pageNum: state.pagingInfo.pageNum + 1 });\r\n    }\r\n  }\r\n\r\n  protected getContainerElement(selectorOrElm: object | HTMLElement | string) {\r\n    // the container might be a string, a jQuery object or a native element\r\n    return typeof selectorOrElm === 'string'\r\n      ? document.querySelector(selectorOrElm)\r\n      : typeof selectorOrElm === 'object' && (selectorOrElm as any)[0]\r\n        ? (selectorOrElm as any)[0] as HTMLElement\r\n        : selectorOrElm;\r\n  }\r\n\r\n  protected constructPagerUI() {\r\n    // the container might be a string, a jQuery object or a native element\r\n    const container = this.getContainerElement(this._container) as HTMLElement | HTMLElement[];\r\n    if (!container || ((container as any).jquery && !(container as HTMLElement[])[0])) { return; }\r\n\r\n    const navElm = document.createElement('span');\r\n    navElm.className = 'slick-pager-nav';\r\n\r\n    const settingsElm = document.createElement('span');\r\n    settingsElm.className = 'slick-pager-settings';\r\n\r\n    this._statusElm = document.createElement('span');\r\n    this._statusElm.className = 'slick-pager-status';\r\n\r\n    const pagerSettingsElm = document.createElement('span');\r\n    pagerSettingsElm.className = 'slick-pager-settings-expanded';\r\n    pagerSettingsElm.textContent = 'Show: ';\r\n\r\n    for (let o = 0; o < this._options.pagingOptions.length; o++) {\r\n      const p = this._options.pagingOptions[o];\r\n\r\n      const anchorElm = document.createElement('a');\r\n      anchorElm.textContent = p.name;\r\n      anchorElm.ariaLabel = p.ariaLabel;\r\n      anchorElm.dataset.val = String(p.data);\r\n      pagerSettingsElm.appendChild(anchorElm);\r\n\r\n      this._bindingEventService.bind(anchorElm, 'click', ((e: any) => {\r\n        const pagesize = e.target.dataset.val;\r\n        if (pagesize !== undefined) {\r\n          if (Number(pagesize) === -1) {\r\n            const vp = this.grid.getViewport();\r\n            this.setPageSize(vp.bottom - vp.top);\r\n          } else {\r\n            this.setPageSize(parseInt(pagesize));\r\n          }\r\n        }\r\n      }));\r\n    }\r\n\r\n    pagerSettingsElm.style.display = this._options.showPageSizes ? 'block' : 'none';\r\n\r\n    settingsElm.appendChild(pagerSettingsElm);\r\n\r\n    // light bulb icon\r\n    const displayPaginationContainer = document.createElement('span');\r\n    const displayIconElm = document.createElement('span');\r\n    displayPaginationContainer.className = 'sgi-container';\r\n    displayIconElm.ariaLabel = 'Show Pagination Options';\r\n    displayIconElm.role = 'button';\r\n    displayIconElm.className = 'sgi sgi-lightbulb';\r\n    displayPaginationContainer.appendChild(displayIconElm);\r\n\r\n    this._bindingEventService.bind(displayIconElm, 'click', () => {\r\n      const styleDisplay = pagerSettingsElm.style.display;\r\n      pagerSettingsElm.style.display = styleDisplay === 'none' ? 'inline-flex' : 'none';\r\n    });\r\n    settingsElm.appendChild(displayPaginationContainer);\r\n\r\n    const pageButtons = [\r\n      { key: 'start', ariaLabel: 'First Page', callback: this.gotoFirst },\r\n      { key: 'left', ariaLabel: 'Previous Page', callback: this.gotoPrev },\r\n      { key: 'right', ariaLabel: 'Next Page', callback: this.gotoNext },\r\n      { key: 'end', ariaLabel: 'Last Page', callback: this.gotoLast },\r\n    ];\r\n\r\n    pageButtons.forEach(pageBtn => {\r\n      const iconElm = document.createElement('span');\r\n      iconElm.className = 'sgi-container';\r\n\r\n      const innerIconElm = document.createElement('span');\r\n      innerIconElm.role = 'button';\r\n      innerIconElm.ariaLabel = pageBtn.ariaLabel;\r\n      innerIconElm.className = `sgi sgi-chevron-${pageBtn.key}`;\r\n      this._bindingEventService.bind(innerIconElm, 'click', pageBtn.callback.bind(this));\r\n\r\n      iconElm.appendChild(innerIconElm);\r\n      navElm.appendChild(iconElm);\r\n    });\r\n\r\n    const slickPagerElm = document.createElement('div');\r\n    slickPagerElm.className = 'slick-pager';\r\n\r\n    slickPagerElm.appendChild(navElm);\r\n    slickPagerElm.appendChild(this._statusElm);\r\n    slickPagerElm.appendChild(settingsElm);\r\n\r\n    (container as HTMLElement).appendChild(slickPagerElm);\r\n  }\r\n\r\n  protected updatePager(pagingInfo: PagingInfo) {\r\n    if (!this._container || ((this._container as any).jquery && !(this._container as any)[0])) { return; }\r\n    const state = this.getNavState();\r\n\r\n    // remove disabled class on all icons\r\n    this._container.querySelectorAll('.slick-pager-nav span')\r\n      .forEach(pagerIcon => pagerIcon.classList.remove('sgi-state-disabled'));\r\n\r\n    // add back disabled class to only necessary icons\r\n    if (!state.canGotoFirst) {\r\n      this._container!.querySelector('.sgi-chevron-start')?.classList.add('sgi-state-disabled');\r\n    }\r\n    if (!state.canGotoLast) {\r\n      this._container!.querySelector('.sgi-chevron-end')?.classList.add('sgi-state-disabled');\r\n    }\r\n    if (!state.canGotoNext) {\r\n      this._container!.querySelector('.sgi-chevron-right')?.classList.add('sgi-state-disabled');\r\n    }\r\n    if (!state.canGotoPrev) {\r\n      this._container!.querySelector('.sgi-chevron-left')?.classList.add('sgi-state-disabled');\r\n    }\r\n\r\n    if (pagingInfo.pageSize === 0) {\r\n      this._statusElm.textContent = (this._options.showAllText.replace('{rowCount}', pagingInfo.totalRows + '').replace('{pageCount}', pagingInfo.totalPages + ''));\r\n    } else {\r\n      this._statusElm.textContent = (this._options.showPageText.replace('{pageNum}', pagingInfo.pageNum + 1 + '').replace('{pageCount}', pagingInfo.totalPages + ''));\r\n    }\r\n\r\n    if (this._options.showCount && pagingInfo.pageSize !== 0) {\r\n      const pageBegin = pagingInfo.pageNum * pagingInfo.pageSize;\r\n      let currentText = this._statusElm.textContent;\r\n\r\n      if (currentText) {\r\n        currentText += ' - ';\r\n      }\r\n\r\n      this._statusElm.textContent =\r\n        currentText +\r\n        this._options.showCountText\r\n          .replace('{rowCount}', String(pagingInfo.totalRows))\r\n          .replace('{countBegin}', String(pageBegin + 1))\r\n          .replace('{countEnd}', String(Math.min(pageBegin + pagingInfo.pageSize, pagingInfo.totalRows)));\r\n    }\r\n  }\r\n}\r\n\r\n// extend Slick namespace on window object when building as iife\r\nif (IIFE_ONLY && window.Slick) {\r\n  window.Slick.Controls = window.Slick.Controls || {};\r\n  window.Slick.Controls.Pager = SlickGridPager;\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": []
}
