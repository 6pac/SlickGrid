{
  "version": 3,
  "sources": ["../../src/slick.grid.ts"],
  "sourcesContent": ["// @ts-ignore\r\nimport type SortableInstance from 'sortablejs';\r\n\r\nimport type {\r\n  AutoSize,\r\n  CellViewportRange,\r\n  Column,\r\n  ColumnSort,\r\n  CssStyleHash,\r\n  CSSStyleDeclarationWritable,\r\n  CustomDataView,\r\n  DOMEvent,\r\n  DragPosition,\r\n  DragRowMove,\r\n  Editor,\r\n  EditorArguments,\r\n  EditorConstructor,\r\n  EditController,\r\n  Formatter,\r\n  FormatterOverrideCallback,\r\n  FormatterResultObject,\r\n  FormatterResultWithHtml,\r\n  FormatterResultWithText,\r\n  GridOption as BaseGridOption,\r\n  InteractionBase,\r\n  ItemMetadata,\r\n  MultiColumnSort,\r\n  OnActiveCellChangedEventArgs,\r\n  OnAddNewRowEventArgs,\r\n  OnAutosizeColumnsEventArgs,\r\n  OnBeforeUpdateColumnsEventArgs,\r\n  OnBeforeAppendCellEventArgs,\r\n  OnBeforeCellEditorDestroyEventArgs,\r\n  OnBeforeColumnsResizeEventArgs,\r\n  OnBeforeEditCellEventArgs,\r\n  OnBeforeHeaderCellDestroyEventArgs,\r\n  OnBeforeHeaderRowCellDestroyEventArgs,\r\n  OnBeforeFooterRowCellDestroyEventArgs,\r\n  OnBeforeSetColumnsEventArgs,\r\n  OnCellChangeEventArgs,\r\n  OnCellCssStylesChangedEventArgs,\r\n  OnColumnsDragEventArgs,\r\n  OnColumnsReorderedEventArgs,\r\n  OnColumnsResizedEventArgs,\r\n  OnColumnsResizeDblClickEventArgs,\r\n  OnCompositeEditorChangeEventArgs,\r\n  OnDblClickEventArgs,\r\n  OnFooterContextMenuEventArgs,\r\n  OnFooterRowCellRenderedEventArgs,\r\n  OnHeaderCellRenderedEventArgs,\r\n  OnFooterClickEventArgs,\r\n  OnHeaderClickEventArgs,\r\n  OnHeaderContextMenuEventArgs,\r\n  OnHeaderMouseEventArgs,\r\n  OnHeaderRowCellRenderedEventArgs,\r\n  OnKeyDownEventArgs,\r\n  OnValidationErrorEventArgs,\r\n  OnRenderedEventArgs,\r\n  OnSelectedRowsChangedEventArgs,\r\n  OnSetOptionsEventArgs,\r\n  OnActivateChangedOptionsEventArgs,\r\n  OnScrollEventArgs,\r\n  PagingInfo,\r\n  RowInfo,\r\n  SelectionModel,\r\n  SingleColumnSort,\r\n  SlickGridModel,\r\n  SlickPlugin,\r\n  MenuCommandItemCallbackArgs,\r\n  OnClickEventArgs,\r\n} from './models/index';\r\nimport {\r\n  type BasePubSub,\r\n  BindingEventService as BindingEventService_,\r\n  ColAutosizeMode as ColAutosizeMode_,\r\n  GlobalEditorLock as GlobalEditorLock_,\r\n  GridAutosizeColsMode as GridAutosizeColsMode_,\r\n  keyCode as keyCode_,\r\n  preClickClassName as preClickClassName_,\r\n  RowSelectionMode as RowSelectionMode_,\r\n  type SlickEditorLock,\r\n  SlickEvent as SlickEvent_,\r\n  SlickEventData as SlickEventData_,\r\n  SlickRange as SlickRange_,\r\n  Utils as Utils_,\r\n  ValueFilterMode as ValueFilterMode_,\r\n  WidthEvalMode as WidthEvalMode_,\r\n} from './slick.core';\r\nimport { Draggable as Draggable_, MouseWheel as MouseWheel_, Resizable as Resizable_ } from './slick.interactions';\r\n\r\n// for (iife) load Slick methods from global Slick object, or use imports for (esm)\r\nconst BindingEventService = IIFE_ONLY ? Slick.BindingEventService : BindingEventService_;\r\nconst ColAutosizeMode = IIFE_ONLY ? Slick.ColAutosizeMode : ColAutosizeMode_;\r\nconst SlickEvent = IIFE_ONLY ? Slick.Event : SlickEvent_;\r\nconst SlickEventData = IIFE_ONLY ? Slick.EventData : SlickEventData_;\r\nconst GlobalEditorLock = IIFE_ONLY ? Slick.GlobalEditorLock : GlobalEditorLock_;\r\nconst GridAutosizeColsMode = IIFE_ONLY ? Slick.GridAutosizeColsMode : GridAutosizeColsMode_;\r\nconst keyCode = IIFE_ONLY ? Slick.keyCode : keyCode_;\r\nconst preClickClassName = IIFE_ONLY ? Slick.preClickClassName : preClickClassName_;\r\nconst SlickRange = IIFE_ONLY ? Slick.Range : SlickRange_;\r\nconst RowSelectionMode = IIFE_ONLY ? Slick.RowSelectionMode : RowSelectionMode_;\r\nconst ValueFilterMode = IIFE_ONLY ? Slick.ValueFilterMode : ValueFilterMode_;\r\nconst Utils = IIFE_ONLY ? Slick.Utils : Utils_;\r\nconst WidthEvalMode = IIFE_ONLY ? Slick.WidthEvalMode : WidthEvalMode_;\r\nconst Draggable = IIFE_ONLY ? Slick.Draggable : Draggable_;\r\nconst MouseWheel = IIFE_ONLY ? Slick.MouseWheel : MouseWheel_;\r\nconst Resizable = IIFE_ONLY ? Slick.Resizable : Resizable_;\r\n\r\n/**\r\n * @license\r\n * (c) 2009-present Michael Leibman\r\n * michael{dot}leibman{at}gmail{dot}com\r\n * http://github.com/mleibman/slickgrid\r\n *\r\n * Distributed under MIT license.\r\n * All rights reserved.\r\n *\r\n * SlickGrid v5.9.2\r\n *\r\n * NOTES:\r\n *     Cell/row DOM manipulations are done directly bypassing JS DOM manipulation methods.\r\n *     This increases the speed dramatically, but can only be done safely because there are no event handlers\r\n *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()\r\n *     and do proper cleanup.\r\n */\r\n\r\n//////////////////////////////////////////////////////////////////////////////////////////////\r\n// SlickGrid class implementation (available as SlickGrid)\r\n\r\ninterface RowCaching {\r\n  rowNode: HTMLElement[] | null,\r\n  cellColSpans: Array<number | '*'>;\r\n  cellNodesByColumnIdx: HTMLElement[];\r\n  cellRenderQueue: any[];\r\n}\r\n\r\nexport class SlickGrid<TData = any, C extends Column<TData> = Column<TData>, O extends BaseGridOption<C> = BaseGridOption<C>> {\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Public API\r\n  slickGridVersion = '5.9.2';\r\n\r\n  /** optional grid state clientId */\r\n  cid = '';\r\n\r\n  // Events\r\n  onActiveCellChanged: SlickEvent_<OnActiveCellChangedEventArgs>;\r\n  onActiveCellPositionChanged: SlickEvent_<{ grid: SlickGrid; }>;\r\n  onAddNewRow: SlickEvent_<OnAddNewRowEventArgs>;\r\n  onAutosizeColumns: SlickEvent_<OnAutosizeColumnsEventArgs>;\r\n  onBeforeAppendCell: SlickEvent_<OnBeforeAppendCellEventArgs>;\r\n  onBeforeCellEditorDestroy: SlickEvent_<OnBeforeCellEditorDestroyEventArgs>;\r\n  onBeforeColumnsResize: SlickEvent_<OnBeforeColumnsResizeEventArgs>;\r\n  onBeforeDestroy: SlickEvent_<{ grid: SlickGrid; }>;\r\n  onBeforeEditCell: SlickEvent_<OnBeforeEditCellEventArgs>;\r\n  onBeforeFooterRowCellDestroy: SlickEvent_<OnBeforeFooterRowCellDestroyEventArgs>;\r\n  onBeforeHeaderCellDestroy: SlickEvent_<OnBeforeHeaderCellDestroyEventArgs>;\r\n  onBeforeHeaderRowCellDestroy: SlickEvent_<OnBeforeHeaderRowCellDestroyEventArgs>;\r\n  onBeforeSetColumns: SlickEvent_<OnBeforeSetColumnsEventArgs>;\r\n  onBeforeSort: SlickEvent_<SingleColumnSort | MultiColumnSort>;\r\n  onBeforeUpdateColumns: SlickEvent_<OnBeforeUpdateColumnsEventArgs>;\r\n  onCellChange: SlickEvent_<OnCellChangeEventArgs>;\r\n  onCellCssStylesChanged: SlickEvent_<OnCellCssStylesChangedEventArgs>;\r\n  onClick: SlickEvent_<OnClickEventArgs>;\r\n  onColumnsReordered: SlickEvent_<OnColumnsReorderedEventArgs>;\r\n  onColumnsDrag: SlickEvent_<OnColumnsDragEventArgs>;\r\n  onColumnsResized: SlickEvent_<OnColumnsResizedEventArgs>;\r\n  onColumnsResizeDblClick: SlickEvent_<OnColumnsResizeDblClickEventArgs>;\r\n  onCompositeEditorChange: SlickEvent_<OnCompositeEditorChangeEventArgs>;\r\n  onContextMenu: SlickEvent_<MenuCommandItemCallbackArgs>;\r\n  onDrag: SlickEvent_<DragRowMove>;\r\n  onDblClick: SlickEvent_<OnDblClickEventArgs>;\r\n  onDragInit: SlickEvent_<DragRowMove>;\r\n  onDragStart: SlickEvent_<DragRowMove>;\r\n  onDragEnd: SlickEvent_<DragRowMove>;\r\n  onFooterClick: SlickEvent_<OnFooterClickEventArgs>;\r\n  onFooterContextMenu: SlickEvent_<OnFooterContextMenuEventArgs>;\r\n  onFooterRowCellRendered: SlickEvent_<OnFooterRowCellRenderedEventArgs>;\r\n  onHeaderCellRendered: SlickEvent_<OnHeaderCellRenderedEventArgs>;\r\n  onHeaderClick: SlickEvent_<OnHeaderClickEventArgs>;\r\n  onHeaderContextMenu: SlickEvent_<OnHeaderContextMenuEventArgs>;\r\n  onHeaderMouseEnter: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onHeaderMouseLeave: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onHeaderRowCellRendered: SlickEvent_<OnHeaderRowCellRenderedEventArgs>;\r\n  onHeaderRowMouseEnter: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onHeaderRowMouseLeave: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onKeyDown: SlickEvent_<OnKeyDownEventArgs>;\r\n  onMouseEnter: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onMouseLeave: SlickEvent_<OnHeaderMouseEventArgs>;\r\n  onRendered: SlickEvent_<OnRenderedEventArgs>;\r\n  onScroll: SlickEvent_<OnScrollEventArgs>;\r\n  onSelectedRowsChanged: SlickEvent_<OnSelectedRowsChangedEventArgs>;\r\n  onSetOptions: SlickEvent_<OnSetOptionsEventArgs>;\r\n  onActivateChangedOptions: SlickEvent_<OnActivateChangedOptionsEventArgs>;\r\n  onSort: SlickEvent_<SingleColumnSort | MultiColumnSort>;\r\n  onValidationError: SlickEvent_<OnValidationErrorEventArgs>;\r\n  onViewportChanged: SlickEvent_<{ grid: SlickGrid; }>;\r\n\r\n  // ---\r\n  // protected variables\r\n\r\n  // shared across all grids on the page\r\n  protected scrollbarDimensions?: { height: number; width: number; };\r\n  protected maxSupportedCssHeight!: number;  // browser's breaking point\r\n\r\n  protected canvas: HTMLCanvasElement | null = null;\r\n  protected canvas_context: CanvasRenderingContext2D | null = null;\r\n\r\n  // settings\r\n  protected _options!: O;\r\n  protected _defaults: BaseGridOption = {\r\n    alwaysShowVerticalScroll: false,\r\n    alwaysAllowHorizontalScroll: false,\r\n    explicitInitialization: false,\r\n    rowHeight: 25,\r\n    defaultColumnWidth: 80,\r\n    enableHtmlRendering: true,\r\n    enableAddRow: false,\r\n    leaveSpaceForNewRows: false,\r\n    editable: false,\r\n    autoEdit: true,\r\n    autoEditNewRow: true,\r\n    autoCommitEdit: false,\r\n    suppressActiveCellChangeOnEdit: false,\r\n    enableCellNavigation: true,\r\n    enableColumnReorder: true,\r\n    unorderableColumnCssClass: 'unorderable',\r\n    asyncEditorLoading: false,\r\n    asyncEditorLoadDelay: 100,\r\n    forceFitColumns: false,\r\n    enableAsyncPostRender: false,\r\n    asyncPostRenderDelay: 50,\r\n    enableAsyncPostRenderCleanup: false,\r\n    asyncPostRenderCleanupDelay: 40,\r\n    auto: false,\r\n    nonce: '',\r\n    editorLock: GlobalEditorLock,\r\n    showColumnHeader: true,\r\n    showHeaderRow: false,\r\n    headerRowHeight: 25,\r\n    createFooterRow: false,\r\n    showFooterRow: false,\r\n    footerRowHeight: 25,\r\n    createPreHeaderPanel: false,\r\n    showPreHeaderPanel: false,\r\n    preHeaderPanelHeight: 25,\r\n    showTopPanel: false,\r\n    topPanelHeight: 25,\r\n    formatterFactory: null,\r\n    editorFactory: null,\r\n    cellFlashingCssClass: 'flashing',\r\n    rowHighlightCssClass: 'highlight-animate',\r\n    rowHighlightDuration: 400,\r\n    selectedCellCssClass: 'selected',\r\n    multiSelect: true,\r\n    enableTextSelectionOnCells: false,\r\n    dataItemColumnValueExtractor: null,\r\n    frozenBottom: false,\r\n    frozenColumn: -1,\r\n    frozenRow: -1,\r\n    frozenRightViewportMinWidth: 100,\r\n    throwWhenFrozenNotAllViewable: false,\r\n    fullWidthRows: false,\r\n    multiColumnSort: false,\r\n    numberedMultiColumnSort: false,\r\n    tristateMultiColumnSort: false,\r\n    sortColNumberInSeparateSpan: false,\r\n    defaultFormatter: this.defaultFormatter,\r\n    forceSyncScrolling: false,\r\n    addNewRowCssClass: 'new-row',\r\n    preserveCopiedSelectionOnPaste: false,\r\n    showCellSelection: true,\r\n    viewportClass: undefined,\r\n    minRowBuffer: 3,\r\n    emulatePagingWhenScrolling: true, // when scrolling off bottom of viewport, place new row at top of viewport\r\n    editorCellNavOnLRKeys: false,\r\n    enableMouseWheelScrollHandler: true,\r\n    doPaging: true,\r\n    autosizeColsMode: GridAutosizeColsMode.LegacyOff,\r\n    autosizeColPaddingPx: 4,\r\n    scrollRenderThrottling: 50,\r\n    autosizeTextAvgToMWidthRatio: 0.75,\r\n    viewportSwitchToScrollModeWidthPercent: undefined,\r\n    viewportMinWidthPx: undefined,\r\n    viewportMaxWidthPx: undefined,\r\n    suppressCssChangesOnHiddenInit: false,\r\n    ffMaxSupportedCssHeight: 6000000,\r\n    maxSupportedCssHeight: 1000000000,\r\n    sanitizer: undefined,  // sanitize function, built in basic sanitizer is: Slick.RegexSanitizer(dirtyHtml)\r\n    logSanitizedHtml: false, // log to console when sanitised - recommend true for testing of dev and production\r\n    mixinDefaults: true,\r\n    shadowRoot: undefined\r\n  };\r\n\r\n  protected _columnDefaults = {\r\n    name: '',\r\n    headerCssClass: null,\r\n    defaultSortAsc: true,\r\n    focusable: true,\r\n    hidden: false,\r\n    minWidth: 30,\r\n    maxWidth: undefined,\r\n    rerenderOnResize: false,\r\n    reorderable: true,\r\n    resizable: true,\r\n    sortable: false,\r\n    selectable: true,\r\n  } as Partial<C>;\r\n\r\n  protected _columnAutosizeDefaults: AutoSize = {\r\n    ignoreHeaderText: false,\r\n    colValueArray: undefined,\r\n    allowAddlPercent: undefined,\r\n    formatterOverride: undefined,\r\n    autosizeMode: ColAutosizeMode.ContentIntelligent,\r\n    rowSelectionModeOnInit: undefined,\r\n    rowSelectionMode: RowSelectionMode.FirstNRows,\r\n    rowSelectionCount: 100,\r\n    valueFilterMode: ValueFilterMode.None,\r\n    widthEvalMode: WidthEvalMode.Auto,\r\n    sizeToRemaining: undefined,\r\n    widthPx: undefined,\r\n    contentSizePx: 0,\r\n    headerWidthPx: 0,\r\n    colDataTypeOf: undefined\r\n  };\r\n\r\n  protected _columnResizeTimer?: any;\r\n  protected _executionBlockTimer?: any;\r\n  protected _flashCellTimer?: any;\r\n  protected _highlightRowTimer?: any;\r\n\r\n  // scroller\r\n  protected th!: number;   // virtual height\r\n  protected h!: number;    // real scrollable height\r\n  protected ph!: number;   // page height\r\n  protected n!: number;    // number of pages\r\n  protected cj!: number;   // \"jumpiness\" coefficient\r\n\r\n  protected page = 0;       // current page\r\n  protected offset = 0;     // current page offset\r\n  protected vScrollDir = 1;\r\n  protected _bindingEventService = new BindingEventService();\r\n  protected initialized = false;\r\n  protected _container!: HTMLElement;\r\n  protected uid = `slickgrid_${Math.round(1000000 * Math.random())}`;\r\n  protected _focusSink!: HTMLDivElement;\r\n  protected _focusSink2!: HTMLDivElement;\r\n  protected _groupHeaders: HTMLDivElement[] = [];\r\n  protected _headerScroller: HTMLDivElement[] = [];\r\n  protected _headers: HTMLDivElement[] = [];\r\n  protected _headerRows!: HTMLDivElement[];\r\n  protected _headerRowScroller!: HTMLDivElement[];\r\n  protected _headerRowSpacerL!: HTMLDivElement;\r\n  protected _headerRowSpacerR!: HTMLDivElement;\r\n  protected _footerRow!: HTMLDivElement[];\r\n  protected _footerRowScroller!: HTMLDivElement[];\r\n  protected _footerRowSpacerL!: HTMLDivElement;\r\n  protected _footerRowSpacerR!: HTMLDivElement;\r\n  protected _preHeaderPanel!: HTMLDivElement;\r\n  protected _preHeaderPanelScroller!: HTMLDivElement;\r\n  protected _preHeaderPanelSpacer!: HTMLDivElement;\r\n  protected _preHeaderPanelR!: HTMLDivElement;\r\n  protected _preHeaderPanelScrollerR!: HTMLDivElement;\r\n  protected _preHeaderPanelSpacerR!: HTMLDivElement;\r\n  protected _topPanelScrollers!: HTMLDivElement[];\r\n  protected _topPanels!: HTMLDivElement[];\r\n  protected _viewport!: HTMLDivElement[];\r\n  protected _canvas!: HTMLDivElement[];\r\n  protected _style?: HTMLStyleElement;\r\n  protected _boundAncestors: HTMLElement[] = [];\r\n  protected stylesheet?: { cssRules: Array<{ selectorText: string; }>; rules: Array<{ selectorText: string; }>; } | null;\r\n  protected columnCssRulesL?: Array<{ selectorText: string; }>;\r\n  protected columnCssRulesR?: Array<{ selectorText: string; }>;\r\n  protected viewportH = 0;\r\n  protected viewportW = 0;\r\n  protected canvasWidth = 0;\r\n  protected canvasWidthL = 0;\r\n  protected canvasWidthR = 0;\r\n  protected headersWidth = 0;\r\n  protected headersWidthL = 0;\r\n  protected headersWidthR = 0;\r\n  protected viewportHasHScroll = false;\r\n  protected viewportHasVScroll = false;\r\n  protected headerColumnWidthDiff = 0;\r\n  protected headerColumnHeightDiff = 0; // border+padding\r\n  protected cellWidthDiff = 0;\r\n  protected cellHeightDiff = 0;\r\n  protected absoluteColumnMinWidth!: number;\r\n  protected hasFrozenRows = false;\r\n  protected frozenRowsHeight = 0;\r\n  protected actualFrozenRow = -1;\r\n  protected paneTopH = 0;\r\n  protected paneBottomH = 0;\r\n  protected viewportTopH = 0;\r\n  protected viewportBottomH = 0;\r\n  protected topPanelH = 0;\r\n  protected headerRowH = 0;\r\n  protected footerRowH = 0;\r\n\r\n  protected tabbingDirection = 1;\r\n  protected _activeCanvasNode!: HTMLDivElement;\r\n  protected _activeViewportNode!: HTMLDivElement;\r\n  protected activePosX!: number;\r\n  protected activeRow!: number;\r\n  protected activeCell!: number;\r\n  protected activeCellNode: HTMLDivElement | null = null;\r\n  protected currentEditor: Editor | null = null;\r\n  protected serializedEditorValue: any;\r\n  protected editController?: EditController;\r\n\r\n  protected rowsCache: Array<RowCaching> = {} as any;\r\n  protected renderedRows = 0;\r\n  protected numVisibleRows = 0;\r\n  protected prevScrollTop = 0;\r\n  protected scrollTop = 0;\r\n  protected lastRenderedScrollTop = 0;\r\n  protected lastRenderedScrollLeft = 0;\r\n  protected prevScrollLeft = 0;\r\n  protected scrollLeft = 0;\r\n\r\n  protected selectionModel?: SelectionModel;\r\n  protected selectedRows: number[] = [];\r\n\r\n  protected plugins: SlickPlugin[] = [];\r\n  protected cellCssClasses: CssStyleHash = {};\r\n\r\n  protected columnsById: Record<string, number> = {};\r\n  protected sortColumns: ColumnSort[] = [];\r\n  protected columnPosLeft: number[] = [];\r\n  protected columnPosRight: number[] = [];\r\n\r\n  protected pagingActive = false;\r\n  protected pagingIsLastPage = false;\r\n\r\n  protected scrollThrottle!: { enqueue: () => void; dequeue: () => void; };\r\n\r\n  // async call handles\r\n  protected h_editorLoader: any = null;\r\n  protected h_render = null;\r\n  protected h_postrender: any = null;\r\n  protected h_postrenderCleanup: any = null;\r\n  protected postProcessedRows: any = {};\r\n  protected postProcessToRow: number = null as any;\r\n  protected postProcessFromRow: number = null as any;\r\n  protected postProcessedCleanupQueue: Array<{\r\n    actionType: string;\r\n    groupId: number;\r\n    node: HTMLElement | HTMLElement[];\r\n    columnIdx?: number;\r\n    rowIdx?: number;\r\n  }> = [];\r\n  protected postProcessgroupId = 0;\r\n\r\n  // perf counters\r\n  protected counter_rows_rendered = 0;\r\n  protected counter_rows_removed = 0;\r\n\r\n  protected _paneHeaderL!: HTMLDivElement;\r\n  protected _paneHeaderR!: HTMLDivElement;\r\n  protected _paneTopL!: HTMLDivElement;\r\n  protected _paneTopR!: HTMLDivElement;\r\n  protected _paneBottomL!: HTMLDivElement;\r\n  protected _paneBottomR!: HTMLDivElement;\r\n  protected _headerScrollerL!: HTMLDivElement;\r\n  protected _headerScrollerR!: HTMLDivElement;\r\n  protected _headerL!: HTMLDivElement;\r\n  protected _headerR!: HTMLDivElement;\r\n  protected _groupHeadersL!: HTMLDivElement;\r\n  protected _groupHeadersR!: HTMLDivElement;\r\n  protected _headerRowScrollerL!: HTMLDivElement;\r\n  protected _headerRowScrollerR!: HTMLDivElement;\r\n  protected _footerRowScrollerL!: HTMLDivElement;\r\n  protected _footerRowScrollerR!: HTMLDivElement;\r\n  protected _headerRowL!: HTMLDivElement;\r\n  protected _headerRowR!: HTMLDivElement;\r\n  protected _footerRowL!: HTMLDivElement;\r\n  protected _footerRowR!: HTMLDivElement;\r\n  protected _topPanelScrollerL!: HTMLDivElement;\r\n  protected _topPanelScrollerR!: HTMLDivElement;\r\n  protected _topPanelL!: HTMLDivElement;\r\n  protected _topPanelR!: HTMLDivElement;\r\n  protected _viewportTopL!: HTMLDivElement;\r\n  protected _viewportTopR!: HTMLDivElement;\r\n  protected _viewportBottomL!: HTMLDivElement;\r\n  protected _viewportBottomR!: HTMLDivElement;\r\n  protected _canvasTopL!: HTMLDivElement;\r\n  protected _canvasTopR!: HTMLDivElement;\r\n  protected _canvasBottomL!: HTMLDivElement;\r\n  protected _canvasBottomR!: HTMLDivElement;\r\n  protected _viewportScrollContainerX!: HTMLDivElement;\r\n  protected _viewportScrollContainerY!: HTMLDivElement;\r\n  protected _headerScrollContainer!: HTMLDivElement;\r\n  protected _headerRowScrollContainer!: HTMLDivElement;\r\n  protected _footerRowScrollContainer!: HTMLDivElement;\r\n\r\n  // store css attributes if display:none is active in container or parent\r\n  protected cssShow = { position: 'absolute', visibility: 'hidden', display: 'block' };\r\n  protected _hiddenParents: HTMLElement[] = [];\r\n  protected oldProps: Array<Partial<CSSStyleDeclaration>> = [];\r\n  protected enforceFrozenRowHeightRecalc = false;\r\n  protected columnResizeDragging = false;\r\n  protected slickDraggableInstance: InteractionBase | null = null;\r\n  protected slickMouseWheelInstances: Array<InteractionBase> = [];\r\n  protected slickResizableInstances: Array<InteractionBase> = [];\r\n  protected sortableSideLeftInstance?: SortableInstance;\r\n  protected sortableSideRightInstance?: SortableInstance;\r\n  protected logMessageCount = 0;\r\n  protected logMessageMaxCount = 30;\r\n  protected _pubSubService?: BasePubSub;\r\n\r\n  /**\r\n   * Creates a new instance of the grid.\r\n   * @class SlickGrid\r\n   * @constructor\r\n   * @param {Node} container - Container node to create the grid in.\r\n   * @param {Array|Object} data - An array of objects for databinding or an external DataView.\r\n   * @param {Array<C>} columns - An array of column definitions.\r\n   * @param {Object} [options] - Grid Options\r\n   * @param {Object} [externalPubSub] - optional External PubSub Service to use by SlickEvent\r\n   **/\r\n  constructor(protected readonly container: HTMLElement | string, protected data: CustomDataView<TData> | TData[], protected columns: C[], options: Partial<O>, protected readonly externalPubSub?: BasePubSub) {\r\n    this._container = typeof this.container === 'string'\r\n      ? document.querySelector(this.container) as HTMLDivElement\r\n      : this.container;\r\n\r\n    if (!this._container) {\r\n      throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);\r\n    }\r\n\r\n    this._pubSubService = externalPubSub;\r\n    this.onActiveCellChanged = new SlickEvent<OnActiveCellChangedEventArgs>('onActiveCellChanged', externalPubSub);\r\n    this.onActiveCellPositionChanged = new SlickEvent<{ grid: SlickGrid; }>('onActiveCellPositionChanged', externalPubSub);\r\n    this.onAddNewRow = new SlickEvent<OnAddNewRowEventArgs>('onAddNewRow', externalPubSub);\r\n    this.onAutosizeColumns = new SlickEvent<OnAutosizeColumnsEventArgs>('onAutosizeColumns', externalPubSub);\r\n    this.onBeforeAppendCell = new SlickEvent<OnBeforeAppendCellEventArgs>('onBeforeAppendCell', externalPubSub);\r\n    this.onBeforeCellEditorDestroy = new SlickEvent<OnBeforeCellEditorDestroyEventArgs>('onBeforeCellEditorDestroy', externalPubSub);\r\n    this.onBeforeColumnsResize = new SlickEvent<OnBeforeColumnsResizeEventArgs>('onBeforeColumnsResize', externalPubSub);\r\n    this.onBeforeDestroy = new SlickEvent<{ grid: SlickGrid; }>('onBeforeDestroy', externalPubSub);\r\n    this.onBeforeEditCell = new SlickEvent<OnBeforeEditCellEventArgs>('onBeforeEditCell', externalPubSub);\r\n    this.onBeforeFooterRowCellDestroy = new SlickEvent<OnBeforeFooterRowCellDestroyEventArgs>('onBeforeFooterRowCellDestroy', externalPubSub);\r\n    this.onBeforeHeaderCellDestroy = new SlickEvent<OnBeforeHeaderCellDestroyEventArgs>('onBeforeHeaderCellDestroy', externalPubSub);\r\n    this.onBeforeHeaderRowCellDestroy = new SlickEvent<OnBeforeHeaderRowCellDestroyEventArgs>('onBeforeHeaderRowCellDestroy', externalPubSub);\r\n    this.onBeforeSetColumns = new SlickEvent<OnBeforeSetColumnsEventArgs>('onBeforeSetColumns', externalPubSub);\r\n    this.onBeforeSort = new SlickEvent<SingleColumnSort | MultiColumnSort>('onBeforeSort', externalPubSub);\r\n    this.onBeforeUpdateColumns = new SlickEvent<OnBeforeUpdateColumnsEventArgs>('onBeforeUpdateColumns', externalPubSub);\r\n    this.onCellChange = new SlickEvent<OnCellChangeEventArgs>('onCellChange', externalPubSub);\r\n    this.onCellCssStylesChanged = new SlickEvent<OnCellCssStylesChangedEventArgs>('onCellCssStylesChanged', externalPubSub);\r\n    this.onClick = new SlickEvent<OnClickEventArgs>('onClick', externalPubSub);\r\n    this.onColumnsReordered = new SlickEvent<OnColumnsReorderedEventArgs>('onColumnsReordered', externalPubSub);\r\n    this.onColumnsDrag = new SlickEvent<OnColumnsDragEventArgs>('onColumnsDrag', externalPubSub);\r\n    this.onColumnsResized = new SlickEvent<OnColumnsResizedEventArgs>('onColumnsResized', externalPubSub);\r\n    this.onColumnsResizeDblClick = new SlickEvent<OnColumnsResizeDblClickEventArgs>('onColumnsResizeDblClick', externalPubSub);\r\n    this.onCompositeEditorChange = new SlickEvent<OnCompositeEditorChangeEventArgs>('onCompositeEditorChange', externalPubSub);\r\n    this.onContextMenu = new SlickEvent<MenuCommandItemCallbackArgs>('onContextMenu', externalPubSub);\r\n    this.onDrag = new SlickEvent<DragRowMove>('onDrag', externalPubSub);\r\n    this.onDblClick = new SlickEvent<OnDblClickEventArgs>('onDblClick', externalPubSub);\r\n    this.onDragInit = new SlickEvent<DragRowMove>('onDragInit', externalPubSub);\r\n    this.onDragStart = new SlickEvent<DragRowMove>('onDragStart', externalPubSub);\r\n    this.onDragEnd = new SlickEvent<DragRowMove>('onDragEnd', externalPubSub);\r\n    this.onFooterClick = new SlickEvent<OnFooterClickEventArgs>('onFooterClick', externalPubSub);\r\n    this.onFooterContextMenu = new SlickEvent<OnFooterContextMenuEventArgs>('onFooterContextMenu', externalPubSub);\r\n    this.onFooterRowCellRendered = new SlickEvent<OnFooterRowCellRenderedEventArgs>('onFooterRowCellRendered', externalPubSub);\r\n    this.onHeaderCellRendered = new SlickEvent<OnHeaderCellRenderedEventArgs>('onHeaderCellRendered', externalPubSub);\r\n    this.onHeaderClick = new SlickEvent<OnHeaderClickEventArgs>('onHeaderClick', externalPubSub);\r\n    this.onHeaderContextMenu = new SlickEvent<OnHeaderContextMenuEventArgs>('onHeaderContextMenu', externalPubSub);\r\n    this.onHeaderMouseEnter = new SlickEvent<OnHeaderMouseEventArgs>('onHeaderMouseEnter', externalPubSub);\r\n    this.onHeaderMouseLeave = new SlickEvent<OnHeaderMouseEventArgs>('onHeaderMouseLeave', externalPubSub);\r\n    this.onHeaderRowCellRendered = new SlickEvent<OnHeaderRowCellRenderedEventArgs>('onHeaderRowCellRendered', externalPubSub);\r\n    this.onHeaderRowMouseEnter = new SlickEvent<OnHeaderMouseEventArgs>('onHeaderRowMouseEnter', externalPubSub);\r\n    this.onHeaderRowMouseLeave = new SlickEvent<OnHeaderMouseEventArgs>('onHeaderRowMouseLeave', externalPubSub);\r\n    this.onKeyDown = new SlickEvent<OnKeyDownEventArgs>('onKeyDown', externalPubSub);\r\n    this.onMouseEnter = new SlickEvent<OnHeaderMouseEventArgs>('onMouseEnter', externalPubSub);\r\n    this.onMouseLeave = new SlickEvent<OnHeaderMouseEventArgs>('onMouseLeave', externalPubSub);\r\n    this.onRendered = new SlickEvent<OnRenderedEventArgs>('onRendered', externalPubSub);\r\n    this.onScroll = new SlickEvent<OnScrollEventArgs>('onScroll', externalPubSub);\r\n    this.onSelectedRowsChanged = new SlickEvent<OnSelectedRowsChangedEventArgs>('onSelectedRowsChanged', externalPubSub);\r\n    this.onSetOptions = new SlickEvent<OnSetOptionsEventArgs>('onSetOptions', externalPubSub);\r\n    this.onActivateChangedOptions = new SlickEvent<OnActivateChangedOptionsEventArgs>('onActivateChangedOptions', externalPubSub);\r\n    this.onSort = new SlickEvent<SingleColumnSort | MultiColumnSort>('onSort', externalPubSub);\r\n    this.onValidationError = new SlickEvent<OnValidationErrorEventArgs>('onValidationError', externalPubSub);\r\n    this.onViewportChanged = new SlickEvent<{ grid: SlickGrid; }>('onViewportChanged', externalPubSub);\r\n\r\n    this.initialize(options);\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Initialization\r\n\r\n  /** Initializes the grid. */\r\n  init() {\r\n    this.finishInitialization();\r\n  }\r\n\r\n  /**\r\n   * Apply HTML code by 3 different ways depending on what is provided as input and what options are enabled.\r\n   * 1. value is an HTMLElement or DocumentFragment, then first empty the target and simply append the HTML to the target element.\r\n   * 2. value is string and `enableHtmlRendering` is enabled, then use `target.innerHTML = value;`\r\n   * 3. value is string and `enableHtmlRendering` is disabled, then use `target.textContent = value;`\r\n   * @param target - target element to apply to\r\n   * @param val - input value can be either a string or an HTMLElement\r\n   * @param options -\r\n   *   `emptyTarget`, defaults to true, will empty the target.\r\n   *   `skipEmptyReassignment`, defaults to true, when enabled it will not try to reapply an empty value when the target is already empty\r\n   */\r\n  applyHtmlCode(target: HTMLElement, val: string | HTMLElement | DocumentFragment, options?: { emptyTarget?: boolean; skipEmptyReassignment?: boolean; }) {\r\n    if (target) {\r\n      if (val instanceof HTMLElement || val instanceof DocumentFragment) {\r\n        // first empty target and then append new HTML element\r\n        const emptyTarget = options?.emptyTarget !== false;\r\n        if (emptyTarget) {\r\n          Utils.emptyElement(target);\r\n        }\r\n        target.appendChild(val);\r\n      } else {\r\n        // when it's already empty and we try to reassign empty, it's probably ok to skip the assignment\r\n        const skipEmptyReassignment = options?.skipEmptyReassignment !== false;\r\n        if (skipEmptyReassignment && !Utils.isDefined(val) && !target.innerHTML) {\r\n          return;\r\n        }\r\n\r\n        let sanitizedText = val;\r\n        if (typeof sanitizedText === 'number' || typeof sanitizedText === 'boolean') {\r\n          target.textContent = sanitizedText;\r\n        } else {\r\n          sanitizedText = this.sanitizeHtmlString(val as string);\r\n\r\n          // apply HTML when enableHtmlRendering is enabled but make sure we do have a value (without a value, it will simply use `textContent` to clear text content)\r\n          if (this._options.enableHtmlRendering && sanitizedText) {\r\n            target.innerHTML = sanitizedText;\r\n          } else {\r\n            target.textContent = sanitizedText;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  protected initialize(options: Partial<O>) {\r\n    // calculate these only once and share between grid instances\r\n    if (options?.mixinDefaults) {\r\n      // use provided options and then assign defaults\r\n      if (!this._options) { this._options = options as O; }\r\n      Utils.applyDefaults(this._options, this._defaults);\r\n    } else {\r\n      this._options = Utils.extend<O>(true, {}, this._defaults, options);\r\n    }\r\n    this.scrollThrottle = this.actionThrottle(this.render.bind(this), this._options.scrollRenderThrottling as number);\r\n    this.maxSupportedCssHeight = this.maxSupportedCssHeight || this.getMaxSupportedCssHeight();\r\n    this.validateAndEnforceOptions();\r\n    this._columnDefaults.width = this._options.defaultColumnWidth;\r\n\r\n    if (!this._options.suppressCssChangesOnHiddenInit) {\r\n      this.cacheCssForHiddenInit();\r\n    }\r\n\r\n    this.updateColumnProps();\r\n\r\n    // validate loaded JavaScript modules against requested options\r\n    if (this._options.enableColumnReorder && (!Sortable || !Sortable.create)) {\r\n      throw new Error('SlickGrid requires Sortable.js module to be loaded');\r\n    }\r\n\r\n    this.editController = {\r\n      commitCurrentEdit: this.commitCurrentEdit.bind(this),\r\n      cancelCurrentEdit: this.cancelCurrentEdit.bind(this),\r\n    };\r\n\r\n    Utils.emptyElement(this._container);\r\n    this._container.style.overflow = 'hidden';\r\n    this._container.style.outline = String(0);\r\n    this._container.classList.add(this.uid);\r\n    this._container.classList.add('ui-widget');\r\n    this._container.setAttribute('role', 'grid');\r\n\r\n    const containerStyles = window.getComputedStyle(this._container);\r\n    if (!(/relative|absolute|fixed/).test(containerStyles.position)) {\r\n      this._container.style.position = 'relative';\r\n    }\r\n\r\n    this._focusSink = Utils.createDomElement('div', { tabIndex: 0, style: { position: 'fixed', width: '0px', height: '0px', top: '0px', left: '0px', outline: '0px' } }, this._container);\r\n\r\n    // Containers used for scrolling frozen columns and rows\r\n    this._paneHeaderL = Utils.createDomElement('div', { className: 'slick-pane slick-pane-header slick-pane-left', tabIndex: 0 }, this._container);\r\n    this._paneHeaderR = Utils.createDomElement('div', { className: 'slick-pane slick-pane-header slick-pane-right', tabIndex: 0 }, this._container);\r\n    this._paneTopL = Utils.createDomElement('div', { className: 'slick-pane slick-pane-top slick-pane-left', tabIndex: 0 }, this._container);\r\n    this._paneTopR = Utils.createDomElement('div', { className: 'slick-pane slick-pane-top slick-pane-right', tabIndex: 0 }, this._container);\r\n    this._paneBottomL = Utils.createDomElement('div', { className: 'slick-pane slick-pane-bottom slick-pane-left', tabIndex: 0 }, this._container);\r\n    this._paneBottomR = Utils.createDomElement('div', { className: 'slick-pane slick-pane-bottom slick-pane-right', tabIndex: 0 }, this._container);\r\n\r\n    if (this._options.createPreHeaderPanel) {\r\n      this._preHeaderPanelScroller = Utils.createDomElement('div', { className: 'slick-preheader-panel ui-state-default slick-state-default', style: { overflow: 'hidden', position: 'relative' } }, this._paneHeaderL);\r\n      this._preHeaderPanelScroller.appendChild(document.createElement('div'));\r\n      this._preHeaderPanel = Utils.createDomElement('div', null, this._preHeaderPanelScroller);\r\n      this._preHeaderPanelSpacer = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._preHeaderPanelScroller);\r\n\r\n      this._preHeaderPanelScrollerR = Utils.createDomElement('div', { className: 'slick-preheader-panel ui-state-default slick-state-default', style: { overflow: 'hidden', position: 'relative' } }, this._paneHeaderR);\r\n      this._preHeaderPanelR = Utils.createDomElement('div', null, this._preHeaderPanelScrollerR);\r\n      this._preHeaderPanelSpacerR = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._preHeaderPanelScrollerR);\r\n\r\n      if (!this._options.showPreHeaderPanel) {\r\n        Utils.hide(this._preHeaderPanelScroller);\r\n        Utils.hide(this._preHeaderPanelScrollerR);\r\n      }\r\n    }\r\n\r\n    // Append the header scroller containers\r\n    this._headerScrollerL = Utils.createDomElement('div', { className: 'slick-header ui-state-default slick-state-default slick-header-left' }, this._paneHeaderL);\r\n    this._headerScrollerR = Utils.createDomElement('div', { className: 'slick-header ui-state-default slick-state-default slick-header-right' }, this._paneHeaderR);\r\n\r\n    // Cache the header scroller containers\r\n    this._headerScroller.push(this._headerScrollerL);\r\n    this._headerScroller.push(this._headerScrollerR);\r\n\r\n    // Append the columnn containers to the headers\r\n    this._headerL = Utils.createDomElement('div', { className: 'slick-header-columns slick-header-columns-left', role: 'row', style: { left: '-1000px' } }, this._headerScrollerL);\r\n    this._headerR = Utils.createDomElement('div', { className: 'slick-header-columns slick-header-columns-right', role: 'row', style: { left: '-1000px' } }, this._headerScrollerR);\r\n\r\n    // Cache the header columns\r\n    this._headers = [this._headerL, this._headerR];\r\n\r\n    this._headerRowScrollerL = Utils.createDomElement('div', { className: 'slick-headerrow ui-state-default slick-state-default' }, this._paneTopL);\r\n    this._headerRowScrollerR = Utils.createDomElement('div', { className: 'slick-headerrow ui-state-default slick-state-default' }, this._paneTopR);\r\n\r\n    this._headerRowScroller = [this._headerRowScrollerL, this._headerRowScrollerR];\r\n\r\n    this._headerRowSpacerL = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._headerRowScrollerL);\r\n    this._headerRowSpacerR = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._headerRowScrollerR);\r\n\r\n    this._headerRowL = Utils.createDomElement('div', { className: 'slick-headerrow-columns slick-headerrow-columns-left' }, this._headerRowScrollerL);\r\n    this._headerRowR = Utils.createDomElement('div', { className: 'slick-headerrow-columns slick-headerrow-columns-right' }, this._headerRowScrollerR);\r\n\r\n    this._headerRows = [this._headerRowL, this._headerRowR];\r\n\r\n    // Append the top panel scroller\r\n    this._topPanelScrollerL = Utils.createDomElement('div', { className: 'slick-top-panel-scroller ui-state-default slick-state-default' }, this._paneTopL);\r\n    this._topPanelScrollerR = Utils.createDomElement('div', { className: 'slick-top-panel-scroller ui-state-default slick-state-default' }, this._paneTopR);\r\n\r\n    this._topPanelScrollers = [this._topPanelScrollerL, this._topPanelScrollerR];\r\n\r\n    // Append the top panel\r\n    this._topPanelL = Utils.createDomElement('div', { className: 'slick-top-panel', style: { width: '10000px' } }, this._topPanelScrollerL);\r\n    this._topPanelR = Utils.createDomElement('div', { className: 'slick-top-panel', style: { width: '10000px' } }, this._topPanelScrollerR);\r\n\r\n    this._topPanels = [this._topPanelL, this._topPanelR];\r\n\r\n    if (!this._options.showColumnHeader) {\r\n      this._headerScroller.forEach((el) => {\r\n        Utils.hide(el);\r\n      });\r\n    }\r\n\r\n    if (!this._options.showTopPanel) {\r\n      this._topPanelScrollers.forEach((scroller) => {\r\n        Utils.hide(scroller);\r\n      });\r\n    }\r\n\r\n    if (!this._options.showHeaderRow) {\r\n      this._headerRowScroller.forEach((scroller) => {\r\n        Utils.hide(scroller);\r\n      });\r\n    }\r\n\r\n    // Append the viewport containers\r\n    this._viewportTopL = Utils.createDomElement('div', { className: 'slick-viewport slick-viewport-top slick-viewport-left', tabIndex: 0 }, this._paneTopL);\r\n    this._viewportTopR = Utils.createDomElement('div', { className: 'slick-viewport slick-viewport-top slick-viewport-right', tabIndex: 0 }, this._paneTopR);\r\n    this._viewportBottomL = Utils.createDomElement('div', { className: 'slick-viewport slick-viewport-bottom slick-viewport-left', tabIndex: 0 }, this._paneBottomL);\r\n    this._viewportBottomR = Utils.createDomElement('div', { className: 'slick-viewport slick-viewport-bottom slick-viewport-right', tabIndex: 0 }, this._paneBottomR);\r\n\r\n    // Cache the viewports\r\n    this._viewport = [this._viewportTopL, this._viewportTopR, this._viewportBottomL, this._viewportBottomR];\r\n    if (this._options.viewportClass) {\r\n      this._viewport.forEach((view) => {\r\n        view.classList.add(...Utils.classNameToList((this._options.viewportClass)));\r\n      });\r\n    }\r\n\r\n    // Default the active viewport to the top left\r\n    this._activeViewportNode = this._viewportTopL;\r\n\r\n    // Append the canvas containers\r\n    this._canvasTopL = Utils.createDomElement('div', { className: 'grid-canvas grid-canvas-top grid-canvas-left', tabIndex: 0 }, this._viewportTopL);\r\n    this._canvasTopR = Utils.createDomElement('div', { className: 'grid-canvas grid-canvas-top grid-canvas-right', tabIndex: 0 }, this._viewportTopR);\r\n    this._canvasBottomL = Utils.createDomElement('div', { className: 'grid-canvas grid-canvas-bottom grid-canvas-left', tabIndex: 0 }, this._viewportBottomL);\r\n    this._canvasBottomR = Utils.createDomElement('div', { className: 'grid-canvas grid-canvas-bottom grid-canvas-right', tabIndex: 0 }, this._viewportBottomR);\r\n\r\n    // Cache the canvases\r\n    this._canvas = [this._canvasTopL, this._canvasTopR, this._canvasBottomL, this._canvasBottomR];\r\n\r\n    this.scrollbarDimensions = this.scrollbarDimensions || this.measureScrollbar();\r\n\r\n    // Default the active canvas to the top left\r\n    this._activeCanvasNode = this._canvasTopL;\r\n\r\n    // pre-header\r\n    if (this._preHeaderPanelSpacer) {\r\n      Utils.width(this._preHeaderPanelSpacer, this.getCanvasWidth() + this.scrollbarDimensions.width);\r\n    }\r\n\r\n    this._headers.forEach((el) => {\r\n      Utils.width(el, this.getHeadersWidth());\r\n    });\r\n\r\n    Utils.width(this._headerRowSpacerL, this.getCanvasWidth() + this.scrollbarDimensions.width);\r\n    Utils.width(this._headerRowSpacerR, this.getCanvasWidth() + this.scrollbarDimensions.width);\r\n\r\n    // footer Row\r\n    if (this._options.createFooterRow) {\r\n      this._footerRowScrollerR = Utils.createDomElement('div', { className: 'slick-footerrow ui-state-default slick-state-default' }, this._paneTopR);\r\n      this._footerRowScrollerL = Utils.createDomElement('div', { className: 'slick-footerrow ui-state-default slick-state-default' }, this._paneTopL);\r\n\r\n      this._footerRowScroller = [this._footerRowScrollerL, this._footerRowScrollerR];\r\n\r\n      this._footerRowSpacerL = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._footerRowScrollerL);\r\n      Utils.width(this._footerRowSpacerL, this.getCanvasWidth() + this.scrollbarDimensions.width);\r\n      this._footerRowSpacerR = Utils.createDomElement('div', { style: { display: 'block', height: '1px', position: 'absolute', top: '0px', left: '0px' } }, this._footerRowScrollerR);\r\n      Utils.width(this._footerRowSpacerR, this.getCanvasWidth() + this.scrollbarDimensions.width);\r\n\r\n      this._footerRowL = Utils.createDomElement('div', { className: 'slick-footerrow-columns slick-footerrow-columns-left' }, this._footerRowScrollerL);\r\n      this._footerRowR = Utils.createDomElement('div', { className: 'slick-footerrow-columns slick-footerrow-columns-right' }, this._footerRowScrollerR);\r\n\r\n      this._footerRow = [this._footerRowL, this._footerRowR];\r\n\r\n      if (!this._options.showFooterRow) {\r\n        this._footerRowScroller.forEach((scroller) => {\r\n          Utils.hide(scroller);\r\n        });\r\n      }\r\n    }\r\n\r\n    this._focusSink2 = this._focusSink.cloneNode(true) as HTMLDivElement;\r\n    this._container.appendChild(this._focusSink2);\r\n\r\n    if (!this._options.explicitInitialization) {\r\n      this.finishInitialization();\r\n    }\r\n  }\r\n\r\n  protected finishInitialization() {\r\n    if (!this.initialized) {\r\n      this.initialized = true;\r\n\r\n      this.getViewportWidth();\r\n      this.getViewportHeight();\r\n\r\n      // header columns and cells may have different padding/border skewing width calculations (box-sizing, hello?)\r\n      // calculate the diff so we can set consistent sizes\r\n      this.measureCellPaddingAndBorder();\r\n\r\n      // for usability reasons, all text selection in SlickGrid is disabled\r\n      // with the exception of input and textarea elements (selection must\r\n      // be enabled there so that editors work as expected); note that\r\n      // selection in grid cells (grid body) is already unavailable in\r\n      // all browsers except IE\r\n      this.disableSelection(this._headers); // disable all text selection in header (including input and textarea)\r\n\r\n      if (!this._options.enableTextSelectionOnCells) {\r\n        // disable text selection in grid cells except in input and textarea elements\r\n        // (this is IE-specific, because selectstart event will only fire in IE)\r\n        this._viewport.forEach((view) => {\r\n          this._bindingEventService.bind(view, 'selectstart', (event) => {\r\n            if (event.target instanceof HTMLInputElement || event.target instanceof HTMLTextAreaElement) {\r\n              return;\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      this.setFrozenOptions();\r\n      this.setPaneVisibility();\r\n      this.setScroller();\r\n      this.setOverflow();\r\n\r\n      this.updateColumnCaches();\r\n      this.createColumnHeaders();\r\n      this.createColumnFooter();\r\n      this.setupColumnSort();\r\n      this.createCssRules();\r\n      this.resizeCanvas();\r\n      this.bindAncestorScrollEvents();\r\n\r\n      this._bindingEventService.bind(this._container, 'resize', this.resizeCanvas.bind(this));\r\n      this._viewport.forEach((view) => {\r\n        this._bindingEventService.bind(view, 'scroll', this.handleScroll.bind(this));\r\n      });\r\n\r\n      if (this._options.enableMouseWheelScrollHandler) {\r\n        this._viewport.forEach((view) => {\r\n          this.slickMouseWheelInstances.push(MouseWheel({\r\n            element: view,\r\n            onMouseWheel: this.handleMouseWheel.bind(this)\r\n          }));\r\n        });\r\n      }\r\n\r\n      this._headerScroller.forEach((el) => {\r\n        this._bindingEventService.bind(el, 'contextmenu', this.handleHeaderContextMenu.bind(this) as EventListener);\r\n        this._bindingEventService.bind(el, 'click', this.handleHeaderClick.bind(this) as EventListener);\r\n      });\r\n\r\n      this._headerRowScroller.forEach((scroller) => {\r\n        this._bindingEventService.bind(scroller, 'scroll', this.handleHeaderRowScroll.bind(this) as EventListener);\r\n      });\r\n\r\n      if (this._options.createFooterRow) {\r\n        this._footerRow.forEach((footer) => {\r\n          this._bindingEventService.bind(footer, 'contextmenu', this.handleFooterContextMenu.bind(this) as EventListener);\r\n          this._bindingEventService.bind(footer, 'click', this.handleFooterClick.bind(this) as EventListener);\r\n        });\r\n\r\n        this._footerRowScroller.forEach((scroller) => {\r\n          this._bindingEventService.bind(scroller, 'scroll', this.handleFooterRowScroll.bind(this) as EventListener);\r\n        });\r\n      }\r\n\r\n      if (this._options.createPreHeaderPanel) {\r\n        this._bindingEventService.bind(this._preHeaderPanelScroller, 'scroll', this.handlePreHeaderPanelScroll.bind(this) as EventListener);\r\n      }\r\n\r\n      this._bindingEventService.bind(this._focusSink, 'keydown', this.handleKeyDown.bind(this) as EventListener);\r\n      this._bindingEventService.bind(this._focusSink2, 'keydown', this.handleKeyDown.bind(this) as EventListener);\r\n\r\n      this._canvas.forEach((element) => {\r\n        this._bindingEventService.bind(element, 'keydown', this.handleKeyDown.bind(this) as EventListener);\r\n        this._bindingEventService.bind(element, 'click', this.handleClick.bind(this) as EventListener);\r\n        this._bindingEventService.bind(element, 'dblclick', this.handleDblClick.bind(this) as EventListener);\r\n        this._bindingEventService.bind(element, 'contextmenu', this.handleContextMenu.bind(this) as EventListener);\r\n        this._bindingEventService.bind(element, 'mouseover', this.handleCellMouseOver.bind(this) as EventListener);\r\n        this._bindingEventService.bind(element, 'mouseout', this.handleCellMouseOut.bind(this) as EventListener);\r\n      });\r\n\r\n      if (Draggable) {\r\n        this.slickDraggableInstance = Draggable({\r\n          containerElement: this._container,\r\n          allowDragFrom: 'div.slick-cell',\r\n          // the slick cell parent must always contain `.dnd` and/or `.cell-reorder` class to be identified as draggable\r\n          allowDragFromClosest: 'div.slick-cell.dnd, div.slick-cell.cell-reorder',\r\n          onDragInit: this.handleDragInit.bind(this),\r\n          onDragStart: this.handleDragStart.bind(this),\r\n          onDrag: this.handleDrag.bind(this),\r\n          onDragEnd: this.handleDragEnd.bind(this)\r\n        });\r\n      }\r\n\r\n      if (!this._options.suppressCssChangesOnHiddenInit) {\r\n        this.restoreCssFromHiddenInit();\r\n      }\r\n    }\r\n  }\r\n\r\n  /** handles \"display:none\" on container or container parents, related to issue: https://github.com/6pac/SlickGrid/issues/568 */\r\n  cacheCssForHiddenInit() {\r\n    this._hiddenParents = Utils.parents(this._container, ':hidden') as HTMLElement[];\r\n    this._hiddenParents.forEach(el => {\r\n      const old: Partial<CSSStyleDeclaration> = {};\r\n      Object.keys(this.cssShow).forEach(name => {\r\n        if (this.cssShow) {\r\n          old[name as any] = el.style[name as 'position' | 'visibility' | 'display'];\r\n          el.style[name as any] = this.cssShow[name as 'position' | 'visibility' | 'display'];\r\n        }\r\n      });\r\n      this.oldProps.push(old);\r\n    });\r\n  }\r\n\r\n  restoreCssFromHiddenInit() {\r\n    // finish handle display:none on container or container parents\r\n    // - put values back the way they were\r\n    let i = 0;\r\n    if (this._hiddenParents) {\r\n      this._hiddenParents.forEach(el => {\r\n        const old = this.oldProps[i++];\r\n        Object.keys(this.cssShow).forEach(name => {\r\n          if (this.cssShow) {\r\n            el.style[name as CSSStyleDeclarationWritable] = (old as any)[name];\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  protected hasFrozenColumns() {\r\n    return this._options.frozenColumn! > -1;\r\n  }\r\n\r\n  /** Register an external Plugin */\r\n  registerPlugin<T extends SlickPlugin>(plugin: T) {\r\n    this.plugins.unshift(plugin);\r\n    plugin.init(this as unknown as SlickGridModel);\r\n  }\r\n\r\n  /** Unregister (destroy) an external Plugin */\r\n  unregisterPlugin(plugin: SlickPlugin) {\r\n    for (let i = this.plugins.length; i >= 0; i--) {\r\n      if (this.plugins[i] === plugin) {\r\n        this.plugins[i]?.destroy();\r\n        this.plugins.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Get a Plugin (addon) by its name */\r\n  getPluginByName<P extends SlickPlugin | undefined = undefined>(name: string) {\r\n    for (let i = this.plugins.length - 1; i >= 0; i--) {\r\n      if (this.plugins[i]?.pluginName === name) {\r\n        return this.plugins[i] as P;\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  /**\r\n   * Unregisters a current selection model and registers a new one. See the definition of SelectionModel for more information.\r\n   * @param {Object} selectionModel A SelectionModel.\r\n   */\r\n  setSelectionModel(model: SelectionModel) {\r\n    if (this.selectionModel) {\r\n      this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this));\r\n      if (this.selectionModel.destroy) {\r\n        this.selectionModel.destroy();\r\n      }\r\n    }\r\n\r\n    this.selectionModel = model;\r\n    if (this.selectionModel) {\r\n      this.selectionModel.init(this as unknown as SlickGridModel);\r\n      this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this));\r\n    }\r\n  }\r\n\r\n  /** Returns the current SelectionModel. See here for more information about SelectionModels. */\r\n  getSelectionModel() {\r\n    return this.selectionModel;\r\n  }\r\n\r\n  /** Get Grid Canvas Node DOM Element */\r\n  getCanvasNode(columnIdOrIdx?: number | string, rowIndex?: number) {\r\n    return this._getContainerElement(this.getCanvases(), columnIdOrIdx, rowIndex) as HTMLDivElement;\r\n  }\r\n\r\n  /** Get the canvas DOM element */\r\n  getActiveCanvasNode(e?: Event | SlickEventData_) {\r\n    if (e === undefined) {\r\n      return this._activeCanvasNode;\r\n    }\r\n\r\n    if (e instanceof SlickEventData) {\r\n      e = e.getNativeEvent<Event>();\r\n    }\r\n\r\n    this._activeCanvasNode = (e as any)?.target.closest('.grid-canvas');\r\n    return this._activeCanvasNode;\r\n  }\r\n\r\n  /** Get the canvas DOM element */\r\n  getCanvases() {\r\n    return this._canvas;\r\n  }\r\n\r\n  /** Get the Viewport DOM node element */\r\n  getViewportNode(columnIdOrIdx?: number | string, rowIndex?: number) {\r\n    return this._getContainerElement(this.getViewports(), columnIdOrIdx, rowIndex);\r\n  }\r\n\r\n  /** Get all the Viewport node elements */\r\n  getViewports() {\r\n    return this._viewport;\r\n  }\r\n\r\n  getActiveViewportNode(e: Event | SlickEventData_) {\r\n    this.setActiveViewportNode(e);\r\n\r\n    return this._activeViewportNode;\r\n  }\r\n\r\n  /** Sets an active viewport node */\r\n  setActiveViewportNode(e: Event | SlickEventData_) {\r\n    if (e instanceof SlickEventData) {\r\n      e = e.getNativeEvent<Event>();\r\n    }\r\n    this._activeViewportNode = (e as any)?.target.closest('.slick-viewport');\r\n    return this._activeViewportNode;\r\n  }\r\n\r\n  protected _getContainerElement(targetContainers: HTMLElement[], columnIdOrIdx?: number | string, rowIndex?: number) {\r\n    if (!targetContainers) { return; }\r\n    if (!columnIdOrIdx) { columnIdOrIdx = 0; }\r\n    if (!rowIndex) { rowIndex = 0; }\r\n\r\n    const idx = (typeof columnIdOrIdx === 'number' ? columnIdOrIdx : this.getColumnIndex(columnIdOrIdx));\r\n\r\n    const isBottomSide = this.hasFrozenRows && rowIndex >= this.actualFrozenRow + (this._options.frozenBottom ? 0 : 1);\r\n    const isRightSide = this.hasFrozenColumns() && idx > this._options.frozenColumn!;\r\n\r\n    return targetContainers[(isBottomSide ? 2 : 0) + (isRightSide ? 1 : 0)];\r\n  }\r\n\r\n  protected measureScrollbar() {\r\n    let className = '';\r\n    this._viewport.forEach(v => className += v.className);\r\n    const outerdiv = Utils.createDomElement('div', { className, style: { position: 'absolute', top: '-10000px', left: '-10000px', overflow: 'auto', width: '100px', height: '100px' } }, document.body);\r\n    const innerdiv = Utils.createDomElement('div', { style: { width: '200px', height: '200px', overflow: 'auto' } }, outerdiv);\r\n    const dim = {\r\n      width: outerdiv.offsetWidth - outerdiv.clientWidth,\r\n      height: outerdiv.offsetHeight - outerdiv.clientHeight\r\n    };\r\n    innerdiv.remove();\r\n    outerdiv.remove();\r\n    return dim;\r\n  }\r\n\r\n  /** Get the headers width in pixel */\r\n  getHeadersWidth() {\r\n    this.headersWidth = this.headersWidthL = this.headersWidthR = 0;\r\n    const includeScrollbar = !this._options.autoHeight;\r\n\r\n    let i = 0;\r\n    const ii = this.columns.length;\r\n    for (i = 0; i < ii; i++) {\r\n      if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n      const width = this.columns[i].width;\r\n\r\n      if ((this._options.frozenColumn!) > -1 && (i > this._options.frozenColumn!)) {\r\n        this.headersWidthR += width || 0;\r\n      } else {\r\n        this.headersWidthL += width || 0;\r\n      }\r\n    }\r\n\r\n    if (includeScrollbar) {\r\n      if ((this._options.frozenColumn!) > -1 && (i > this._options.frozenColumn!)) {\r\n        this.headersWidthR += this.scrollbarDimensions?.width ?? 0;\r\n      } else {\r\n        this.headersWidthL += this.scrollbarDimensions?.width ?? 0;\r\n      }\r\n    }\r\n\r\n    if (this.hasFrozenColumns()) {\r\n      this.headersWidthL = this.headersWidthL + 1000;\r\n\r\n      this.headersWidthR = Math.max(this.headersWidthR, this.viewportW) + this.headersWidthL;\r\n      this.headersWidthR += this.scrollbarDimensions?.width ?? 0;\r\n    } else {\r\n      this.headersWidthL += this.scrollbarDimensions?.width ?? 0;\r\n      this.headersWidthL = Math.max(this.headersWidthL, this.viewportW) + 1000;\r\n    }\r\n\r\n    this.headersWidth = this.headersWidthL + this.headersWidthR;\r\n    return Math.max(this.headersWidth, this.viewportW) + 1000;\r\n  }\r\n\r\n  /** Get the grid canvas width */\r\n  getCanvasWidth(): number {\r\n    const availableWidth = this.viewportHasVScroll ? this.viewportW - (this.scrollbarDimensions?.width ?? 0) : this.viewportW;\r\n    let i = this.columns.length;\r\n\r\n    this.canvasWidthL = this.canvasWidthR = 0;\r\n\r\n    while (i--) {\r\n      if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n      if (this.hasFrozenColumns() && (i > this._options.frozenColumn!)) {\r\n        this.canvasWidthR += this.columns[i].width || 0;\r\n      } else {\r\n        this.canvasWidthL += this.columns[i].width || 0;\r\n      }\r\n    }\r\n    let totalRowWidth = this.canvasWidthL + this.canvasWidthR;\r\n    if (this._options.fullWidthRows) {\r\n      const extraWidth = Math.max(totalRowWidth, availableWidth) - totalRowWidth;\r\n      if (extraWidth > 0) {\r\n        totalRowWidth += extraWidth;\r\n        if (this.hasFrozenColumns()) {\r\n          this.canvasWidthR += extraWidth;\r\n        } else {\r\n          this.canvasWidthL += extraWidth;\r\n        }\r\n      }\r\n    }\r\n    return totalRowWidth;\r\n  }\r\n\r\n  protected updateCanvasWidth(forceColumnWidthsUpdate?: boolean) {\r\n    const oldCanvasWidth = this.canvasWidth;\r\n    const oldCanvasWidthL = this.canvasWidthL;\r\n    const oldCanvasWidthR = this.canvasWidthR;\r\n    this.canvasWidth = this.getCanvasWidth();\r\n\r\n    const widthChanged = this.canvasWidth !== oldCanvasWidth || this.canvasWidthL !== oldCanvasWidthL || this.canvasWidthR !== oldCanvasWidthR;\r\n\r\n    if (widthChanged || this.hasFrozenColumns() || this.hasFrozenRows) {\r\n      Utils.width(this._canvasTopL, this.canvasWidthL);\r\n\r\n      this.getHeadersWidth();\r\n\r\n      Utils.width(this._headerL, this.headersWidthL);\r\n      Utils.width(this._headerR, this.headersWidthR);\r\n\r\n      if (this.hasFrozenColumns()) {\r\n        const cWidth = Utils.width(this._container) || 0;\r\n        if (cWidth > 0 && this.canvasWidthL > cWidth && this._options.throwWhenFrozenNotAllViewable) {\r\n          throw new Error('[SlickGrid] Frozen columns cannot be wider than the actual grid container width. '\r\n            + 'Make sure to have less columns freezed or make your grid container wider');\r\n        }\r\n        Utils.width(this._canvasTopR, this.canvasWidthR);\r\n\r\n        Utils.width(this._paneHeaderL, this.canvasWidthL);\r\n        Utils.setStyleSize(this._paneHeaderR, 'left', this.canvasWidthL);\r\n        Utils.setStyleSize(this._paneHeaderR, 'width', this.viewportW - this.canvasWidthL);\r\n\r\n        Utils.width(this._paneTopL, this.canvasWidthL);\r\n        Utils.setStyleSize(this._paneTopR, 'left', this.canvasWidthL);\r\n        Utils.width(this._paneTopR, this.viewportW - this.canvasWidthL);\r\n\r\n        Utils.width(this._headerRowScrollerL, this.canvasWidthL);\r\n        Utils.width(this._headerRowScrollerR, this.viewportW - this.canvasWidthL);\r\n\r\n        Utils.width(this._headerRowL, this.canvasWidthL);\r\n        Utils.width(this._headerRowR, this.canvasWidthR);\r\n\r\n        if (this._options.createFooterRow) {\r\n          Utils.width(this._footerRowScrollerL, this.canvasWidthL);\r\n          Utils.width(this._footerRowScrollerR, this.viewportW - this.canvasWidthL);\r\n\r\n          Utils.width(this._footerRowL, this.canvasWidthL);\r\n          Utils.width(this._footerRowR, this.canvasWidthR);\r\n        }\r\n        if (this._options.createPreHeaderPanel) {\r\n          Utils.width(this._preHeaderPanel, this.canvasWidth);\r\n        }\r\n        Utils.width(this._viewportTopL, this.canvasWidthL);\r\n        Utils.width(this._viewportTopR, this.viewportW - this.canvasWidthL);\r\n\r\n        if (this.hasFrozenRows) {\r\n          Utils.width(this._paneBottomL, this.canvasWidthL);\r\n          Utils.setStyleSize(this._paneBottomR, 'left', this.canvasWidthL);\r\n\r\n          Utils.width(this._viewportBottomL, this.canvasWidthL);\r\n          Utils.width(this._viewportBottomR, this.viewportW - this.canvasWidthL);\r\n\r\n          Utils.width(this._canvasBottomL, this.canvasWidthL);\r\n          Utils.width(this._canvasBottomR, this.canvasWidthR);\r\n        }\r\n      } else {\r\n        Utils.width(this._paneHeaderL, '100%');\r\n        Utils.width(this._paneTopL, '100%');\r\n        Utils.width(this._headerRowScrollerL, '100%');\r\n        Utils.width(this._headerRowL, this.canvasWidth);\r\n\r\n        if (this._options.createFooterRow) {\r\n          Utils.width(this._footerRowScrollerL, '100%');\r\n          Utils.width(this._footerRowL, this.canvasWidth);\r\n        }\r\n\r\n        if (this._options.createPreHeaderPanel) {\r\n          Utils.width(this._preHeaderPanel, this.canvasWidth);\r\n        }\r\n        Utils.width(this._viewportTopL, '100%');\r\n\r\n        if (this.hasFrozenRows) {\r\n          Utils.width(this._viewportBottomL, '100%');\r\n          Utils.width(this._canvasBottomL, this.canvasWidthL);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.viewportHasHScroll = (this.canvasWidth >= this.viewportW - (this.scrollbarDimensions?.width ?? 0));\r\n\r\n    Utils.width(this._headerRowSpacerL, this.canvasWidth + (this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0));\r\n    Utils.width(this._headerRowSpacerR, this.canvasWidth + (this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0));\r\n\r\n    if (this._options.createFooterRow) {\r\n      Utils.width(this._footerRowSpacerL, this.canvasWidth + (this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0));\r\n      Utils.width(this._footerRowSpacerR, this.canvasWidth + (this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0));\r\n    }\r\n\r\n    if (widthChanged || forceColumnWidthsUpdate) {\r\n      this.applyColumnWidths();\r\n    }\r\n  }\r\n\r\n  protected disableSelection(target: HTMLElement[]) {\r\n    target.forEach((el) => {\r\n      el.setAttribute('unselectable', 'on');\r\n      (el.style as any).mozUserSelect = 'none';\r\n      this._bindingEventService.bind(el, 'selectstart', () => false);\r\n    });\r\n  }\r\n\r\n  protected getMaxSupportedCssHeight() {\r\n    let supportedHeight = 1000000;\r\n    // FF reports the height back but still renders blank after ~6M px\r\n    // let testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? 6000000 : 1000000000;\r\n    const testUpTo = navigator.userAgent.toLowerCase().match(/firefox/) ? this._options.ffMaxSupportedCssHeight : this._options.maxSupportedCssHeight;\r\n    const div = Utils.createDomElement('div', { style: { display: 'hidden' } }, document.body);\r\n\r\n    while (true) {\r\n      const test = supportedHeight * 2;\r\n      Utils.height(div, test);\r\n      const height = Utils.height(div);\r\n\r\n      if (test > testUpTo! || height !== test) {\r\n        break;\r\n      } else {\r\n        supportedHeight = test;\r\n      }\r\n    }\r\n\r\n    div.remove();\r\n    return supportedHeight;\r\n  }\r\n\r\n  /** Get grid unique identifier */\r\n  getUID() {\r\n    return this.uid;\r\n  }\r\n\r\n  /** Get Header Column Width Difference in pixel */\r\n  getHeaderColumnWidthDiff() {\r\n    return this.headerColumnWidthDiff;\r\n  }\r\n\r\n  /** Get scrollbar dimensions */\r\n  getScrollbarDimensions() {\r\n    return this.scrollbarDimensions;\r\n  }\r\n\r\n  /** Get the displayed scrollbar dimensions */\r\n  getDisplayedScrollbarDimensions() {\r\n    return {\r\n      width: this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0,\r\n      height: this.viewportHasHScroll ? (this.scrollbarDimensions?.height ?? 0) : 0\r\n    };\r\n  }\r\n\r\n  /** Get the absolute column minimum width */\r\n  getAbsoluteColumnMinWidth(): number {\r\n    return this.absoluteColumnMinWidth;\r\n  }\r\n\r\n  getPubSubService(): BasePubSub | undefined {\r\n    return this._pubSubService;\r\n  }\r\n\r\n  // TODO:  this is static.  need to handle page mutation.\r\n  protected bindAncestorScrollEvents() {\r\n    let elem: HTMLElement | null = (this.hasFrozenRows && !this._options.frozenBottom) ? this._canvasBottomL : this._canvasTopL;\r\n    while ((elem = elem!.parentNode as HTMLElement) !== document.body && elem) {\r\n      // bind to scroll containers only\r\n      if (elem === this._viewportTopL || elem.scrollWidth !== elem.clientWidth || elem.scrollHeight !== elem.clientHeight) {\r\n        this._boundAncestors.push(elem);\r\n        this._bindingEventService.bind(elem, 'scroll', this.handleActiveCellPositionChange.bind(this));\r\n      }\r\n    }\r\n  }\r\n\r\n  protected unbindAncestorScrollEvents() {\r\n    this._boundAncestors.forEach((ancestor) => {\r\n      this._bindingEventService.unbindByEventName(ancestor, 'scroll');\r\n    });\r\n    this._boundAncestors = [];\r\n  }\r\n\r\n  /**\r\n   * Updates an existing column definition and a corresponding header DOM element with the new title and tooltip.\r\n   * @param {Number|String} columnId Column id.\r\n   * @param {string | HTMLElement | DocumentFragment} [title] New column name.\r\n   * @param {String} [toolTip] New column tooltip.\r\n   */\r\n  updateColumnHeader(columnId: number | string, title?: string | HTMLElement | DocumentFragment, toolTip?: string) {\r\n    if (this.initialized) {\r\n      const idx = this.getColumnIndex(columnId);\r\n      if (!Utils.isDefined(idx)) {\r\n        return;\r\n      }\r\n\r\n      const columnDef = this.columns[idx];\r\n      const header: HTMLElement | undefined = this.getColumnByIndex(idx);\r\n      if (header) {\r\n        if (title !== undefined) {\r\n          this.columns[idx].name = title;\r\n        }\r\n        if (toolTip !== undefined) {\r\n          this.columns[idx].toolTip = toolTip;\r\n        }\r\n\r\n        this.trigger(this.onBeforeHeaderCellDestroy, {\r\n          node: header,\r\n          column: columnDef,\r\n          grid: this\r\n        });\r\n\r\n        header.setAttribute('title', toolTip || '');\r\n        if (title !== undefined) {\r\n          this.applyHtmlCode(header.children[0] as HTMLElement, title);\r\n        }\r\n\r\n        this.trigger(this.onHeaderCellRendered, {\r\n          node: header,\r\n          column: columnDef,\r\n          grid: this\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the Header DOM element\r\n   * @param {C} columnDef - column definition\r\n   */\r\n  getHeader(columnDef: C) {\r\n    if (!columnDef) {\r\n      return this.hasFrozenColumns() ? this._headers : this._headerL;\r\n    }\r\n    const idx = this.getColumnIndex(columnDef.id);\r\n    return this.hasFrozenColumns() ? ((idx <= this._options.frozenColumn!) ? this._headerL : this._headerR) : this._headerL;\r\n  }\r\n\r\n  /**\r\n   * Get a specific Header Column DOM element by its column Id or index\r\n   * @param {Number|String} columnIdOrIdx - column Id or index\r\n   */\r\n  getHeaderColumn(columnIdOrIdx: number | string) {\r\n    const idx = (typeof columnIdOrIdx === 'number' ? columnIdOrIdx : this.getColumnIndex(columnIdOrIdx));\r\n    const targetHeader = this.hasFrozenColumns() ? ((idx <= this._options.frozenColumn!) ? this._headerL : this._headerR) : this._headerL;\r\n    const targetIndex = this.hasFrozenColumns() ? ((idx <= this._options.frozenColumn!) ? idx : idx - this._options.frozenColumn! - 1) : idx;\r\n\r\n    return targetHeader.children[targetIndex] as HTMLDivElement;\r\n  }\r\n\r\n  /** Get the Header Row DOM element */\r\n  getHeaderRow() {\r\n    return this.hasFrozenColumns() ? this._headerRows : this._headerRows[0];\r\n  }\r\n\r\n  /** Get the Footer DOM element */\r\n  getFooterRow() {\r\n    return this.hasFrozenColumns() ? this._footerRow : this._footerRow[0];\r\n  }\r\n\r\n  /** @alias `getPreHeaderPanelLeft` */\r\n  getPreHeaderPanel() {\r\n    return this._preHeaderPanel;\r\n  }\r\n\r\n  /** Get the Pre-Header Panel Left DOM node element */\r\n  getPreHeaderPanelLeft() {\r\n    return this._preHeaderPanel;\r\n  }\r\n\r\n  /** Get the Pre-Header Panel Right DOM node element */\r\n  getPreHeaderPanelRight() {\r\n    return this._preHeaderPanelR;\r\n  }\r\n\r\n  /**\r\n   * Get Header Row Column DOM element by its column Id or index\r\n   * @param {Number|String} columnIdOrIdx - column Id or index\r\n   */\r\n  getHeaderRowColumn(columnIdOrIdx: number | string) {\r\n    let idx = (typeof columnIdOrIdx === 'number' ? columnIdOrIdx : this.getColumnIndex(columnIdOrIdx));\r\n    let headerRowTarget: HTMLDivElement;\r\n\r\n    if (this.hasFrozenColumns()) {\r\n      if (idx <= this._options.frozenColumn!) {\r\n        headerRowTarget = this._headerRowL;\r\n      } else {\r\n        headerRowTarget = this._headerRowR;\r\n        idx -= this._options.frozenColumn! + 1;\r\n      }\r\n    } else {\r\n      headerRowTarget = this._headerRowL;\r\n    }\r\n\r\n    return headerRowTarget.children[idx] as HTMLDivElement;\r\n  }\r\n\r\n  /**\r\n   * Get the Footer Row Column DOM element by its column Id or index\r\n   * @param {Number|String} columnIdOrIdx - column Id or index\r\n   */\r\n  getFooterRowColumn(columnIdOrIdx: number | string) {\r\n    let idx = (typeof columnIdOrIdx === 'number' ? columnIdOrIdx : this.getColumnIndex(columnIdOrIdx));\r\n    let footerRowTarget: HTMLDivElement;\r\n\r\n    if (this.hasFrozenColumns()) {\r\n      if (idx <= this._options.frozenColumn!) {\r\n        footerRowTarget = this._footerRowL;\r\n      } else {\r\n        footerRowTarget = this._footerRowR;\r\n\r\n        idx -= this._options.frozenColumn! + 1;\r\n      }\r\n    } else {\r\n      footerRowTarget = this._footerRowL;\r\n    }\r\n\r\n    return footerRowTarget.children[idx] as HTMLDivElement;\r\n  }\r\n\r\n  protected createColumnFooter() {\r\n    if (this._options.createFooterRow) {\r\n      this._footerRow.forEach((footer) => {\r\n        const columnElements = footer.querySelectorAll('.slick-footerrow-column');\r\n        columnElements.forEach((column) => {\r\n          const columnDef = Utils.storage.get(column, 'column');\r\n          this.trigger(this.onBeforeFooterRowCellDestroy, {\r\n            node: column,\r\n            column: columnDef,\r\n            grid: this\r\n          });\r\n        });\r\n      });\r\n\r\n      Utils.emptyElement(this._footerRowL);\r\n      Utils.emptyElement(this._footerRowR);\r\n\r\n      for (let i = 0; i < this.columns.length; i++) {\r\n        const m = this.columns[i];\r\n        if (!m || m.hidden) { continue; }\r\n\r\n        const footerRowCell = Utils.createDomElement('div', { className: `ui-state-default slick-state-default slick-footerrow-column l${i} r${i}` }, this.hasFrozenColumns() && (i > this._options.frozenColumn!) ? this._footerRowR : this._footerRowL);\r\n        const className = this.hasFrozenColumns() && i <= this._options.frozenColumn! ? 'frozen' : null;\r\n        if (className) {\r\n          footerRowCell.classList.add(className);\r\n        }\r\n\r\n        Utils.storage.put(footerRowCell, 'column', m);\r\n\r\n        this.trigger(this.onFooterRowCellRendered, {\r\n          node: footerRowCell,\r\n          column: m,\r\n          grid: this\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  protected handleHeaderMouseHoverOn(e: Event | SlickEventData_) {\r\n    (e as any)?.target.classList.add('ui-state-hover', 'slick-state-hover');\r\n  }\r\n\r\n  protected handleHeaderMouseHoverOff(e: Event | SlickEventData_) {\r\n    (e as any)?.target.classList.remove('ui-state-hover', 'slick-state-hover');\r\n  }\r\n\r\n  protected createColumnHeaders() {\r\n    this._headers.forEach((header) => {\r\n      const columnElements = header.querySelectorAll('.slick-header-column');\r\n      columnElements.forEach((column) => {\r\n        const columnDef = Utils.storage.get(column, 'column');\r\n        if (columnDef) {\r\n          this.trigger(this.onBeforeHeaderCellDestroy, {\r\n            node: column,\r\n            column: columnDef,\r\n            grid: this\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    Utils.emptyElement(this._headerL);\r\n    Utils.emptyElement(this._headerR);\r\n\r\n    this.getHeadersWidth();\r\n\r\n    Utils.width(this._headerL, this.headersWidthL);\r\n    Utils.width(this._headerR, this.headersWidthR);\r\n\r\n    this._headerRows.forEach((row) => {\r\n      const columnElements = row.querySelectorAll('.slick-headerrow-column');\r\n      columnElements.forEach((column) => {\r\n        const columnDef = Utils.storage.get(column, 'column');\r\n        if (columnDef) {\r\n          this.trigger(this.onBeforeHeaderRowCellDestroy, {\r\n            node: this,\r\n            column: columnDef,\r\n            grid: this\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    Utils.emptyElement(this._headerRowL);\r\n    Utils.emptyElement(this._headerRowR);\r\n\r\n    if (this._options.createFooterRow) {\r\n      const footerRowLColumnElements = this._footerRowL.querySelectorAll('.slick-footerrow-column');\r\n      footerRowLColumnElements.forEach((column) => {\r\n        const columnDef = Utils.storage.get(column, 'column');\r\n        if (columnDef) {\r\n          this.trigger(this.onBeforeFooterRowCellDestroy, {\r\n            node: this,\r\n            column: columnDef,\r\n            grid: this\r\n          });\r\n        }\r\n      });\r\n      Utils.emptyElement(this._footerRowL);\r\n\r\n      if (this.hasFrozenColumns()) {\r\n        const footerRowRColumnElements = this._footerRowR.querySelectorAll('.slick-footerrow-column');\r\n        footerRowRColumnElements.forEach((column) => {\r\n          const columnDef = Utils.storage.get(column, 'column');\r\n          if (columnDef) {\r\n            this.trigger(this.onBeforeFooterRowCellDestroy, {\r\n              node: this,\r\n              column: columnDef,\r\n              grid: this\r\n            });\r\n          }\r\n        });\r\n        Utils.emptyElement(this._footerRowR);\r\n      }\r\n    }\r\n\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      const m: C = this.columns[i];\r\n      if (m.hidden) { continue; }\r\n\r\n      const headerTarget = this.hasFrozenColumns() ? ((i <= this._options.frozenColumn!) ? this._headerL : this._headerR) : this._headerL;\r\n      const headerRowTarget = this.hasFrozenColumns() ? ((i <= this._options.frozenColumn!) ? this._headerRowL : this._headerRowR) : this._headerRowL;\r\n\r\n      const header = Utils.createDomElement('div', { id: `${this.uid + m.id}`, dataset: { id: String(m.id) }, role: 'columnheader', className: 'ui-state-default slick-state-default slick-header-column' }, headerTarget);\r\n      if (m.toolTip) {\r\n        header.title = m.toolTip;\r\n      }\r\n      if (!m.reorderable) {\r\n        header.classList.add(this._options.unorderableColumnCssClass!);\r\n      }\r\n      const colNameElm = Utils.createDomElement('span', { className: 'slick-column-name' }, header);\r\n      this.applyHtmlCode(colNameElm, m.name as string);\r\n\r\n      Utils.width(header, m.width! - this.headerColumnWidthDiff);\r\n\r\n      let classname = m.headerCssClass || null;\r\n      if (classname) {\r\n        header.classList.add(...Utils.classNameToList(classname));\r\n      }\r\n      classname = this.hasFrozenColumns() && i <= this._options.frozenColumn! ? 'frozen' : null;\r\n      if (classname) {\r\n        header.classList.add(classname);\r\n      }\r\n\r\n      this._bindingEventService.bind(header, 'mouseenter', this.handleHeaderMouseEnter.bind(this) as EventListener);\r\n      this._bindingEventService.bind(header, 'mouseleave', this.handleHeaderMouseLeave.bind(this) as EventListener);\r\n\r\n      Utils.storage.put(header, 'column', m);\r\n\r\n      if (this._options.enableColumnReorder || m.sortable) {\r\n        this._bindingEventService.bind(header, 'mouseenter', this.handleHeaderMouseHoverOn.bind(this) as EventListener);\r\n        this._bindingEventService.bind(header, 'mouseleave', this.handleHeaderMouseHoverOff.bind(this) as EventListener);\r\n      }\r\n\r\n      if (m.hasOwnProperty('headerCellAttrs') && m.headerCellAttrs instanceof Object) {\r\n        Object.keys(m.headerCellAttrs).forEach(key => {\r\n          if (m.headerCellAttrs.hasOwnProperty(key)) {\r\n            header.setAttribute(key, m.headerCellAttrs[key]);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (m.sortable) {\r\n        header.classList.add('slick-header-sortable');\r\n        Utils.createDomElement('div', { className: `slick-sort-indicator ${this._options.numberedMultiColumnSort && !this._options.sortColNumberInSeparateSpan ? ' slick-sort-indicator-numbered' : ''}` }, header);\r\n        if (this._options.numberedMultiColumnSort && this._options.sortColNumberInSeparateSpan) {\r\n          Utils.createDomElement('div', { className: 'slick-sort-indicator-numbered' }, header);\r\n        }\r\n      }\r\n\r\n      this.trigger(this.onHeaderCellRendered, {\r\n        node: header,\r\n        column: m,\r\n        grid: this\r\n      });\r\n\r\n      if (this._options.showHeaderRow) {\r\n        const headerRowCell = Utils.createDomElement('div', { className: `ui-state-default slick-state-default slick-headerrow-column l${i} r${i}` }, headerRowTarget);\r\n        const frozenClasses = this.hasFrozenColumns() && i <= this._options.frozenColumn! ? 'frozen' : null;\r\n        if (frozenClasses) {\r\n          headerRowCell.classList.add(frozenClasses);\r\n        }\r\n\r\n        this._bindingEventService.bind(headerRowCell, 'mouseenter', this.handleHeaderRowMouseEnter.bind(this) as EventListener);\r\n        this._bindingEventService.bind(headerRowCell, 'mouseleave', this.handleHeaderRowMouseLeave.bind(this) as EventListener);\r\n\r\n        Utils.storage.put(headerRowCell, 'column', m);\r\n\r\n        this.trigger(this.onHeaderRowCellRendered, {\r\n          node: headerRowCell,\r\n          column: m,\r\n          grid: this\r\n        });\r\n      }\r\n      if (this._options.createFooterRow && this._options.showFooterRow) {\r\n        const footerRowTarget = this.hasFrozenColumns() ? ((i <= this._options.frozenColumn!) ? this._footerRow[0] : this._footerRow[1]) : this._footerRow[0];\r\n        const footerRowCell = Utils.createDomElement('div', { className: `ui-state-default slick-state-default slick-footerrow-column l${i} r${i}` }, footerRowTarget);\r\n        Utils.storage.put(footerRowCell, 'column', m);\r\n\r\n        this.trigger(this.onFooterRowCellRendered, {\r\n          node: footerRowCell,\r\n          column: m,\r\n          grid: this\r\n        });\r\n      }\r\n    }\r\n\r\n    this.setSortColumns(this.sortColumns);\r\n    this.setupColumnResize();\r\n    if (this._options.enableColumnReorder) {\r\n      if (typeof this._options.enableColumnReorder === 'function') {\r\n        this._options.enableColumnReorder(this as unknown as SlickGridModel, this._headers, this.headerColumnWidthDiff, this.setColumns as any, this.setupColumnResize, this.columns, this.getColumnIndex, this.uid, this.trigger);\r\n      } else {\r\n        this.setupColumnReorder();\r\n      }\r\n    }\r\n  }\r\n\r\n  protected setupColumnSort() {\r\n    this._headers.forEach((header) => {\r\n      this._bindingEventService.bind(header, 'click', (e: any) => {\r\n        if (this.columnResizeDragging) {\r\n          return;\r\n        }\r\n\r\n        if (e.target.classList.contains('slick-resizable-handle')) {\r\n          return;\r\n        }\r\n\r\n        const coll = e.target.closest('.slick-header-column');\r\n        if (!coll) {\r\n          return;\r\n        }\r\n\r\n        const column = Utils.storage.get(coll, 'column');\r\n        if (column.sortable) {\r\n          if (!this.getEditorLock()?.commitCurrentEdit()) {\r\n            return;\r\n          }\r\n\r\n          const previousSortColumns = this.sortColumns.slice();\r\n          let sortColumn: ColumnSort | null = null;\r\n          let i = 0;\r\n          for (; i < this.sortColumns.length; i++) {\r\n            if (this.sortColumns[i].columnId === column.id) {\r\n              sortColumn = this.sortColumns[i];\r\n              sortColumn.sortAsc = !sortColumn.sortAsc;\r\n              break;\r\n            }\r\n          }\r\n          const hadSortCol = !!sortColumn;\r\n\r\n          if (this._options.tristateMultiColumnSort) {\r\n            if (!sortColumn) {\r\n              sortColumn = { columnId: column.id, sortAsc: column.defaultSortAsc, sortCol: column };\r\n            }\r\n            if (hadSortCol && sortColumn.sortAsc) {\r\n              // three state: remove sort rather than go back to ASC\r\n              this.sortColumns.splice(i, 1);\r\n              sortColumn = null;\r\n            }\r\n            if (!this._options.multiColumnSort) {\r\n              this.sortColumns = [];\r\n            }\r\n            if (sortColumn && (!hadSortCol || !this._options.multiColumnSort)) {\r\n              this.sortColumns.push(sortColumn);\r\n            }\r\n          } else {\r\n            // legacy behaviour\r\n            if (e.metaKey && this._options.multiColumnSort) {\r\n              if (sortColumn) {\r\n                this.sortColumns.splice(i, 1);\r\n              }\r\n            } else {\r\n              if ((!e.shiftKey && !e.metaKey) || !this._options.multiColumnSort) {\r\n                this.sortColumns = [];\r\n              }\r\n\r\n              if (!sortColumn) {\r\n                sortColumn = { columnId: column.id, sortAsc: column.defaultSortAsc, sortCol: column };\r\n                this.sortColumns.push(sortColumn);\r\n              } else if (this.sortColumns.length === 0) {\r\n                this.sortColumns.push(sortColumn);\r\n              }\r\n            }\r\n          }\r\n\r\n          let onSortArgs;\r\n          if (!this._options.multiColumnSort) {\r\n            onSortArgs = {\r\n              multiColumnSort: false,\r\n              previousSortColumns,\r\n              columnId: (this.sortColumns.length > 0 ? column.id : null),\r\n              sortCol: (this.sortColumns.length > 0 ? column : null),\r\n              sortAsc: (this.sortColumns.length > 0 ? this.sortColumns[0].sortAsc : true)\r\n            };\r\n          } else {\r\n            onSortArgs = {\r\n              multiColumnSort: true,\r\n              previousSortColumns,\r\n              sortCols: this.sortColumns.map((col) => {\r\n                const tempCol = this.columns[this.getColumnIndex(col.columnId)];\r\n                return !tempCol || tempCol.hidden ? null : { columnId: tempCol.id, sortCol: tempCol, sortAsc: col.sortAsc };\r\n              }).filter((el) => el)\r\n            };\r\n          }\r\n\r\n          if (this.trigger(this.onBeforeSort, onSortArgs, e).getReturnValue() !== false) {\r\n            this.setSortColumns(this.sortColumns);\r\n            this.trigger(this.onSort, onSortArgs, e);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  protected setupColumnReorder() {\r\n    this.sortableSideLeftInstance?.destroy();\r\n    this.sortableSideRightInstance?.destroy();\r\n\r\n    let columnScrollTimer: any = null;\r\n\r\n    const scrollColumnsRight = () => this._viewportScrollContainerX.scrollLeft = this._viewportScrollContainerX.scrollLeft + 10;\r\n    const scrollColumnsLeft = () => this._viewportScrollContainerX.scrollLeft = this._viewportScrollContainerX.scrollLeft - 10;\r\n\r\n    let canDragScroll = false;\r\n    const sortableOptions = {\r\n      animation: 50,\r\n      direction: 'horizontal',\r\n      chosenClass: 'slick-header-column-active',\r\n      ghostClass: 'slick-sortable-placeholder',\r\n      draggable: '.slick-header-column',\r\n      dragoverBubble: false,\r\n      revertClone: true,\r\n      scroll: !this.hasFrozenColumns(), // enable auto-scroll\r\n      // lock unorderable columns by using a combo of filter + onMove\r\n      filter: `.${this._options.unorderableColumnCssClass}`,\r\n      onMove: (event: MouseEvent & { related: HTMLElement; }) => {\r\n        return !event.related.classList.contains(this._options.unorderableColumnCssClass as string);\r\n      },\r\n      onStart: (e: { item: any; originalEvent: MouseEvent; }) => {\r\n        canDragScroll = !this.hasFrozenColumns() ||\r\n          Utils.offset(e.item)!.left > Utils.offset(this._viewportScrollContainerX)!.left;\r\n\r\n        if (canDragScroll && e.originalEvent.pageX > this._container.clientWidth) {\r\n          if (!(columnScrollTimer)) {\r\n            columnScrollTimer = setInterval(scrollColumnsRight, 100);\r\n          }\r\n        } else if (canDragScroll && e.originalEvent.pageX < Utils.offset(this._viewportScrollContainerX)!.left) {\r\n          if (!(columnScrollTimer)) {\r\n            columnScrollTimer = setInterval(scrollColumnsLeft, 100);\r\n          }\r\n        } else {\r\n          clearInterval(columnScrollTimer);\r\n          columnScrollTimer = null;\r\n        }\r\n      },\r\n      onEnd: (e: MouseEvent & { item: any; originalEvent: MouseEvent; }) => {\r\n        clearInterval(columnScrollTimer);\r\n        columnScrollTimer = null;\r\n\r\n        if (!this.getEditorLock()?.commitCurrentEdit()) {\r\n          return;\r\n        }\r\n\r\n        let reorderedIds = this.sortableSideLeftInstance?.toArray() ?? [];\r\n        reorderedIds = reorderedIds.concat(this.sortableSideRightInstance?.toArray() ?? []);\r\n\r\n        const reorderedColumns: C[] = [];\r\n        for (let i = 0; i < reorderedIds.length; i++) {\r\n          reorderedColumns.push(this.columns[this.getColumnIndex(reorderedIds[i])]);\r\n        }\r\n        this.setColumns(reorderedColumns);\r\n\r\n        this.trigger(this.onColumnsReordered, { impactedColumns: this.columns });\r\n        e.stopPropagation();\r\n        this.setupColumnResize();\r\n        if (this.activeCellNode) {\r\n          this.setFocus(); // refocus on active cell\r\n        }\r\n      }\r\n    };\r\n\r\n    this.sortableSideLeftInstance = Sortable.create(this._headerL, sortableOptions);\r\n    this.sortableSideRightInstance = Sortable.create(this._headerR, sortableOptions);\r\n  }\r\n\r\n  protected getHeaderChildren() {\r\n    const a = Array.from(this._headers[0].children);\r\n    const b = Array.from(this._headers[1].children);\r\n    return a.concat(b) as HTMLElement[];\r\n  }\r\n\r\n  protected handleResizeableDoubleClick(evt: MouseEvent & { target: HTMLDivElement; }) {\r\n    const triggeredByColumn = evt.target.parentElement!.id.replace(this.uid, '');\r\n    this.trigger(this.onColumnsResizeDblClick, { triggeredByColumn });\r\n  }\r\n\r\n  protected setupColumnResize() {\r\n    if (typeof Resizable === 'undefined') {\r\n      throw new Error(`Slick.Resizable is undefined, make sure to import \"slick.interactions.js\"`);\r\n    }\r\n\r\n    let j: number;\r\n    let k: number;\r\n    let c: C;\r\n    let pageX: number;\r\n    let minPageX: number;\r\n    let maxPageX: number;\r\n    let firstResizable: number | undefined;\r\n    let lastResizable = -1;\r\n    let frozenLeftColMaxWidth = 0;\r\n\r\n    const children: HTMLElement[] = this.getHeaderChildren();\r\n    const vc = this.getVisibleColumns();\r\n    for (let i = 0; i < children.length; i++) {\r\n      const child = children[i];\r\n      const handles = child.querySelectorAll('.slick-resizable-handle');\r\n      handles.forEach((handle) => handle.remove());\r\n\r\n      if (i >= vc.length || !vc[i]) {\r\n        continue;\r\n      }\r\n\r\n      if (vc[i].resizable) {\r\n        if (firstResizable === undefined) {\r\n          firstResizable = i;\r\n        }\r\n        lastResizable = i;\r\n      }\r\n    }\r\n\r\n    if (firstResizable === undefined) {\r\n      return;\r\n    }\r\n\r\n    for (let i = 0; i < children.length; i++) {\r\n      const colElm = children[i];\r\n\r\n      if (i >= vc.length || !vc[i]) {\r\n        continue;\r\n      }\r\n      if (i < firstResizable || (this._options.forceFitColumns && i >= lastResizable)) {\r\n        continue;\r\n      }\r\n\r\n      const resizeableHandle = Utils.createDomElement('div', { className: 'slick-resizable-handle', role: 'separator', ariaOrientation: 'horizontal' }, colElm);\r\n      this._bindingEventService.bind(resizeableHandle, 'dblclick', this.handleResizeableDoubleClick.bind(this) as EventListener);\r\n\r\n      this.slickResizableInstances.push(\r\n        Resizable({\r\n          resizeableElement: colElm as HTMLElement,\r\n          resizeableHandleElement: resizeableHandle,\r\n          onResizeStart: (e, resizeElms): boolean | void => {\r\n            const targetEvent = (e as TouchEvent).touches ? (e as TouchEvent).changedTouches[0] : e;\r\n            if (!this.getEditorLock()?.commitCurrentEdit()) {\r\n              return false;\r\n            }\r\n            pageX = (targetEvent as MouseEvent).pageX;\r\n            frozenLeftColMaxWidth = 0;\r\n            resizeElms.resizeableElement.classList.add('slick-header-column-active');\r\n            let shrinkLeewayOnRight: number | null = null;\r\n            let stretchLeewayOnRight: number | null = null;\r\n            // lock each column's width option to current width\r\n            for (let pw = 0; pw < children.length; pw++) {\r\n              if (pw >= vc.length || !vc[pw]) {\r\n                continue;\r\n              }\r\n              vc[pw].previousWidth = children[pw].offsetWidth;\r\n            }\r\n            if (this._options.forceFitColumns) {\r\n              shrinkLeewayOnRight = 0;\r\n              stretchLeewayOnRight = 0;\r\n              // colums on right affect maxPageX/minPageX\r\n              for (j = i + 1; j < vc.length; j++) {\r\n                c = vc[j];\r\n                if (c?.resizable) {\r\n                  if (stretchLeewayOnRight !== null) {\r\n                    if (c.maxWidth) {\r\n                      stretchLeewayOnRight += c.maxWidth - (c.previousWidth || 0);\r\n                    } else {\r\n                      stretchLeewayOnRight = null;\r\n                    }\r\n                  }\r\n                  shrinkLeewayOnRight += (c.previousWidth || 0) - Math.max(c.minWidth || 0, this.absoluteColumnMinWidth);\r\n                }\r\n              }\r\n            }\r\n            let shrinkLeewayOnLeft = 0;\r\n            let stretchLeewayOnLeft: number | null = 0;\r\n            for (j = 0; j <= i; j++) {\r\n              // columns on left only affect minPageX\r\n              c = vc[j];\r\n              if (c?.resizable) {\r\n                if (stretchLeewayOnLeft !== null) {\r\n                  if (c.maxWidth) {\r\n                    stretchLeewayOnLeft += c.maxWidth - (c.previousWidth || 0);\r\n                  } else {\r\n                    stretchLeewayOnLeft = null;\r\n                  }\r\n                }\r\n                shrinkLeewayOnLeft += (c.previousWidth || 0) - Math.max(c.minWidth || 0, this.absoluteColumnMinWidth);\r\n              }\r\n            }\r\n            if (shrinkLeewayOnRight === null) {\r\n              shrinkLeewayOnRight = 100000;\r\n            }\r\n            if (shrinkLeewayOnLeft === null) {\r\n              shrinkLeewayOnLeft = 100000;\r\n            }\r\n            if (stretchLeewayOnRight === null) {\r\n              stretchLeewayOnRight = 100000;\r\n            }\r\n            if (stretchLeewayOnLeft === null) {\r\n              stretchLeewayOnLeft = 100000;\r\n            }\r\n            maxPageX = pageX + Math.min(shrinkLeewayOnRight, stretchLeewayOnLeft);\r\n            minPageX = pageX - Math.min(shrinkLeewayOnLeft, stretchLeewayOnRight);\r\n          },\r\n          onResize: (e, resizeElms) => {\r\n            const targetEvent = (e as TouchEvent).touches ? (e as TouchEvent).changedTouches[0] : e;\r\n            this.columnResizeDragging = true;\r\n            let actualMinWidth;\r\n            const d = Math.min(maxPageX, Math.max(minPageX, (targetEvent as MouseEvent).pageX)) - pageX;\r\n            let x;\r\n            let newCanvasWidthL = 0;\r\n            let newCanvasWidthR = 0;\r\n            const viewportWidth = this.viewportHasVScroll ? this.viewportW - (this.scrollbarDimensions?.width ?? 0) : this.viewportW;\r\n\r\n            if (d < 0) { // shrink column\r\n              x = d;\r\n\r\n              for (j = i; j >= 0; j--) {\r\n                c = vc[j];\r\n                if (c?.resizable && !c.hidden) {\r\n                  actualMinWidth = Math.max(c.minWidth || 0, this.absoluteColumnMinWidth);\r\n                  if (x && (c.previousWidth || 0) + x < actualMinWidth) {\r\n                    x += (c.previousWidth || 0) - actualMinWidth;\r\n                    c.width = actualMinWidth;\r\n                  } else {\r\n                    c.width = (c.previousWidth || 0) + x;\r\n                    x = 0;\r\n                  }\r\n                }\r\n              }\r\n\r\n              for (k = 0; k <= i; k++) {\r\n                c = vc[k];\r\n                if (!c || c.hidden) { continue; }\r\n\r\n                if (this.hasFrozenColumns() && (k > this._options.frozenColumn!)) {\r\n                  newCanvasWidthR += c.width || 0;\r\n                } else {\r\n                  newCanvasWidthL += c.width || 0;\r\n                }\r\n              }\r\n\r\n              if (this._options.forceFitColumns) {\r\n                x = -d;\r\n                for (j = i + 1; j < vc.length; j++) {\r\n                  c = vc[j];\r\n                  if (!c || c.hidden) { continue; }\r\n                  if (c.resizable) {\r\n                    if (x && c.maxWidth && (c.maxWidth - (c.previousWidth || 0) < x)) {\r\n                      x -= c.maxWidth - (c.previousWidth || 0);\r\n                      c.width = c.maxWidth;\r\n                    } else {\r\n                      c.width = (c.previousWidth || 0) + x;\r\n                      x = 0;\r\n                    }\r\n\r\n                    if (this.hasFrozenColumns() && (j > this._options.frozenColumn!)) {\r\n                      newCanvasWidthR += c.width || 0;\r\n                    } else {\r\n                      newCanvasWidthL += c.width || 0;\r\n                    }\r\n                  }\r\n                }\r\n              } else {\r\n                for (j = i + 1; j < vc.length; j++) {\r\n                  c = vc[j];\r\n                  if (!c || c.hidden) { continue; }\r\n\r\n                  if (this.hasFrozenColumns() && (j > this._options.frozenColumn!)) {\r\n                    newCanvasWidthR += c.width || 0;\r\n                  } else {\r\n                    newCanvasWidthL += c.width || 0;\r\n                  }\r\n                }\r\n              }\r\n\r\n              if (this._options.forceFitColumns) {\r\n                x = -d;\r\n                for (j = i + 1; j < vc.length; j++) {\r\n                  c = vc[j];\r\n                  if (!c || c.hidden) { continue; }\r\n                  if (c.resizable) {\r\n                    if (x && c.maxWidth && (c.maxWidth - (c.previousWidth || 0) < x)) {\r\n                      x -= c.maxWidth - (c.previousWidth || 0);\r\n                      c.width = c.maxWidth;\r\n                    } else {\r\n                      c.width = (c.previousWidth || 0) + x;\r\n                      x = 0;\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            } else { // stretch column\r\n              x = d;\r\n\r\n              newCanvasWidthL = 0;\r\n              newCanvasWidthR = 0;\r\n\r\n              for (j = i; j >= 0; j--) {\r\n                c = vc[j];\r\n                if (!c || c.hidden) { continue; }\r\n                if (c.resizable) {\r\n                  if (x && c.maxWidth && (c.maxWidth - (c.previousWidth || 0) < x)) {\r\n                    x -= c.maxWidth - (c.previousWidth || 0);\r\n                    c.width = c.maxWidth;\r\n                  } else {\r\n                    const newWidth = (c.previousWidth || 0) + x;\r\n                    const resizedCanvasWidthL = this.canvasWidthL + x;\r\n\r\n                    if (this.hasFrozenColumns() && (j <= this._options.frozenColumn!)) {\r\n                      // if we're on the left frozen side, we need to make sure that our left section width never goes over the total viewport width\r\n                      if (newWidth > frozenLeftColMaxWidth && resizedCanvasWidthL < (viewportWidth - this._options.frozenRightViewportMinWidth!)) {\r\n                        frozenLeftColMaxWidth = newWidth; // keep max column width ref, if we go over the limit this number will stop increasing\r\n                      }\r\n                      c.width = ((resizedCanvasWidthL + this._options.frozenRightViewportMinWidth!) > viewportWidth) ? frozenLeftColMaxWidth : newWidth;\r\n                    } else {\r\n                      c.width = newWidth;\r\n                    }\r\n                    x = 0;\r\n                  }\r\n                }\r\n              }\r\n\r\n              for (k = 0; k <= i; k++) {\r\n                c = vc[k];\r\n                if (!c || c.hidden) { continue; }\r\n\r\n                if (this.hasFrozenColumns() && (k > this._options.frozenColumn!)) {\r\n                  newCanvasWidthR += c.width || 0;\r\n                } else {\r\n                  newCanvasWidthL += c.width || 0;\r\n                }\r\n              }\r\n\r\n              if (this._options.forceFitColumns) {\r\n                x = -d;\r\n                for (j = i + 1; j < vc.length; j++) {\r\n                  c = vc[j];\r\n                  if (!c || c.hidden) { continue; }\r\n                  if (c.resizable) {\r\n                    actualMinWidth = Math.max(c.minWidth || 0, this.absoluteColumnMinWidth);\r\n                    if (x && (c.previousWidth || 0) + x < actualMinWidth) {\r\n                      x += (c.previousWidth || 0) - actualMinWidth;\r\n                      c.width = actualMinWidth;\r\n                    } else {\r\n                      c.width = (c.previousWidth || 0) + x;\r\n                      x = 0;\r\n                    }\r\n\r\n                    if (this.hasFrozenColumns() && (j > this._options.frozenColumn!)) {\r\n                      newCanvasWidthR += c.width || 0;\r\n                    } else {\r\n                      newCanvasWidthL += c.width || 0;\r\n                    }\r\n                  }\r\n                }\r\n              } else {\r\n                for (j = i + 1; j < vc.length; j++) {\r\n                  c = vc[j];\r\n                  if (!c || c.hidden) { continue; }\r\n\r\n                  if (this.hasFrozenColumns() && (j > this._options.frozenColumn!)) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n                    newCanvasWidthR += c.width || 0;\r\n                  } else {\r\n                    newCanvasWidthL += c.width || 0;\r\n                  }\r\n                }\r\n              }\r\n            }\r\n\r\n            if (this.hasFrozenColumns() && newCanvasWidthL !== this.canvasWidthL) {\r\n              Utils.width(this._headerL, newCanvasWidthL + 1000);\r\n              Utils.setStyleSize(this._paneHeaderR, 'left', newCanvasWidthL);\r\n            }\r\n\r\n            this.applyColumnHeaderWidths();\r\n            if (this._options.syncColumnCellResize) {\r\n              this.applyColumnWidths();\r\n            }\r\n            this.trigger(this.onColumnsDrag, {\r\n              triggeredByColumn: resizeElms.resizeableElement,\r\n              resizeHandle: resizeElms.resizeableHandleElement\r\n            });\r\n          },\r\n          onResizeEnd: (_e, resizeElms) => {\r\n            resizeElms.resizeableElement.classList.remove('slick-header-column-active');\r\n\r\n            const triggeredByColumn = resizeElms.resizeableElement.id.replace(this.uid, '');\r\n            if (this.trigger(this.onBeforeColumnsResize, { triggeredByColumn }).getReturnValue() === true) {\r\n              this.applyColumnHeaderWidths();\r\n            }\r\n            let newWidth;\r\n            for (j = 0; j < vc.length; j++) {\r\n              c = vc[j];\r\n              if (!c || c.hidden) { continue; }\r\n              newWidth = children[j].offsetWidth;\r\n\r\n              if (c.previousWidth !== newWidth && c.rerenderOnResize) {\r\n                this.invalidateAllRows();\r\n              }\r\n            }\r\n            this.updateCanvasWidth(true);\r\n            this.render();\r\n            this.trigger(this.onColumnsResized, { triggeredByColumn });\r\n            clearTimeout(this._columnResizeTimer);\r\n            this._columnResizeTimer = setTimeout(() => { this.columnResizeDragging = false; }, 300);\r\n          }\r\n        })\r\n      );\r\n    }\r\n  }\r\n\r\n  protected getVBoxDelta(el: HTMLElement) {\r\n    const p = ['borderTopWidth', 'borderBottomWidth', 'paddingTop', 'paddingBottom'];\r\n    const styles = getComputedStyle(el);\r\n    let delta = 0;\r\n    p.forEach((val) => delta += Utils.toFloat(styles[val as any]));\r\n    return delta;\r\n  }\r\n\r\n  protected setFrozenOptions() {\r\n    this._options.frozenColumn = (this._options.frozenColumn! >= 0 && this._options.frozenColumn! < this.columns.length)\r\n      ? parseInt(this._options.frozenColumn as unknown as string, 10)\r\n      : -1;\r\n\r\n    if (this._options.frozenRow! > -1) {\r\n      this.hasFrozenRows = true;\r\n      this.frozenRowsHeight = (this._options.frozenRow!) * this._options.rowHeight!;\r\n      const dataLength = this.getDataLength();\r\n\r\n      this.actualFrozenRow = (this._options.frozenBottom)\r\n        ? (dataLength - this._options.frozenRow!)\r\n        : this._options.frozenRow!;\r\n    } else {\r\n      this.hasFrozenRows = false;\r\n    }\r\n  }\r\n\r\n  protected setPaneVisibility() {\r\n    if (this.hasFrozenColumns()) {\r\n      Utils.show(this._paneHeaderR);\r\n      Utils.show(this._paneTopR);\r\n\r\n      if (this.hasFrozenRows) {\r\n        Utils.show(this._paneBottomL);\r\n        Utils.show(this._paneBottomR);\r\n      } else {\r\n        Utils.hide(this._paneBottomR);\r\n        Utils.hide(this._paneBottomL);\r\n      }\r\n    } else {\r\n      Utils.hide(this._paneHeaderR);\r\n      Utils.hide(this._paneTopR);\r\n      Utils.hide(this._paneBottomR);\r\n\r\n      if (this.hasFrozenRows) {\r\n        Utils.show(this._paneBottomL);\r\n      } else {\r\n        Utils.hide(this._paneBottomR);\r\n        Utils.hide(this._paneBottomL);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected setOverflow() {\r\n    this._viewportTopL.style.overflowX = (this.hasFrozenColumns()) ? (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'hidden' : 'scroll') : (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'hidden' : 'auto');\r\n    this._viewportTopL.style.overflowY = (!this.hasFrozenColumns() && this._options.alwaysShowVerticalScroll) ? 'scroll' : ((this.hasFrozenColumns()) ? (this.hasFrozenRows ? 'hidden' : 'hidden') : (this.hasFrozenRows ? 'scroll' : 'auto'));\r\n\r\n    this._viewportTopR.style.overflowX = (this.hasFrozenColumns()) ? (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'hidden' : 'scroll') : (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'hidden' : 'auto');\r\n    this._viewportTopR.style.overflowY = this._options.alwaysShowVerticalScroll ? 'scroll' : ((this.hasFrozenColumns()) ? (this.hasFrozenRows ? 'scroll' : 'auto') : (this.hasFrozenRows ? 'scroll' : 'auto'));\r\n\r\n    this._viewportBottomL.style.overflowX = (this.hasFrozenColumns()) ? (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'scroll' : 'auto') : (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'auto' : 'auto');\r\n    this._viewportBottomL.style.overflowY = (!this.hasFrozenColumns() && this._options.alwaysShowVerticalScroll) ? 'scroll' : ((this.hasFrozenColumns()) ? (this.hasFrozenRows ? 'hidden' : 'hidden') : (this.hasFrozenRows ? 'scroll' : 'auto'));\r\n\r\n    this._viewportBottomR.style.overflowX = (this.hasFrozenColumns()) ? (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'scroll' : 'auto') : (this.hasFrozenRows && !this._options.alwaysAllowHorizontalScroll ? 'auto' : 'auto');\r\n    this._viewportBottomR.style.overflowY = this._options.alwaysShowVerticalScroll ? 'scroll' : ((this.hasFrozenColumns()) ? (this.hasFrozenRows ? 'auto' : 'auto') : (this.hasFrozenRows ? 'auto' : 'auto'));\r\n\r\n    if (this._options.viewportClass) {\r\n      const viewportClassList = Utils.classNameToList(this._options.viewportClass);\r\n      this._viewportTopL.classList.add(...viewportClassList);\r\n      this._viewportTopR.classList.add(...viewportClassList);\r\n      this._viewportBottomL.classList.add(...viewportClassList);\r\n      this._viewportBottomR.classList.add(...viewportClassList);\r\n    }\r\n  }\r\n\r\n  protected setScroller() {\r\n    if (this.hasFrozenColumns()) {\r\n      this._headerScrollContainer = this._headerScrollerR;\r\n      this._headerRowScrollContainer = this._headerRowScrollerR;\r\n      this._footerRowScrollContainer = this._footerRowScrollerR;\r\n\r\n      if (this.hasFrozenRows) {\r\n        if (this._options.frozenBottom) {\r\n          this._viewportScrollContainerX = this._viewportBottomR;\r\n          this._viewportScrollContainerY = this._viewportTopR;\r\n        } else {\r\n          this._viewportScrollContainerX = this._viewportScrollContainerY = this._viewportBottomR;\r\n        }\r\n      } else {\r\n        this._viewportScrollContainerX = this._viewportScrollContainerY = this._viewportTopR;\r\n      }\r\n    } else {\r\n      this._headerScrollContainer = this._headerScrollerL;\r\n      this._headerRowScrollContainer = this._headerRowScrollerL;\r\n      this._footerRowScrollContainer = this._footerRowScrollerL;\r\n\r\n      if (this.hasFrozenRows) {\r\n        if (this._options.frozenBottom) {\r\n          this._viewportScrollContainerX = this._viewportBottomL;\r\n          this._viewportScrollContainerY = this._viewportTopL;\r\n        } else {\r\n          this._viewportScrollContainerX = this._viewportScrollContainerY = this._viewportBottomL;\r\n        }\r\n      } else {\r\n        this._viewportScrollContainerX = this._viewportScrollContainerY = this._viewportTopL;\r\n      }\r\n    }\r\n  }\r\n\r\n  protected measureCellPaddingAndBorder() {\r\n    const h = ['borderLeftWidth', 'borderRightWidth', 'paddingLeft', 'paddingRight'];\r\n    const v = ['borderTopWidth', 'borderBottomWidth', 'paddingTop', 'paddingBottom'];\r\n    const header = this._headers[0];\r\n\r\n    this.headerColumnWidthDiff = this.headerColumnHeightDiff = 0;\r\n    this.cellWidthDiff = this.cellHeightDiff = 0;\r\n\r\n    let el = Utils.createDomElement('div', { className: 'ui-state-default slick-state-default slick-header-column', style: { visibility: 'hidden' }, textContent: '-' }, header);\r\n    let style = getComputedStyle(el);\r\n    if (style.boxSizing !== 'border-box') {\r\n      h.forEach((val) => this.headerColumnWidthDiff += Utils.toFloat(style[val as any]));\r\n      v.forEach((val) => this.headerColumnHeightDiff += Utils.toFloat(style[val as any]));\r\n    }\r\n    el.remove();\r\n\r\n    const r = Utils.createDomElement('div', { className: 'slick-row' }, this._canvas[0]);\r\n    el = Utils.createDomElement('div', { className: 'slick-cell', id: '', style: { visibility: 'hidden' }, textContent: '-' }, r);\r\n    style = getComputedStyle(el);\r\n    if (style.boxSizing !== 'border-box') {\r\n      h.forEach((val) => this.cellWidthDiff += Utils.toFloat(style[val as any]));\r\n      v.forEach((val) => this.cellHeightDiff += Utils.toFloat(style[val as any]));\r\n    }\r\n    r.remove();\r\n\r\n    this.absoluteColumnMinWidth = Math.max(this.headerColumnWidthDiff, this.cellWidthDiff);\r\n  }\r\n\r\n  protected createCssRules() {\r\n    this._style = document.createElement('style');\r\n    this._style.nonce = this._options.nonce || '';\r\n    (this._options.shadowRoot || document.head).appendChild(this._style);\r\n\r\n    const rowHeight = (this._options.rowHeight! - this.cellHeightDiff);\r\n    const rules = [\r\n      `.${this.uid} .slick-group-header-column { left: 1000px; }`,\r\n      `.${this.uid} .slick-header-column { left: 1000px; }`,\r\n      `.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,\r\n      `.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,\r\n      `.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,\r\n      `.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,\r\n      `.${this.uid} .slick-cell { height: ${rowHeight}px; }`,\r\n      `.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`,\r\n    ];\r\n\r\n    const sheet = this._style.sheet;\r\n    if (sheet) {\r\n      rules.forEach(rule => {\r\n        sheet.insertRule(rule);\r\n      });\r\n\r\n      for (let i = 0; i < this.columns.length; i++) {\r\n        if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n        sheet.insertRule(`.${this.uid} .l${i} { }`);\r\n        sheet.insertRule(`.${this.uid} .r${i} { }`);\r\n      }\r\n    } else {\r\n      // fallback in case the 1st approach doesn't work, let's use our previous way of creating the css rules which is what works in Salesforce :(\r\n      this.createCssRulesAlternative(rules);\r\n    }\r\n  }\r\n\r\n  /** Create CSS rules via template in case the first approach with createElement('style') doesn't work */\r\n  protected createCssRulesAlternative(rules: string[]) {\r\n    const template = document.createElement('template');\r\n    template.innerHTML = '<style type=\"text/css\" rel=\"stylesheet\" />';\r\n    this._style = template.content.firstChild as HTMLStyleElement;\r\n    (this._options.shadowRoot || document.head).appendChild(this._style);\r\n\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n      rules.push(`.${this.uid} .l${i} { }`);\r\n      rules.push(`.${this.uid} .r${i} { }`);\r\n    }\r\n\r\n    if ((this._style as any).styleSheet) { // IE\r\n      (this._style as any).styleSheet.cssText = rules.join(' ');\r\n    } else {\r\n      this._style.appendChild(document.createTextNode(rules.join(' ')));\r\n    }\r\n  }\r\n\r\n  protected getColumnCssRules(idx: number) {\r\n    let i: number;\r\n    if (!this.stylesheet) {\r\n      const sheets: any = (this._options.shadowRoot || document).styleSheets;\r\n\r\n      if (this._options.devMode && typeof this._options.devMode?.ownerNodeIndex === 'number' && this._options.devMode.ownerNodeIndex >= 0) {\r\n        sheets[this._options.devMode.ownerNodeIndex].ownerNode = this._style;\r\n      }\r\n\r\n      for (i = 0; i < sheets.length; i++) {\r\n        if ((sheets[i].ownerNode || sheets[i].owningElement) === this._style) {\r\n          this.stylesheet = sheets[i];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (!this.stylesheet) {\r\n        throw new Error('SlickGrid Cannot find stylesheet.');\r\n      }\r\n\r\n      // find and cache column CSS rules\r\n      this.columnCssRulesL = [];\r\n      this.columnCssRulesR = [];\r\n      const cssRules = (this.stylesheet.cssRules || this.stylesheet.rules);\r\n      let matches;\r\n      let columnIdx;\r\n      for (i = 0; i < cssRules.length; i++) {\r\n        const selector = cssRules[i].selectorText;\r\n        if (matches = /\\.l\\d+/.exec(selector)) {\r\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\r\n          this.columnCssRulesL[columnIdx] = cssRules[i];\r\n        } else if (matches = /\\.r\\d+/.exec(selector)) {\r\n          columnIdx = parseInt(matches[0].substr(2, matches[0].length - 2), 10);\r\n          this.columnCssRulesR[columnIdx] = cssRules[i];\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      left: this.columnCssRulesL![idx],\r\n      right: this.columnCssRulesR![idx]\r\n    };\r\n  }\r\n\r\n  protected removeCssRules() {\r\n    this._style?.remove();\r\n    this.stylesheet = null;\r\n  }\r\n\r\n  /** Clear all highlight timers that might have been left opened */\r\n  protected clearAllTimers() {\r\n    clearTimeout(this._columnResizeTimer);\r\n    clearTimeout(this._executionBlockTimer);\r\n    clearTimeout(this._flashCellTimer);\r\n    clearTimeout(this._highlightRowTimer);\r\n    clearTimeout(this.h_editorLoader);\r\n  }\r\n\r\n  /**\r\n   * Destroy (dispose) of SlickGrid\r\n   * @param {boolean} shouldDestroyAllElements - do we want to destroy (nullify) all DOM elements as well? This help in avoiding mem leaks\r\n   */\r\n  destroy(shouldDestroyAllElements?: boolean) {\r\n    this._bindingEventService.unbindAll();\r\n    this.slickDraggableInstance = this.destroyAllInstances(this.slickDraggableInstance) as null;\r\n    this.slickMouseWheelInstances = this.destroyAllInstances(this.slickMouseWheelInstances) as InteractionBase[];\r\n    this.slickResizableInstances = this.destroyAllInstances(this.slickResizableInstances) as InteractionBase[];\r\n    this.getEditorLock()?.cancelCurrentEdit();\r\n\r\n    this.trigger(this.onBeforeDestroy, {});\r\n\r\n    let i = this.plugins.length;\r\n    while (i--) {\r\n      this.unregisterPlugin(this.plugins[i]);\r\n    }\r\n\r\n    if (this._options.enableColumnReorder && typeof this.sortableSideLeftInstance?.destroy === 'function') {\r\n      this.sortableSideLeftInstance?.destroy();\r\n      this.sortableSideRightInstance?.destroy();\r\n    }\r\n\r\n    this.unbindAncestorScrollEvents();\r\n    this._bindingEventService.unbindByEventName(this._container, 'resize');\r\n    this.removeCssRules();\r\n\r\n    this._canvas.forEach((element) => {\r\n      this._bindingEventService.unbindByEventName(element, 'keydown');\r\n      this._bindingEventService.unbindByEventName(element, 'click');\r\n      this._bindingEventService.unbindByEventName(element, 'dblclick');\r\n      this._bindingEventService.unbindByEventName(element, 'contextmenu');\r\n      this._bindingEventService.unbindByEventName(element, 'mouseover');\r\n      this._bindingEventService.unbindByEventName(element, 'mouseout');\r\n    });\r\n    this._viewport.forEach((view) => {\r\n      this._bindingEventService.unbindByEventName(view, 'scroll');\r\n    });\r\n\r\n    this._headerScroller.forEach((el) => {\r\n      this._bindingEventService.unbindByEventName(el, 'contextmenu');\r\n      this._bindingEventService.unbindByEventName(el, 'click');\r\n    });\r\n\r\n    this._headerRowScroller.forEach((scroller) => {\r\n      this._bindingEventService.unbindByEventName(scroller, 'scroll');\r\n    });\r\n\r\n    if (this._footerRow) {\r\n      this._footerRow.forEach((footer) => {\r\n        this._bindingEventService.unbindByEventName(footer, 'contextmenu');\r\n        this._bindingEventService.unbindByEventName(footer, 'click');\r\n      });\r\n    }\r\n\r\n    if (this._footerRowScroller) {\r\n      this._footerRowScroller.forEach((scroller) => {\r\n        this._bindingEventService.unbindByEventName(scroller, 'scroll');\r\n      });\r\n    }\r\n\r\n    if (this._preHeaderPanelScroller) {\r\n      this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller, 'scroll');\r\n    }\r\n\r\n    this._bindingEventService.unbindByEventName(this._focusSink, 'keydown');\r\n    this._bindingEventService.unbindByEventName(this._focusSink2, 'keydown');\r\n\r\n    const resizeHandles = this._container.querySelectorAll('.slick-resizable-handle');\r\n    [].forEach.call(resizeHandles, (handle) => {\r\n      this._bindingEventService.unbindByEventName(handle, 'dblclick');\r\n    });\r\n\r\n    const headerColumns = this._container.querySelectorAll('.slick-header-column');\r\n    [].forEach.call(headerColumns, (column) => {\r\n      this._bindingEventService.unbindByEventName(column, 'mouseenter');\r\n      this._bindingEventService.unbindByEventName(column, 'mouseleave');\r\n\r\n      this._bindingEventService.unbindByEventName(column, 'mouseenter');\r\n      this._bindingEventService.unbindByEventName(column, 'mouseleave');\r\n    });\r\n\r\n    Utils.emptyElement(this._container);\r\n    this._container.classList.remove(this.uid);\r\n    this.clearAllTimers();\r\n\r\n    if (shouldDestroyAllElements) {\r\n      this.destroyAllElements();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * call destroy method, when exists, on all the instance(s) it found\r\n   * @params instances - can be a single instance or a an array of instances\r\n   */\r\n  protected destroyAllInstances(inputInstances: null | InteractionBase | Array<InteractionBase>) {\r\n    if (inputInstances) {\r\n      const instances = Array.isArray(inputInstances) ? inputInstances : [inputInstances];\r\n      let instance: InteractionBase | undefined;\r\n      while (Utils.isDefined(instance = instances.pop())) {\r\n        if (instance && typeof instance.destroy === 'function') {\r\n          instance.destroy();\r\n        }\r\n      }\r\n    }\r\n    // reset instance(s)\r\n    inputInstances = (Array.isArray(inputInstances) ? [] : null);\r\n    return inputInstances;\r\n  }\r\n\r\n  protected destroyAllElements() {\r\n    this._activeCanvasNode = null as any;\r\n    this._activeViewportNode = null as any;\r\n    this._boundAncestors = null as any;\r\n    this._canvas = null as any;\r\n    this._canvasTopL = null as any;\r\n    this._canvasTopR = null as any;\r\n    this._canvasBottomL = null as any;\r\n    this._canvasBottomR = null as any;\r\n    this._container = null as any;\r\n    this._focusSink = null as any;\r\n    this._focusSink2 = null as any;\r\n    this._groupHeaders = null as any;\r\n    this._groupHeadersL = null as any;\r\n    this._groupHeadersR = null as any;\r\n    this._headerL = null as any;\r\n    this._headerR = null as any;\r\n    this._headers = null as any;\r\n    this._headerRows = null as any;\r\n    this._headerRowL = null as any;\r\n    this._headerRowR = null as any;\r\n    this._headerRowSpacerL = null as any;\r\n    this._headerRowSpacerR = null as any;\r\n    this._headerRowScrollContainer = null as any;\r\n    this._headerRowScroller = null as any;\r\n    this._headerRowScrollerL = null as any;\r\n    this._headerRowScrollerR = null as any;\r\n    this._headerScrollContainer = null as any;\r\n    this._headerScroller = null as any;\r\n    this._headerScrollerL = null as any;\r\n    this._headerScrollerR = null as any;\r\n    this._hiddenParents = null as any;\r\n    this._footerRow = null as any;\r\n    this._footerRowL = null as any;\r\n    this._footerRowR = null as any;\r\n    this._footerRowSpacerL = null as any;\r\n    this._footerRowSpacerR = null as any;\r\n    this._footerRowScroller = null as any;\r\n    this._footerRowScrollerL = null as any;\r\n    this._footerRowScrollerR = null as any;\r\n    this._footerRowScrollContainer = null as any;\r\n    this._preHeaderPanel = null as any;\r\n    this._preHeaderPanelR = null as any;\r\n    this._preHeaderPanelScroller = null as any;\r\n    this._preHeaderPanelScrollerR = null as any;\r\n    this._preHeaderPanelSpacer = null as any;\r\n    this._preHeaderPanelSpacerR = null as any;\r\n    this._topPanels = null as any;\r\n    this._topPanelScrollers = null as any;\r\n    this._style = null as any;\r\n    this._topPanelScrollerL = null as any;\r\n    this._topPanelScrollerR = null as any;\r\n    this._topPanelL = null as any;\r\n    this._topPanelR = null as any;\r\n    this._paneHeaderL = null as any;\r\n    this._paneHeaderR = null as any;\r\n    this._paneTopL = null as any;\r\n    this._paneTopR = null as any;\r\n    this._paneBottomL = null as any;\r\n    this._paneBottomR = null as any;\r\n    this._viewport = null as any;\r\n    this._viewportTopL = null as any;\r\n    this._viewportTopR = null as any;\r\n    this._viewportBottomL = null as any;\r\n    this._viewportBottomR = null as any;\r\n    this._viewportScrollContainerX = null as any;\r\n    this._viewportScrollContainerY = null as any;\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Column Autosizing\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  /** Proportionally resize a specific column by its name, index or Id */\r\n  autosizeColumn(columnOrIndexOrId: number | string, isInit?: boolean) {\r\n    let colDef: C | null = null;\r\n    let colIndex = -1;\r\n    if (typeof columnOrIndexOrId === 'number') {\r\n      colDef = this.columns[columnOrIndexOrId];\r\n      colIndex = columnOrIndexOrId;\r\n    } else if (typeof columnOrIndexOrId === 'string') {\r\n      for (let i = 0; i < this.columns.length; i++) {\r\n        if (this.columns[i].id === columnOrIndexOrId) { colDef = this.columns[i]; colIndex = i; }\r\n      }\r\n    }\r\n    if (!colDef) {\r\n      return;\r\n    }\r\n    const gridCanvas = this.getCanvasNode(0, 0) as HTMLElement;\r\n    this.getColAutosizeWidth(colDef, colIndex, gridCanvas, isInit || false, colIndex);\r\n  }\r\n\r\n  protected treatAsLocked(autoSize: AutoSize = {}) {\r\n    // treat as locked (don't resize) if small and header is the widest part\r\n    return !autoSize.ignoreHeaderText\r\n      && !autoSize.sizeToRemaining\r\n      && (autoSize.contentSizePx === autoSize.headerWidthPx)\r\n      && ((autoSize.widthPx ?? 0) < 100);\r\n  }\r\n\r\n  /** Proportionately resizes all columns to fill available horizontal space. This does not take the cell contents into consideration. */\r\n  autosizeColumns(autosizeMode?: string, isInit?: boolean) {\r\n    this.cacheCssForHiddenInit();\r\n    this.internalAutosizeColumns(autosizeMode, isInit);\r\n    this.restoreCssFromHiddenInit();\r\n  }\r\n\r\n  protected internalAutosizeColumns(autosizeMode?: string, isInit?: boolean) {\r\n    // LogColWidths();\r\n    autosizeMode = autosizeMode || this._options.autosizeColsMode;\r\n    if (autosizeMode === GridAutosizeColsMode.LegacyForceFit || autosizeMode === GridAutosizeColsMode.LegacyOff) {\r\n      this.legacyAutosizeColumns();\r\n      return;\r\n    }\r\n\r\n    if (autosizeMode === GridAutosizeColsMode.None) {\r\n      return;\r\n    }\r\n\r\n    // test for brower canvas support, canvas_context!=null if supported\r\n    this.canvas = document.createElement('canvas');\r\n    if (this.canvas?.getContext) { this.canvas_context = this.canvas.getContext('2d'); }\r\n\r\n    // pass in the grid canvas\r\n    const gridCanvas = this.getCanvasNode(0, 0) as HTMLElement;\r\n    const viewportWidth = this.viewportHasVScroll ? this.viewportW - (this.scrollbarDimensions?.width ?? 0) : this.viewportW;\r\n\r\n    // iterate columns to get autosizes\r\n    let i: number;\r\n    let c: C;\r\n    let colWidth: number;\r\n    let reRender = false;\r\n    let totalWidth = 0;\r\n    let totalWidthLessSTR = 0;\r\n    let strColsMinWidth = 0;\r\n    let totalMinWidth = 0;\r\n    let totalLockedColWidth = 0;\r\n    for (i = 0; i < this.columns.length; i++) {\r\n      c = this.columns[i];\r\n      this.getColAutosizeWidth(c, i, gridCanvas, isInit || false, i);\r\n      totalLockedColWidth += (c.autoSize?.autosizeMode === ColAutosizeMode.Locked ? (c.width || 0) : (this.treatAsLocked(c.autoSize) ? c.autoSize?.widthPx || 0 : 0));\r\n      totalMinWidth += (c.autoSize?.autosizeMode === ColAutosizeMode.Locked ? (c.width || 0) : (this.treatAsLocked(c.autoSize) ? c.autoSize?.widthPx || 0 : c.minWidth || 0));\r\n      totalWidth += (c.autoSize?.widthPx || 0);\r\n      totalWidthLessSTR += (c.autoSize?.sizeToRemaining ? 0 : c.autoSize?.widthPx || 0);\r\n      strColsMinWidth += (c.autoSize?.sizeToRemaining ? c.minWidth || 0 : 0);\r\n    }\r\n    const strColTotalGuideWidth = totalWidth - totalWidthLessSTR;\r\n\r\n    if (autosizeMode === GridAutosizeColsMode.FitViewportToCols) {\r\n      // - if viewport with is outside MinViewportWidthPx and MaxViewportWidthPx, then the viewport is set to\r\n      //   MinViewportWidthPx or MaxViewportWidthPx and the FitColsToViewport algorithm is used\r\n      // - viewport is resized to fit columns\r\n      let setWidth = totalWidth + (this.scrollbarDimensions?.width ?? 0);\r\n      autosizeMode = GridAutosizeColsMode.IgnoreViewport;\r\n\r\n      if (this._options.viewportMaxWidthPx && setWidth > this._options.viewportMaxWidthPx) {\r\n        setWidth = this._options.viewportMaxWidthPx;\r\n        autosizeMode = GridAutosizeColsMode.FitColsToViewport;\r\n      } else if (this._options.viewportMinWidthPx && setWidth < this._options.viewportMinWidthPx) {\r\n        setWidth = this._options.viewportMinWidthPx;\r\n        autosizeMode = GridAutosizeColsMode.FitColsToViewport;\r\n      } else {\r\n        // falling back to IgnoreViewport will size the columns as-is, with render checking\r\n        // for (i = 0; i < columns.length; i++) { columns[i].width = columns[i].autoSize.widthPx; }\r\n      }\r\n      Utils.width(this._container, setWidth);\r\n    }\r\n\r\n    if (autosizeMode === GridAutosizeColsMode.FitColsToViewport) {\r\n      if (strColTotalGuideWidth > 0 && totalWidthLessSTR < viewportWidth - strColsMinWidth) {\r\n        // if addl space remains in the viewport and there are SizeToRemaining cols, just the SizeToRemaining cols expand proportionally to fill viewport\r\n        for (i = 0; i < this.columns.length; i++) {\r\n          c = this.columns[i];\r\n          if (!c || c.hidden) { continue; }\r\n\r\n          const totalSTRViewportWidth = viewportWidth - totalWidthLessSTR;\r\n          if (c.autoSize?.sizeToRemaining) {\r\n            colWidth = totalSTRViewportWidth * (c.autoSize?.widthPx || 0) / strColTotalGuideWidth;\r\n          } else {\r\n            colWidth = (c.autoSize?.widthPx || 0);\r\n          }\r\n          if (c.rerenderOnResize && (c.width || 0) !== colWidth) {\r\n            reRender = true;\r\n          }\r\n          c.width = colWidth;\r\n        }\r\n      } else if ((this._options.viewportSwitchToScrollModeWidthPercent && totalWidthLessSTR + strColsMinWidth > viewportWidth * this._options.viewportSwitchToScrollModeWidthPercent / 100)\r\n        || (totalMinWidth > viewportWidth)) {\r\n        // if the total columns width is wider than the viewport by switchToScrollModeWidthPercent, switch to IgnoreViewport mode\r\n        autosizeMode = GridAutosizeColsMode.IgnoreViewport;\r\n      } else {\r\n        // otherwise (ie. no SizeToRemaining cols or viewport smaller than columns) all cols other than 'Locked' scale in proportion to fill viewport\r\n        // and SizeToRemaining get minWidth\r\n        let unallocatedColWidth = totalWidthLessSTR - totalLockedColWidth;\r\n        let unallocatedViewportWidth = viewportWidth - totalLockedColWidth - strColsMinWidth;\r\n        for (i = 0; i < this.columns.length; i++) {\r\n          c = this.columns[i];\r\n          if (!c || c.hidden) { continue; }\r\n\r\n          colWidth = c.width || 0;\r\n          if (c.autoSize?.autosizeMode !== ColAutosizeMode.Locked && !this.treatAsLocked(c.autoSize)) {\r\n            if (c.autoSize?.sizeToRemaining) {\r\n              colWidth = c.minWidth || 0;\r\n            } else {\r\n              // size width proportionally to free space (we know we have enough room due to the earlier calculations)\r\n              colWidth = unallocatedViewportWidth / unallocatedColWidth * (c.autoSize?.widthPx || 0) - 1;\r\n              if (colWidth < (c.minWidth || 0)) {\r\n                colWidth = c.minWidth || 0;\r\n              }\r\n\r\n              // remove the just allocated widths from the allocation pool\r\n              unallocatedColWidth -= (c.autoSize?.widthPx || 0);\r\n              unallocatedViewportWidth -= colWidth;\r\n            }\r\n          }\r\n          if (this.treatAsLocked(c.autoSize)) {\r\n            colWidth = (c.autoSize?.widthPx || 0);\r\n            if (colWidth < (c.minWidth || 0)) {\r\n              colWidth = c.minWidth || 0;\r\n            }\r\n          }\r\n          if (c.rerenderOnResize && c.width !== colWidth) {\r\n            reRender = true;\r\n          }\r\n          c.width = colWidth;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (autosizeMode === GridAutosizeColsMode.IgnoreViewport) {\r\n      // just size columns as-is\r\n      for (i = 0; i < this.columns.length; i++) {\r\n        if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n        colWidth = this.columns[i].autoSize?.widthPx || 0;\r\n        if (this.columns[i].rerenderOnResize && this.columns[i].width !== colWidth) {\r\n          reRender = true;\r\n        }\r\n        this.columns[i].width = colWidth;\r\n      }\r\n    }\r\n\r\n    this.reRenderColumns(reRender);\r\n  }\r\n\r\n  protected LogColWidths() {\r\n    let s = 'Col Widths:';\r\n    for (let i = 0; i < this.columns.length; i++) { s += ' ' + (this.columns[i].hidden ? 'H' : this.columns[i].width); }\r\n    console.log(s);\r\n  }\r\n\r\n  protected getColAutosizeWidth(columnDef: C, colIndex: number, gridCanvas: HTMLElement, isInit: boolean, colArrayIndex: number) {\r\n    const autoSize = columnDef.autoSize as AutoSize;\r\n\r\n    // set to width as default\r\n    autoSize.widthPx = columnDef.width;\r\n    if (autoSize.autosizeMode === ColAutosizeMode.Locked\r\n      || autoSize.autosizeMode === ColAutosizeMode.Guide) {\r\n      return;\r\n    }\r\n\r\n    const dl = this.getDataLength(); // getDataItem();\r\n    const isoDateRegExp = new RegExp(/\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d{3})?Z/);\r\n\r\n    // ContentIntelligent takes settings from column data type\r\n    if (autoSize.autosizeMode === ColAutosizeMode.ContentIntelligent) {\r\n      // default to column colDataTypeOf (can be used if initially there are no data rows)\r\n      let colDataTypeOf = autoSize.colDataTypeOf;\r\n      let colDataItem: any;\r\n      if (dl > 0) {\r\n        const tempRow = this.getDataItem(0);\r\n        if (tempRow) {\r\n          colDataItem = tempRow[columnDef.field as keyof TData];\r\n\r\n          // check for dates in hiding\r\n          if (isoDateRegExp.test(colDataItem)) { colDataItem = Date.parse(colDataItem); }\r\n\r\n          colDataTypeOf = typeof colDataItem;\r\n          if (colDataTypeOf === 'object') {\r\n            if (colDataItem instanceof Date) { colDataTypeOf = 'date'; }\r\n            if (typeof moment !== 'undefined' && colDataItem instanceof moment) { colDataTypeOf = 'moment'; }\r\n          }\r\n        }\r\n      }\r\n      if (colDataTypeOf === 'boolean') {\r\n        autoSize.colValueArray = [true, false];\r\n      }\r\n      if (colDataTypeOf === 'number') {\r\n        autoSize.valueFilterMode = ValueFilterMode.GetGreatestAndSub;\r\n        autoSize.rowSelectionMode = RowSelectionMode.AllRows;\r\n      }\r\n      if (colDataTypeOf === 'string') {\r\n        autoSize.valueFilterMode = ValueFilterMode.GetLongestText;\r\n        autoSize.rowSelectionMode = RowSelectionMode.AllRows;\r\n        autoSize.allowAddlPercent = 5;\r\n      }\r\n      if (colDataTypeOf === 'date') {\r\n        autoSize.colValueArray = [new Date(2009, 8, 30, 12, 20, 20)]; // Sep 30th 2009, 12:20:20 AM\r\n      }\r\n      if (colDataTypeOf === 'moment' && typeof moment !== 'undefined') {\r\n        autoSize.colValueArray = [moment([2009, 8, 30, 12, 20, 20])]; // Sep 30th 2009, 12:20:20 AM\r\n      }\r\n    }\r\n\r\n    // at this point, the autosizeMode is effectively 'Content', so proceed to get size\r\n    let colWidth = autoSize.contentSizePx = this.getColContentSize(columnDef, colIndex, gridCanvas, isInit, colArrayIndex);\r\n\r\n    if (colWidth === 0) {\r\n      colWidth = autoSize.widthPx || 0;\r\n    }\r\n\r\n    const addlPercentMultiplier = (autoSize.allowAddlPercent ? (1 + autoSize.allowAddlPercent / 100) : 1);\r\n    colWidth = colWidth * addlPercentMultiplier + (this._options.autosizeColPaddingPx || 0);\r\n    if (columnDef.minWidth && colWidth < columnDef.minWidth) { colWidth = columnDef.minWidth; }\r\n    if (columnDef.maxWidth && colWidth > columnDef.maxWidth) { colWidth = columnDef.maxWidth; }\r\n\r\n    if (autoSize.autosizeMode === ColAutosizeMode.ContentExpandOnly || ((columnDef?.editor as any)?.ControlFillsColumn)) {\r\n      // only use content width if it's wider than the default column width (this is used for dropdowns and other fixed width controls)\r\n      if (colWidth < (columnDef.width || 0)) {\r\n        colWidth = columnDef.width || 0;\r\n      }\r\n    }\r\n    autoSize.widthPx = colWidth;\r\n  }\r\n\r\n  protected getColContentSize(columnDef: C, colIndex: number, gridCanvas: HTMLElement, isInit: boolean, colArrayIndex: number) {\r\n    const autoSize = columnDef.autoSize as AutoSize;\r\n    let widthAdjustRatio = 1;\r\n\r\n    // at this point, the autosizeMode is effectively 'Content', so proceed to get size\r\n\r\n    // get header width, if we are taking notice of it\r\n    let i: number;\r\n    let tempVal: any;\r\n    let maxLen = 0;\r\n    let maxColWidth = 0;\r\n    autoSize.headerWidthPx = 0;\r\n    if (!autoSize.ignoreHeaderText) {\r\n      autoSize.headerWidthPx = this.getColHeaderWidth(columnDef);\r\n    }\r\n    if (autoSize.headerWidthPx === 0) {\r\n      autoSize.headerWidthPx = (columnDef.width ? columnDef.width\r\n        : (columnDef.maxWidth ? columnDef.maxWidth\r\n          : (columnDef.minWidth ? columnDef.minWidth : 20)\r\n        )\r\n      );\r\n    }\r\n\r\n    if (autoSize.colValueArray) {\r\n      // if an array of values are specified, just pass them in instead of data\r\n      maxColWidth = this.getColWidth(columnDef, gridCanvas, autoSize.colValueArray as any);\r\n      return Math.max(autoSize.headerWidthPx, maxColWidth);\r\n    }\r\n\r\n    // select rows to evaluate using rowSelectionMode and rowSelectionCount\r\n    const rowInfo = {} as RowInfo;\r\n    rowInfo.colIndex = colIndex;\r\n    rowInfo.rowCount = this.getDataLength();\r\n    rowInfo.startIndex = 0;\r\n    rowInfo.endIndex = rowInfo.rowCount - 1;\r\n    rowInfo.valueArr = null;\r\n    rowInfo.getRowVal = (j: number) => this.getDataItem(j)[columnDef.field as keyof TData];\r\n\r\n    const rowSelectionMode = (isInit ? autoSize.rowSelectionModeOnInit : undefined) || autoSize.rowSelectionMode;\r\n\r\n    if (rowSelectionMode === RowSelectionMode.FirstRow) { rowInfo.endIndex = 0; }\r\n    if (rowSelectionMode === RowSelectionMode.LastRow) { rowInfo.endIndex = rowInfo.startIndex = rowInfo.rowCount - 1; }\r\n    if (rowSelectionMode === RowSelectionMode.FirstNRows) { rowInfo.endIndex = Math.min(autoSize.rowSelectionCount || 0, rowInfo.rowCount) - 1; }\r\n\r\n    // now use valueFilterMode to further filter selected rows\r\n    if (autoSize.valueFilterMode === ValueFilterMode.DeDuplicate) {\r\n      const rowsDict: any = {};\r\n      for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n        rowsDict[rowInfo.getRowVal(i)] = true;\r\n      }\r\n      if (Object.keys) {\r\n        rowInfo.valueArr = Object.keys(rowsDict);\r\n      } else {\r\n        rowInfo.valueArr = [];\r\n        for (const v in rowsDict) {\r\n          if (rowsDict) {\r\n            rowInfo.valueArr.push(v);\r\n          }\r\n        }\r\n      }\r\n      rowInfo.startIndex = 0;\r\n      rowInfo.endIndex = rowInfo.length - 1;\r\n    }\r\n\r\n    if (autoSize.valueFilterMode === ValueFilterMode.GetGreatestAndSub) {\r\n      // get greatest abs value in data\r\n      let maxVal;\r\n      let maxAbsVal = 0;\r\n      for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n        tempVal = rowInfo.getRowVal(i);\r\n        if (Math.abs(tempVal) > maxAbsVal) {\r\n          maxVal = tempVal; maxAbsVal = Math.abs(tempVal);\r\n        }\r\n      }\r\n      // now substitute a '9' for all characters (to get widest width) and convert back to a number\r\n      maxVal = '' + maxVal;\r\n      maxVal = Array(maxVal.length + 1).join('9');\r\n      maxVal = +maxVal;\r\n\r\n      rowInfo.valueArr = [maxVal];\r\n      rowInfo.startIndex = rowInfo.endIndex = 0;\r\n    }\r\n\r\n    if (autoSize.valueFilterMode === ValueFilterMode.GetLongestTextAndSub) {\r\n      // get greatest abs value in data\r\n      for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n        tempVal = rowInfo.getRowVal(i);\r\n        if ((tempVal || '').length > maxLen) { maxLen = tempVal.length; }\r\n      }\r\n      // now substitute a 'm' for all characters\r\n      tempVal = Array(maxLen + 1).join('m');\r\n      widthAdjustRatio = this._options.autosizeTextAvgToMWidthRatio || 0;\r\n\r\n      rowInfo.maxLen = maxLen;\r\n      rowInfo.valueArr = [tempVal];\r\n      rowInfo.startIndex = rowInfo.endIndex = 0;\r\n    }\r\n\r\n    if (autoSize.valueFilterMode === ValueFilterMode.GetLongestText) {\r\n      // get greatest abs value in data\r\n      maxLen = 0; let maxIndex = 0;\r\n      for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n        tempVal = rowInfo.getRowVal(i);\r\n        if ((tempVal || '').length > maxLen) { maxLen = tempVal.length; maxIndex = i; }\r\n      }\r\n      // now substitute a 'c' for all characters\r\n      tempVal = rowInfo.getRowVal(maxIndex);\r\n      rowInfo.maxLen = maxLen;\r\n      rowInfo.valueArr = [tempVal];\r\n      rowInfo.startIndex = rowInfo.endIndex = 0;\r\n    }\r\n\r\n    // !!! HACK !!!!\r\n    if (rowInfo.maxLen && rowInfo.maxLen > 30 && colArrayIndex > 1) { autoSize.sizeToRemaining = true; }\r\n    maxColWidth = this.getColWidth(columnDef, gridCanvas, rowInfo) * widthAdjustRatio;\r\n    return Math.max(autoSize.headerWidthPx, maxColWidth);\r\n  }\r\n\r\n  protected getColWidth(columnDef: C, gridCanvas: HTMLElement, rowInfo: RowInfo) {\r\n    const rowEl = Utils.createDomElement('div', { className: 'slick-row ui-widget-content' }, gridCanvas);\r\n    const cellEl = Utils.createDomElement('div', { className: 'slick-cell' }, rowEl);\r\n\r\n    cellEl.style.position = 'absolute';\r\n    cellEl.style.visibility = 'hidden';\r\n    cellEl.style.textOverflow = 'initial';\r\n    cellEl.style.whiteSpace = 'nowrap';\r\n\r\n    let i: number;\r\n    let len: number;\r\n    let max = 0;\r\n    let maxText = '';\r\n    let formatterResult: string | FormatterResultWithHtml | FormatterResultWithText | HTMLElement | DocumentFragment;\r\n    let val: any;\r\n\r\n    // get mode - if text only display, use canvas otherwise html element\r\n    let useCanvas = (columnDef.autoSize!.widthEvalMode === WidthEvalMode.TextOnly);\r\n\r\n    if (columnDef.autoSize?.widthEvalMode === WidthEvalMode.Auto) {\r\n      const noFormatter = !columnDef.formatterOverride && !columnDef.formatter;\r\n      const formatterIsText = ((columnDef?.formatterOverride as { ReturnsTextOnly: boolean })?.ReturnsTextOnly)\r\n        || (!columnDef.formatterOverride && (columnDef.formatter as any)?.ReturnsTextOnly);\r\n      useCanvas = noFormatter || formatterIsText;\r\n    }\r\n\r\n    // use canvas - very fast, but text-only\r\n    if (this.canvas_context && useCanvas) {\r\n      const style = getComputedStyle(cellEl);\r\n      this.canvas_context.font = style.fontSize + ' ' + style.fontFamily;\r\n      for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n        // row is either an array or values or a single value\r\n        val = (rowInfo.valueArr ? rowInfo.valueArr[i] : rowInfo.getRowVal(i));\r\n        if (columnDef.formatterOverride) {\r\n          // use formatterOverride as first preference\r\n          formatterResult = (columnDef.formatterOverride as FormatterOverrideCallback)(i, rowInfo.colIndex, val, columnDef, this.getDataItem(i), this as unknown as SlickGridModel);\r\n        } else if (columnDef.formatter) {\r\n          // otherwise, use formatter\r\n          formatterResult = columnDef.formatter(i, rowInfo.colIndex, val, columnDef, this.getDataItem(i), this as unknown as SlickGridModel);\r\n        } else {\r\n          // otherwise, use plain text\r\n          formatterResult = '' + val;\r\n        }\r\n        len = formatterResult ? this.canvas_context.measureText(formatterResult as string).width : 0;\r\n        if (len > max) {\r\n          max = len;\r\n          maxText = formatterResult as string;\r\n        }\r\n      }\r\n\r\n      cellEl.textContent = maxText;\r\n      len = cellEl.offsetWidth;\r\n\r\n      rowEl.remove();\r\n      return len;\r\n    }\r\n\r\n    for (i = rowInfo.startIndex; i <= rowInfo.endIndex; i++) {\r\n      val = (rowInfo.valueArr ? rowInfo.valueArr[i] : rowInfo.getRowVal(i));\r\n      if (columnDef.formatterOverride) {\r\n        // use formatterOverride as first preference\r\n        formatterResult = (columnDef.formatterOverride as FormatterOverrideCallback)(i, rowInfo.colIndex, val, columnDef, this.getDataItem(i), this as unknown as SlickGridModel);\r\n      } else if (columnDef.formatter) {\r\n        // otherwise, use formatter\r\n        formatterResult = columnDef.formatter(i, rowInfo.colIndex, val, columnDef, this.getDataItem(i), this as unknown as SlickGridModel);\r\n      } else {\r\n        // otherwise, use plain text\r\n        formatterResult = '' + val;\r\n      }\r\n      this.applyFormatResultToCellNode(formatterResult, cellEl);\r\n      len = cellEl.offsetWidth;\r\n      if (len > max) { max = len; }\r\n    }\r\n\r\n    rowEl.remove();\r\n    return max;\r\n  }\r\n\r\n  protected getColHeaderWidth(columnDef: C) {\r\n    let width = 0;\r\n    // if (columnDef && (!columnDef.resizable || columnDef._autoCalcWidth === true)) { return; }\r\n    const headerColElId = this.getUID() + columnDef.id;\r\n    let headerColEl = document.getElementById(headerColElId) as HTMLElement;\r\n    const dummyHeaderColElId = `${headerColElId}_`;\r\n    const clone = headerColEl.cloneNode(true) as HTMLElement;\r\n    if (headerColEl) {\r\n      // headers have been created, use clone technique\r\n      clone.id = dummyHeaderColElId;\r\n      clone.style.cssText = 'position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;';\r\n      headerColEl.parentNode!.insertBefore(clone, headerColEl);\r\n      width = clone.offsetWidth;\r\n      clone.parentNode!.removeChild(clone);\r\n    } else {\r\n      // headers have not yet been created, create a new node\r\n      const header = this.getHeader(columnDef) as HTMLElement;\r\n      headerColEl = Utils.createDomElement('div', { id: dummyHeaderColElId, className: 'ui-state-default slick-state-default slick-header-column' }, header);\r\n      const colNameElm = Utils.createDomElement('span', { className: 'slick-column-name' }, headerColEl);\r\n      this.applyHtmlCode(colNameElm, columnDef.name!);\r\n      clone.style.cssText = 'position: absolute; visibility: hidden;right: auto;text-overflow: initial;white-space: nowrap;';\r\n      if (columnDef.headerCssClass) {\r\n        headerColEl.classList.add(...Utils.classNameToList(columnDef.headerCssClass));\r\n      }\r\n      width = headerColEl.offsetWidth;\r\n      header.removeChild(headerColEl);\r\n    }\r\n    return width;\r\n  }\r\n\r\n  protected legacyAutosizeColumns() {\r\n    let i;\r\n    let c: C | undefined;\r\n    let shrinkLeeway = 0;\r\n    let total = 0;\r\n    let prevTotal = 0;\r\n    const widths: number[] = [];\r\n    const availWidth = this.viewportHasVScroll ? this.viewportW - (this.scrollbarDimensions?.width ?? 0) : this.viewportW;\r\n\r\n    for (i = 0; i < this.columns.length; i++) {\r\n      c = this.columns[i];\r\n      if (!c || c.hidden) {\r\n        widths.push(0);\r\n        continue;\r\n      }\r\n      widths.push(c.width || 0);\r\n      total += c.width || 0;\r\n      if (c.resizable) {\r\n        shrinkLeeway += (c.width || 0) - Math.max((c.minWidth || 0), this.absoluteColumnMinWidth);\r\n      }\r\n    }\r\n\r\n    // shrink\r\n    prevTotal = total;\r\n    while (total > availWidth && shrinkLeeway) {\r\n      const shrinkProportion = (total - availWidth) / shrinkLeeway;\r\n      for (i = 0; i < this.columns.length && total > availWidth; i++) {\r\n        c = this.columns[i];\r\n        if (!c || c.hidden) { continue; }\r\n        const width = widths[i];\r\n        if (!c.resizable || width <= c.minWidth! || width <= this.absoluteColumnMinWidth) {\r\n          continue;\r\n        }\r\n        const absMinWidth = Math.max(c.minWidth!, this.absoluteColumnMinWidth);\r\n        let shrinkSize = Math.floor(shrinkProportion * (width - absMinWidth)) || 1;\r\n        shrinkSize = Math.min(shrinkSize, width - absMinWidth);\r\n        total -= shrinkSize;\r\n        shrinkLeeway -= shrinkSize;\r\n        widths[i] -= shrinkSize;\r\n      }\r\n      if (prevTotal <= total) {  // avoid infinite loop\r\n        break;\r\n      }\r\n      prevTotal = total;\r\n    }\r\n\r\n    // grow\r\n    prevTotal = total;\r\n    while (total < availWidth) {\r\n      const growProportion = availWidth / total;\r\n      for (i = 0; i < this.columns.length && total < availWidth; i++) {\r\n        c = this.columns[i];\r\n        if (!c || c.hidden) { continue; }\r\n        const currentWidth = widths[i];\r\n        let growSize;\r\n\r\n        if (!c.resizable || c.maxWidth! <= currentWidth) {\r\n          growSize = 0;\r\n        } else {\r\n          growSize = Math.min(Math.floor(growProportion * currentWidth) - currentWidth, (c.maxWidth! - currentWidth) || 1000000) || 1;\r\n        }\r\n        total += growSize;\r\n        widths[i] += (total <= availWidth ? growSize : 0);\r\n      }\r\n      if (prevTotal >= total) {  // avoid infinite loop\r\n        break;\r\n      }\r\n      prevTotal = total;\r\n    }\r\n\r\n    let reRender = false;\r\n    for (i = 0; i < this.columns.length; i++) {\r\n      if (!c || c.hidden) { continue; }\r\n\r\n      if (this.columns[i].rerenderOnResize && this.columns[i].width !== widths[i]) {\r\n        reRender = true;\r\n      }\r\n      this.columns[i].width = widths[i];\r\n    }\r\n\r\n    this.reRenderColumns(reRender);\r\n  }\r\n\r\n  /**\r\n   * Apply Columns Widths in the UI and optionally invalidate & re-render the columns when specified\r\n   * @param {Boolean} shouldReRender - should we invalidate and re-render the grid?\r\n   */\r\n  reRenderColumns(reRender?: boolean) {\r\n    this.applyColumnHeaderWidths();\r\n    this.updateCanvasWidth(true);\r\n\r\n    this.trigger(this.onAutosizeColumns, { columns: this.columns });\r\n\r\n    if (reRender) {\r\n      this.invalidateAllRows();\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  getVisibleColumns() {\r\n    return this.columns.filter(c => !c.hidden);\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // General\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n  protected trigger<ArgType = any>(evt: SlickEvent_, args?: ArgType, e?: Event | SlickEventData_) {\r\n    const event: SlickEventData_ = (e || new SlickEventData(e, args)) as SlickEventData_;\r\n    const eventArgs = (args || {}) as ArgType & { grid: SlickGrid<TData, C, O>; };\r\n    eventArgs.grid = this;\r\n    return evt.notify(eventArgs, event, this);\r\n  }\r\n\r\n  /** Get Editor lock */\r\n  getEditorLock() {\r\n    return this._options.editorLock as SlickEditorLock;\r\n  }\r\n\r\n  /** Get Editor Controller */\r\n  getEditController() {\r\n    return this.editController;\r\n  }\r\n\r\n  /**\r\n   * Returns the index of a column with a given id. Since columns can be reordered by the user, this can be used to get the column definition independent of the order:\r\n   * @param {String | Number} id A column id.\r\n   */\r\n  getColumnIndex(id: number | string): number {\r\n    return this.columnsById[id];\r\n  }\r\n\r\n  protected applyColumnHeaderWidths() {\r\n    if (!this.initialized) {\r\n      return;\r\n    }\r\n\r\n    let columnIndex = 0;\r\n    const vc = this.getVisibleColumns();\r\n    this._headers.forEach((header) => {\r\n      for (let i = 0; i < header.children.length; i++, columnIndex++) {\r\n        const h = header.children[i] as HTMLElement;\r\n        const col = vc[columnIndex] || {};\r\n        const width = (col.width || 0) - this.headerColumnWidthDiff;\r\n        if (Utils.width(h) !== width) {\r\n          Utils.width(h, width);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.updateColumnCaches();\r\n  }\r\n\r\n  protected applyColumnWidths() {\r\n    let x = 0;\r\n    let w = 0;\r\n    let rule: any;\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      if (!this.columns[i]?.hidden) {\r\n        w = this.columns[i].width || 0;\r\n\r\n        rule = this.getColumnCssRules(i);\r\n        rule.left.style.left = `${x}px`;\r\n        rule.right.style.right = (((this._options.frozenColumn !== -1 && i > this._options.frozenColumn!) ? this.canvasWidthR : this.canvasWidthL) - x - w) + 'px';\r\n\r\n        // If this column is frozen, reset the css left value since the\r\n        // column starts in a new viewport.\r\n        if (this._options.frozenColumn !== i) {\r\n          x += this.columns[i].width!;\r\n        }\r\n      }\r\n      if (this._options.frozenColumn === i) {\r\n        x = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Accepts a columnId string and an ascending boolean. Applies a sort glyph in either ascending or descending form to the header of the column. Note that this does not actually sort the column. It only adds the sort glyph to the header.\r\n   * @param {String | Number} columnId\r\n   * @param {Boolean} ascending\r\n   */\r\n  setSortColumn(columnId: number | string, ascending: boolean) {\r\n    this.setSortColumns([{ columnId, sortAsc: ascending }]);\r\n  }\r\n\r\n  /**\r\n   * Get column by index\r\n   * @param {Number} id - column index\r\n   * @returns\r\n   */\r\n  getColumnByIndex(id: number) {\r\n    let result: HTMLElement | undefined;\r\n    this._headers.every((header) => {\r\n      const length = header.children.length;\r\n      if (id < length) {\r\n        result = header.children[id] as HTMLElement;\r\n        return false;\r\n      }\r\n      id -= length;\r\n      return true;\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Accepts an array of objects in the form [ { columnId: [string], sortAsc: [boolean] }, ... ]. When called, this will apply a sort glyph in either ascending or descending form to the header of each column specified in the array. Note that this does not actually sort the column. It only adds the sort glyph to the header\r\n   * @param {ColumnSort[]} cols - column sort\r\n   */\r\n  setSortColumns(cols: ColumnSort[]) {\r\n    this.sortColumns = cols;\r\n\r\n    const numberCols = this._options.numberedMultiColumnSort && this.sortColumns.length > 1;\r\n    this._headers.forEach((header) => {\r\n      let indicators = header.querySelectorAll('.slick-header-column-sorted');\r\n      indicators.forEach((indicator) => {\r\n        indicator.classList.remove('slick-header-column-sorted');\r\n      });\r\n\r\n      indicators = header.querySelectorAll('.slick-sort-indicator');\r\n      indicators.forEach((indicator) => {\r\n        indicator.classList.remove('slick-sort-indicator-asc');\r\n        indicator.classList.remove('slick-sort-indicator-desc');\r\n      });\r\n      indicators = header.querySelectorAll('.slick-sort-indicator-numbered');\r\n      indicators.forEach((el) => {\r\n        el.textContent = '';\r\n      });\r\n    });\r\n\r\n    let i = 1;\r\n    this.sortColumns.forEach((col) => {\r\n      if (!Utils.isDefined(col.sortAsc)) {\r\n        col.sortAsc = true;\r\n      }\r\n\r\n      const columnIndex = this.getColumnIndex(col.columnId);\r\n      if (Utils.isDefined(columnIndex)) {\r\n        const column = this.getColumnByIndex(columnIndex);\r\n        if (column) {\r\n          column.classList.add('slick-header-column-sorted');\r\n          let indicator = column.querySelector('.slick-sort-indicator');\r\n          indicator?.classList.add(col.sortAsc ? 'slick-sort-indicator-asc' : 'slick-sort-indicator-desc');\r\n\r\n          if (numberCols) {\r\n            indicator = column.querySelector('.slick-sort-indicator-numbered');\r\n            if (indicator) {\r\n              indicator.textContent = String(i);\r\n            }\r\n          }\r\n        }\r\n      }\r\n      i++;\r\n    });\r\n  }\r\n\r\n  /** Get sorted columns **/\r\n  getSortColumns(): ColumnSort[] {\r\n    return this.sortColumns;\r\n  }\r\n\r\n  protected handleSelectedRangesChanged(e: SlickEventData_, ranges: SlickRange_[]) {\r\n    const ne = e.getNativeEvent<CustomEvent>();\r\n    const previousSelectedRows = this.selectedRows.slice(0); // shallow copy previously selected rows for later comparison\r\n    this.selectedRows = [];\r\n    const hash: CssStyleHash = {};\r\n    for (let i = 0; i < ranges.length; i++) {\r\n      for (let j = ranges[i].fromRow; j <= ranges[i].toRow; j++) {\r\n        if (!hash[j]) {  // prevent duplicates\r\n          this.selectedRows.push(j);\r\n          hash[j] = {};\r\n        }\r\n        for (let k = ranges[i].fromCell; k <= ranges[i].toCell; k++) {\r\n          if (this.canCellBeSelected(j, k)) {\r\n            hash[j][this.columns[k].id] = this._options.selectedCellCssClass;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this.setCellCssStyles(this._options.selectedCellCssClass || '', hash);\r\n\r\n    if (this.simpleArrayEquals(previousSelectedRows, this.selectedRows)) {\r\n      const caller = ne?.detail?.caller ?? 'click';\r\n      const newSelectedAdditions = this.getSelectedRows().filter((i) => previousSelectedRows.indexOf(i) < 0);\r\n      const newSelectedDeletions = previousSelectedRows.filter((i) => this.getSelectedRows().indexOf(i) < 0);\r\n\r\n      this.trigger(this.onSelectedRowsChanged, {\r\n        rows: this.getSelectedRows(),\r\n        previousSelectedRows,\r\n        caller,\r\n        changedSelectedRows: newSelectedAdditions,\r\n        changedUnselectedRows: newSelectedDeletions\r\n      }, e);\r\n    }\r\n  }\r\n\r\n  // compare 2 simple arrays (integers or strings only, do not use to compare object arrays)\r\n  simpleArrayEquals(arr1: any[], arr2: any[]) {\r\n    return Array.isArray(arr1) && Array.isArray(arr2) && arr2.sort().toString() !== arr1.sort().toString();\r\n  }\r\n\r\n  /** Returns an array of column definitions. */\r\n  getColumns() {\r\n    return this.columns;\r\n  }\r\n\r\n  protected updateColumnCaches() {\r\n    // Pre-calculate cell boundaries.\r\n    this.columnPosLeft = [];\r\n    this.columnPosRight = [];\r\n    let x = 0;\r\n    for (let i = 0, ii = this.columns.length; i < ii; i++) {\r\n      if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n      this.columnPosLeft[i] = x;\r\n      this.columnPosRight[i] = x + (this.columns[i].width || 0);\r\n\r\n      if (this._options.frozenColumn === i) {\r\n        x = 0;\r\n      } else {\r\n        x += this.columns[i].width || 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  protected updateColumnProps() {\r\n    this.columnsById = {};\r\n    for (let i = 0; i < this.columns.length; i++) {\r\n      let m: C = this.columns[i];\r\n      if (m.width) {\r\n        m.widthRequest = m.width;\r\n      }\r\n\r\n      if (this._options.mixinDefaults) {\r\n        Utils.applyDefaults(m, this._columnDefaults);\r\n        if (!m.autoSize) { m.autoSize = {}; }\r\n        Utils.applyDefaults(m.autoSize, this._columnAutosizeDefaults);\r\n      } else {\r\n        m = this.columns[i] = Utils.extend({}, this._columnDefaults, m);\r\n        m.autoSize = Utils.extend({}, this._columnAutosizeDefaults, m.autoSize);\r\n      }\r\n\r\n      this.columnsById[m.id] = i;\r\n      if (m.minWidth && ((m.width || 0) < m.minWidth)) {\r\n        m.width = m.minWidth;\r\n      }\r\n      if (m.maxWidth && ((m.width || 0) > m.maxWidth)) {\r\n        m.width = m.maxWidth;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets grid columns. Column headers will be recreated and all rendered rows will be removed. To rerender the grid (if necessary), call render().\r\n   * @param {Column[]} columnDefinitions An array of column definitions.\r\n   */\r\n  setColumns(columnDefinitions: C[]) {\r\n    this.trigger(this.onBeforeSetColumns, { previousColumns: this.columns, newColumns: columnDefinitions, grid: this });\r\n    this.columns = columnDefinitions;\r\n    this.updateColumnsInternal();\r\n  }\r\n\r\n  /** Update columns for when a hidden property has changed but the column list itself has not changed. */\r\n  updateColumns() {\r\n    this.trigger(this.onBeforeUpdateColumns, { columns: this.columns, grid: this });\r\n    this.updateColumnsInternal();\r\n  }\r\n\r\n  protected updateColumnsInternal() {\r\n    this.updateColumnProps();\r\n    this.updateColumnCaches();\r\n\r\n    if (this.initialized) {\r\n      this.setPaneVisibility();\r\n      this.setOverflow();\r\n\r\n      this.invalidateAllRows();\r\n      this.createColumnHeaders();\r\n      this.createColumnFooter();\r\n      this.removeCssRules();\r\n      this.createCssRules();\r\n      this.resizeCanvas();\r\n      this.updateCanvasWidth();\r\n      this.applyColumnHeaderWidths();\r\n      this.applyColumnWidths();\r\n      this.handleScroll();\r\n      this.getSelectionModel()?.refreshSelections();\r\n    }\r\n  }\r\n\r\n  /** Returns an object containing all of the Grid options set on the grid. See a list of Grid Options here.  */\r\n  getOptions() {\r\n    return this._options;\r\n  }\r\n\r\n  /**\r\n   * Extends grid options with a given hash. If an there is an active edit, the grid will attempt to commit the changes and only continue if the attempt succeeds.\r\n   * @param {Object} options - an object with configuration options.\r\n   * @param {Boolean} [suppressRender] - do we want to supress the grid re-rendering? (defaults to false)\r\n   * @param {Boolean} [suppressColumnSet] - do we want to supress the columns set, via \"setColumns()\" method? (defaults to false)\r\n   * @param {Boolean} [suppressSetOverflow] - do we want to suppress the call to `setOverflow`\r\n   */\r\n  setOptions(newOptions: Partial<O>, suppressRender?: boolean, suppressColumnSet?: boolean, suppressSetOverflow?: boolean): void {\r\n    this.prepareForOptionsChange();\r\n\r\n    if (this._options.enableAddRow !== newOptions.enableAddRow) {\r\n      this.invalidateRow(this.getDataLength());\r\n    }\r\n\r\n    // before applying column freeze, we need our viewports to be scrolled back to left to avoid misaligned column headers\r\n    if (newOptions.frozenColumn) {\r\n      this.getViewports().forEach(vp => vp.scrollLeft = 0);\r\n      this.handleScroll(); // trigger scroll to realign column headers as well\r\n    }\r\n\r\n    const originalOptions = Utils.extend(true, {}, this._options);\r\n    this._options = Utils.extend(this._options, newOptions);\r\n    this.trigger(this.onSetOptions, { optionsBefore: originalOptions, optionsAfter: this._options });\r\n\r\n    this.internal_setOptions(suppressRender, suppressColumnSet, suppressSetOverflow);\r\n  }\r\n\r\n  /**\r\n   * If option.mixinDefaults is true then external code maintains a reference to the options object. In this case there is no need\r\n   * to call setOptions() - changes can be made directly to the object. However setOptions() also performs some recalibration of the\r\n   * grid in reaction to changed options. activateChangedOptions call the same recalibration routines as setOptions() would have.\r\n   * @param {Boolean} [suppressRender] - do we want to supress the grid re-rendering? (defaults to false)\r\n   * @param {Boolean} [suppressColumnSet] - do we want to supress the columns set, via \"setColumns()\" method? (defaults to false)\r\n   * @param {Boolean} [suppressSetOverflow] - do we want to suppress the call to `setOverflow`\r\n   */\r\n  activateChangedOptions(suppressRender?: boolean, suppressColumnSet?: boolean, suppressSetOverflow?: boolean): void {\r\n    this.prepareForOptionsChange();\r\n    this.invalidateRow(this.getDataLength());\r\n\r\n    this.trigger(this.onActivateChangedOptions, { options: this._options });\r\n\r\n    this.internal_setOptions(suppressRender, suppressColumnSet, suppressSetOverflow);\r\n  }\r\n\r\n  protected prepareForOptionsChange() {\r\n    if (!this.getEditorLock().commitCurrentEdit()) {\r\n      return;\r\n    }\r\n\r\n    this.makeActiveCellNormal();\r\n  }\r\n\r\n  protected internal_setOptions(suppressRender?: boolean, suppressColumnSet?: boolean, suppressSetOverflow?: boolean): void {\r\n    if (this._options.showColumnHeader !== undefined) {\r\n      this.setColumnHeaderVisibility(this._options.showColumnHeader);\r\n    }\r\n    this.validateAndEnforceOptions();\r\n    this.setFrozenOptions();\r\n\r\n    // when user changed frozen row option, we need to force a recalculation of each viewport heights\r\n    if (this._options.frozenBottom !== undefined) {\r\n      this.enforceFrozenRowHeightRecalc = true;\r\n    }\r\n\r\n    this._viewport.forEach((view) => {\r\n      view.style.overflowY = this._options.autoHeight ? 'hidden' : 'auto';\r\n    });\r\n    if (!suppressRender) {\r\n      this.render();\r\n    }\r\n\r\n    this.setScroller();\r\n    if (!suppressSetOverflow) {\r\n      this.setOverflow();\r\n    }\r\n\r\n    if (!suppressColumnSet) {\r\n      this.setColumns(this.columns);\r\n    }\r\n\r\n    if (this._options.enableMouseWheelScrollHandler && this._viewport && (!this.slickMouseWheelInstances || this.slickMouseWheelInstances.length === 0)) {\r\n      this._viewport.forEach((view) => {\r\n        this.slickMouseWheelInstances.push(MouseWheel({\r\n          element: view,\r\n          onMouseWheel: this.handleMouseWheel.bind(this)\r\n        }));\r\n      });\r\n    } else if (this._options.enableMouseWheelScrollHandler === false) {\r\n      this.destroyAllInstances(this.slickMouseWheelInstances); // remove scroll handler when option is disable\r\n    }\r\n  }\r\n\r\n  validateAndEnforceOptions(): void {\r\n    if (this._options.autoHeight) {\r\n      this._options.leaveSpaceForNewRows = false;\r\n    }\r\n    if (this._options.forceFitColumns) {\r\n      this._options.autosizeColsMode = GridAutosizeColsMode.LegacyForceFit;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Sets a new source for databinding and removes all rendered rows. Note that this doesn't render the new rows - you can follow it with a call to render() to do that.\r\n   * @param {CustomDataView|Array<*>} newData New databinding source using a regular JavaScript array.. or a custom object exposing getItem(index) and getLength() functions.\r\n   * @param {Number} [scrollToTop] If true, the grid will reset the vertical scroll position to the top of the grid.\r\n   */\r\n  setData(newData: CustomDataView<TData> | TData[], scrollToTop?: boolean) {\r\n    this.data = newData;\r\n    this.invalidateAllRows();\r\n    this.updateRowCount();\r\n    if (scrollToTop) {\r\n      this.scrollTo(0);\r\n    }\r\n  }\r\n\r\n  /** Returns an array of every data object, unless you're using DataView in which case it returns a DataView object. */\r\n  getData<U extends CustomDataView<TData> | U[]>(): U {\r\n    return this.data as U;\r\n  }\r\n\r\n  /** Returns the size of the databinding source. */\r\n  getDataLength() {\r\n    if ((this.data as CustomDataView<TData>).getLength) {\r\n      return (this.data as CustomDataView<TData>).getLength();\r\n    } else {\r\n      return (this.data as TData[])?.length ?? 0;\r\n    }\r\n  }\r\n\r\n  protected getDataLengthIncludingAddNew() {\r\n    return this.getDataLength() + (!this._options.enableAddRow ? 0\r\n      : (!this.pagingActive || this.pagingIsLastPage ? 1 : 0)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Returns the databinding item at a given position.\r\n   * @param {Number} index Item row index.\r\n   */\r\n  getDataItem(i: number): TData {\r\n    if ((this.data as CustomDataView).getItem) {\r\n      return (this.data as CustomDataView<TData>).getItem(i) as TData;\r\n    } else {\r\n      return (this.data as TData[])[i] as TData;\r\n    }\r\n  }\r\n\r\n  /** Get Top Panel DOM element */\r\n  getTopPanel() {\r\n    return this._topPanels[0];\r\n  }\r\n\r\n  /** Get Top Panels (left/right) DOM element */\r\n  getTopPanels() {\r\n    return this._topPanels;\r\n  }\r\n\r\n  /** Are we using a DataView? */\r\n  hasDataView() {\r\n    return !Array.isArray(this.data);\r\n  }\r\n\r\n  protected togglePanelVisibility(option: 'showTopPanel' | 'showHeaderRow' | 'showColumnHeader' | 'showFooterRow' | 'showPreHeaderPanel', container: HTMLElement | HTMLElement[], visible?: boolean, animate?: boolean) {\r\n    const animated = (animate === false) ? false : true;\r\n\r\n    if (this._options[option] !== visible) {\r\n      this._options[option] = visible as boolean;\r\n      if (visible) {\r\n        if (animated) {\r\n          Utils.slideDown(container, this.resizeCanvas.bind(this));\r\n          return;\r\n        }\r\n        Utils.show(container);\r\n        this.resizeCanvas();\r\n      } else {\r\n        if (animated) {\r\n          Utils.slideUp(container, this.resizeCanvas.bind(this));\r\n          return;\r\n        }\r\n        Utils.hide(container);\r\n        this.resizeCanvas();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the Top Panel Visibility and optionally enable/disable animation (enabled by default)\r\n   * @param {Boolean} [visible] - optionally set if top panel is visible or not\r\n   * @param {Boolean} [animate] - optionally enable an animation while toggling the panel\r\n   */\r\n  setTopPanelVisibility(visible?: boolean, animate?: boolean) {\r\n    this.togglePanelVisibility('showTopPanel', this._topPanelScrollers, visible, animate);\r\n  }\r\n\r\n  /**\r\n   * Set the Header Row Visibility and optionally enable/disable animation (enabled by default)\r\n   * @param {Boolean} [visible] - optionally set if header row panel is visible or not\r\n   * @param {Boolean} [animate] - optionally enable an animation while toggling the panel\r\n   */\r\n  setHeaderRowVisibility(visible?: boolean, animate?: boolean) {\r\n    this.togglePanelVisibility('showHeaderRow', this._headerRowScroller, visible, animate);\r\n  }\r\n\r\n  /**\r\n   * Set the Column Header Visibility and optionally enable/disable animation (enabled by default)\r\n   * @param {Boolean} [visible] - optionally set if column header is visible or not\r\n   * @param {Boolean} [animate] - optionally enable an animation while toggling the panel\r\n   */\r\n  setColumnHeaderVisibility(visible?: boolean, animate?: boolean) {\r\n    this.togglePanelVisibility('showColumnHeader', this._headerScroller, visible, animate);\r\n  }\r\n\r\n  /**\r\n   * Set the Footer Visibility and optionally enable/disable animation (enabled by default)\r\n   * @param {Boolean} [visible] - optionally set if footer row panel is visible or not\r\n   * @param {Boolean} [animate] - optionally enable an animation while toggling the panel\r\n   */\r\n  setFooterRowVisibility(visible?: boolean, animate?: boolean) {\r\n    this.togglePanelVisibility('showFooterRow', this._footerRowScroller, visible, animate);\r\n  }\r\n\r\n  /**\r\n   * Set the Pre-Header Visibility and optionally enable/disable animation (enabled by default)\r\n   * @param {Boolean} [visible] - optionally set if pre-header panel is visible or not\r\n   * @param {Boolean} [animate] - optionally enable an animation while toggling the panel\r\n   */\r\n  setPreHeaderPanelVisibility(visible?: boolean, animate?: boolean) {\r\n    this.togglePanelVisibility('showPreHeaderPanel', [this._preHeaderPanelScroller, this._preHeaderPanelScrollerR], visible, animate);\r\n  }\r\n\r\n  /** Get Grid Canvas Node DOM Element */\r\n  getContainerNode() {\r\n    return this._container;\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Rendering / Scrolling\r\n\r\n  protected getRowTop(row: number) {\r\n    return this._options.rowHeight! * row - this.offset;\r\n  }\r\n\r\n  protected getRowFromPosition(y: number) {\r\n    return Math.floor((y + this.offset) / this._options.rowHeight!);\r\n  }\r\n\r\n  /**\r\n   * Scroll to an Y position in the grid\r\n   * @param {Number} y\r\n   */\r\n  scrollTo(y: number) {\r\n    y = Math.max(y, 0);\r\n    y = Math.min(y, (this.th || 0) - (Utils.height(this._viewportScrollContainerY) as number) + ((this.viewportHasHScroll || this.hasFrozenColumns()) ? (this.scrollbarDimensions?.height ?? 0) : 0));\r\n\r\n    const oldOffset = this.offset;\r\n    this.offset = Math.round(this.page * (this.cj || 0));\r\n    this.page = Math.min((this.n || 0) - 1, Math.floor(y / (this.ph || 0)));\r\n    const newScrollTop = (y - this.offset) as number;\r\n\r\n    if (this.offset !== oldOffset) {\r\n      const range = this.getVisibleRange(newScrollTop);\r\n      this.cleanupRows(range);\r\n      this.updateRowPositions();\r\n    }\r\n\r\n    if (this.prevScrollTop !== newScrollTop) {\r\n      this.vScrollDir = (this.prevScrollTop + oldOffset < newScrollTop + this.offset) ? 1 : -1;\r\n      this.lastRenderedScrollTop = (this.scrollTop = this.prevScrollTop = newScrollTop);\r\n\r\n      if (this.hasFrozenColumns()) {\r\n        this._viewportTopL.scrollTop = newScrollTop;\r\n      }\r\n\r\n      if (this.hasFrozenRows) {\r\n        this._viewportBottomL.scrollTop = this._viewportBottomR.scrollTop = newScrollTop;\r\n      }\r\n\r\n      if (this._viewportScrollContainerY) {\r\n        this._viewportScrollContainerY.scrollTop = newScrollTop;\r\n      }\r\n\r\n      this.trigger(this.onViewportChanged, {});\r\n    }\r\n  }\r\n\r\n  protected defaultFormatter(_row: number, _cell: number, value: any) {\r\n    if (!Utils.isDefined(value)) {\r\n      return '';\r\n    } else {\r\n      return (value + '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n    }\r\n  }\r\n\r\n  protected getFormatter(row: number, column: C): Formatter {\r\n    const rowMetadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n\r\n    // look up by id, then index\r\n    const columnOverrides = rowMetadata?.columns &&\r\n      (rowMetadata.columns[column.id] || rowMetadata.columns[this.getColumnIndex(column.id)]);\r\n\r\n    return ((columnOverrides?.formatter) ||\r\n      (rowMetadata?.formatter) ||\r\n      column.formatter ||\r\n      (this._options.formatterFactory?.getFormatter(column)) ||\r\n      this._options.defaultFormatter) as Formatter;\r\n  }\r\n\r\n  protected getEditor(row: number, cell: number): Editor | EditorConstructor | null | undefined {\r\n    const column = this.columns[cell];\r\n    const rowMetadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n    const columnMetadata = rowMetadata?.columns;\r\n\r\n    if (columnMetadata?.[column.id]?.editor !== undefined) {\r\n      return columnMetadata[column.id].editor;\r\n    }\r\n    if (columnMetadata?.[cell]?.editor !== undefined) {\r\n      return columnMetadata[cell].editor;\r\n    }\r\n\r\n    return (column.editor || (this._options?.editorFactory?.getEditor(column)));\r\n  }\r\n\r\n  protected getDataItemValueForColumn(item: TData, columnDef: C) {\r\n    if (this._options.dataItemColumnValueExtractor) {\r\n      return this._options.dataItemColumnValueExtractor(item, columnDef) as TData;\r\n    }\r\n    return item[columnDef.field as keyof TData];\r\n  }\r\n\r\n  protected appendRowHtml(divArrayL: HTMLElement[], divArrayR: HTMLElement[], row: number, range: CellViewportRange, dataLength: number) {\r\n    const d = this.getDataItem(row);\r\n    const dataLoading = row < dataLength && !d;\r\n    let rowCss = 'slick-row' +\r\n      (this.hasFrozenRows && row <= this._options.frozenRow! ? ' frozen' : '') +\r\n      (dataLoading ? ' loading' : '') +\r\n      (row === this.activeRow && this._options.showCellSelection ? ' active' : '') +\r\n      (row % 2 === 1 ? ' odd' : ' even');\r\n\r\n    if (!d) {\r\n      rowCss += ' ' + this._options.addNewRowCssClass;\r\n    }\r\n\r\n    const metadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n\r\n    if (metadata?.cssClasses) {\r\n      rowCss += ' ' + metadata.cssClasses;\r\n    }\r\n\r\n    const frozenRowOffset = this.getFrozenRowOffset(row);\r\n    const rowDiv = Utils.createDomElement('div', { className: `ui-widget-content ${rowCss}`, role: 'row', style: { top: `${this.getRowTop(row) - frozenRowOffset}px` } });\r\n    let rowDivR: HTMLElement | undefined;\r\n    divArrayL.push(rowDiv);\r\n    if (this.hasFrozenColumns()) {\r\n      // it has to be a deep copy otherwise we will have issues with pass by reference in js since\r\n      // attempting to add the same element to 2 different arrays will just move 1 item to the other array\r\n      rowDivR = rowDiv.cloneNode(true) as HTMLElement;\r\n      divArrayR.push(rowDivR);\r\n    }\r\n\r\n    let colspan: number | string;\r\n    let m: C;\r\n    for (let i = 0, ii = this.columns.length; i < ii; i++) {\r\n      m = this.columns[i];\r\n      if (!m || m.hidden) { continue; }\r\n\r\n      colspan = 1;\r\n      if (metadata?.columns) {\r\n        const columnData = metadata.columns[m.id] || metadata.columns[i];\r\n        colspan = columnData?.colspan || 1;\r\n        if (colspan === '*') {\r\n          colspan = ii - i;\r\n        }\r\n      }\r\n\r\n      // Do not render cells outside of the viewport.\r\n      if (this.columnPosRight[Math.min(ii - 1, i + (colspan as number) - 1)] > range.leftPx) {\r\n        if (!m.alwaysRenderColumn && this.columnPosLeft[i] > range.rightPx) {\r\n          // All columns to the right are outside the range.\r\n          break;\r\n        }\r\n\r\n        if (this.hasFrozenColumns() && (i > this._options.frozenColumn!)) {\r\n          this.appendCellHtml(rowDivR!, row, i, (colspan as number), d);\r\n        } else {\r\n          this.appendCellHtml(rowDiv, row, i, (colspan as number), d);\r\n        }\r\n      } else if (m.alwaysRenderColumn || (this.hasFrozenColumns() && i <= this._options.frozenColumn!)) {\r\n        this.appendCellHtml(rowDiv, row, i, (colspan as number), d);\r\n      }\r\n\r\n      if ((colspan as number) > 1) {\r\n        i += ((colspan as number) - 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected appendCellHtml(divRow: HTMLElement, row: number, cell: number, colspan: number, item: TData) {\r\n    // divRow: the html element to append items too\r\n    // row, cell: row and column index\r\n    // colspan: HTML colspan\r\n    // item: grid data for row\r\n\r\n    const m = this.columns[cell];\r\n    let cellCss = 'slick-cell l' + cell + ' r' + Math.min(this.columns.length - 1, cell + colspan - 1) + (m.cssClass ? ' ' + m.cssClass : '');\r\n\r\n    if (this.hasFrozenColumns() && cell <= this._options.frozenColumn!) {\r\n      cellCss += (' frozen');\r\n    }\r\n\r\n    if (row === this.activeRow && cell === this.activeCell && this._options.showCellSelection) {\r\n      cellCss += (' active');\r\n    }\r\n\r\n    // TODO: merge them together in the setter\r\n    Object.keys(this.cellCssClasses).forEach(key => {\r\n      if (this.cellCssClasses[key][row]?.[m.id]) {\r\n        cellCss += (' ' + this.cellCssClasses[key][row][m.id]);\r\n      }\r\n    });\r\n\r\n    let value: any = null;\r\n    let formatterResult: FormatterResultWithHtml | FormatterResultWithText | HTMLElement | DocumentFragment | string = '';\r\n    if (item) {\r\n      value = this.getDataItemValueForColumn(item, m);\r\n      formatterResult = this.getFormatter(row, m)(row, cell, value, m, item, this as unknown as SlickGridModel);\r\n      if (formatterResult === null || formatterResult === undefined) {\r\n        formatterResult = '';\r\n      }\r\n    }\r\n\r\n    // get addl css class names from object type formatter return and from string type return of onBeforeAppendCell\r\n    // we will only use the event result as CSS classes when it is a string type (undefined event always return a true boolean which is not a valid css class)\r\n    const evt = this.trigger(this.onBeforeAppendCell, { row, cell, value, dataContext: item });\r\n    const appendCellResult = evt.getReturnValue();\r\n    let addlCssClasses = typeof appendCellResult === 'string' ? appendCellResult : '';\r\n    if ((formatterResult as FormatterResultObject)?.addClasses) {\r\n      addlCssClasses += Utils.classNameToList((addlCssClasses ? ' ' : '') + (formatterResult as FormatterResultObject).addClasses).join(' ');\r\n    }\r\n\r\n    const toolTipText = (formatterResult as FormatterResultObject)?.toolTip ? `${(formatterResult as FormatterResultObject).toolTip}` : '';\r\n    const cellDiv = Utils.createDomElement('div', {\r\n      className: Utils.classNameToList(`${cellCss} ${addlCssClasses || ''}`).join(' '),\r\n      role: 'gridcell',\r\n      tabIndex: -1\r\n    });\r\n    cellDiv.setAttribute('aria-describedby', this.uid + m.id);\r\n    if (toolTipText) {\r\n      cellDiv.setAttribute('title', toolTipText);\r\n    }\r\n\r\n    if (m.hasOwnProperty('cellAttrs') && m.cellAttrs instanceof Object) {\r\n      Object.keys(m.cellAttrs).forEach(key => {\r\n        if (m.cellAttrs.hasOwnProperty(key)) {\r\n          cellDiv.setAttribute(key, m.cellAttrs[key]);\r\n        }\r\n      });\r\n    }\r\n\r\n    // if there is a corresponding row (if not, this is the Add New row or this data hasn't been loaded yet)\r\n    if (item) {\r\n      const cellResult = (Object.prototype.toString.call(formatterResult) !== '[object Object]' ? formatterResult : (formatterResult as FormatterResultWithHtml).html || (formatterResult as FormatterResultWithText).text);\r\n      this.applyHtmlCode(cellDiv, cellResult as string | HTMLElement);\r\n    }\r\n    divRow.appendChild(cellDiv);\r\n\r\n    // Formatter can optional add an \"insertElementAfterTarget\" option but it must be inserted only after the `.slick-row` div exists\r\n    if ((formatterResult as FormatterResultObject).insertElementAfterTarget) {\r\n      Utils.insertAfterElement(cellDiv, (formatterResult as FormatterResultObject).insertElementAfterTarget as HTMLElement);\r\n    }\r\n\r\n    this.rowsCache[row].cellRenderQueue.push(cell);\r\n    this.rowsCache[row].cellColSpans[cell] = colspan;\r\n  }\r\n\r\n  protected cleanupRows(rangeToKeep: { bottom: number; top: number; }) {\r\n    Object.keys(this.rowsCache).forEach(rowId => {\r\n      if (this.rowsCache) {\r\n        let i = +rowId;\r\n        let removeFrozenRow = true;\r\n\r\n        if (this.hasFrozenRows\r\n          && ((this._options.frozenBottom && (i as unknown as number) >= this.actualFrozenRow) // Frozen bottom rows\r\n            || (!this._options.frozenBottom && (i as unknown as number) <= this.actualFrozenRow) // Frozen top rows\r\n          )\r\n        ) {\r\n          removeFrozenRow = false;\r\n        }\r\n\r\n        if (((i = parseInt(rowId, 10)) !== this.activeRow)\r\n          && (i < rangeToKeep.top || i > rangeToKeep.bottom)\r\n          && (removeFrozenRow)\r\n        ) {\r\n          this.removeRowFromCache(i);\r\n        }\r\n      }\r\n    });\r\n    if (this._options.enableAsyncPostRenderCleanup) {\r\n      this.startPostProcessingCleanup();\r\n    }\r\n  }\r\n\r\n  /** Invalidate all grid rows and re-render the grid rows */\r\n  invalidate() {\r\n    this.updateRowCount();\r\n    this.invalidateAllRows();\r\n    this.render();\r\n  }\r\n\r\n  /** Invalidate all grid rows */\r\n  invalidateAllRows() {\r\n    if (this.currentEditor) {\r\n      this.makeActiveCellNormal();\r\n    }\r\n\r\n    if (typeof this.rowsCache === 'object') {\r\n      Object.keys(this.rowsCache).forEach(row => {\r\n        if (this.rowsCache) {\r\n          this.removeRowFromCache(+row);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this._options.enableAsyncPostRenderCleanup) {\r\n      this.startPostProcessingCleanup();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Invalidate a specific set of row numbers\r\n   * @param {Number[]} rows\r\n   */\r\n  invalidateRows(rows: number[]) {\r\n    if (!rows || !rows.length) {\r\n      return;\r\n    }\r\n    this.vScrollDir = 0;\r\n    const rl = rows.length;\r\n    for (let i = 0; i < rl; i++) {\r\n      if (this.currentEditor && this.activeRow === rows[i]) {\r\n        this.makeActiveCellNormal();\r\n      }\r\n      if (this.rowsCache[rows[i]]) {\r\n        this.removeRowFromCache(rows[i]);\r\n      }\r\n    }\r\n    if (this._options.enableAsyncPostRenderCleanup) { this.startPostProcessingCleanup(); }\r\n  }\r\n\r\n  /**\r\n   * Invalidate a specific row number\r\n   * @param {Number} row\r\n   */\r\n  invalidateRow(row: number) {\r\n    if (!row && row !== 0) { return; }\r\n    this.invalidateRows([row]);\r\n  }\r\n\r\n  protected queuePostProcessedRowForCleanup(cacheEntry: RowCaching, postProcessedRow: any, rowIdx: number) {\r\n    this.postProcessgroupId++;\r\n\r\n    // store and detach node for later async cleanup\r\n    if (typeof postProcessedRow === 'object') {\r\n      Object.keys(postProcessedRow).forEach(columnIdx => {\r\n        if (postProcessedRow.hasOwnProperty(columnIdx)) {\r\n          this.postProcessedCleanupQueue.push({\r\n            actionType: 'C',\r\n            groupId: this.postProcessgroupId,\r\n            node: cacheEntry.cellNodesByColumnIdx[+columnIdx],\r\n            columnIdx: +columnIdx,\r\n            rowIdx\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    if (!cacheEntry.rowNode) {\r\n      cacheEntry.rowNode = [];\r\n    }\r\n    this.postProcessedCleanupQueue.push({\r\n      actionType: 'R',\r\n      groupId: this.postProcessgroupId,\r\n      node: cacheEntry.rowNode as HTMLElement[]\r\n    });\r\n    cacheEntry.rowNode?.forEach((node) => node.remove());\r\n  }\r\n\r\n  protected queuePostProcessedCellForCleanup(cellnode: HTMLElement, columnIdx: number, rowIdx: number) {\r\n    this.postProcessedCleanupQueue.push({\r\n      actionType: 'C',\r\n      groupId: this.postProcessgroupId,\r\n      node: cellnode,\r\n      columnIdx,\r\n      rowIdx\r\n    });\r\n    cellnode.remove();\r\n  }\r\n\r\n  protected removeRowFromCache(row: number) {\r\n    const cacheEntry = this.rowsCache[row];\r\n    if (!cacheEntry || !cacheEntry.rowNode) {\r\n      return;\r\n    }\r\n\r\n    if (this._options.enableAsyncPostRenderCleanup && this.postProcessedRows[row]) {\r\n      this.queuePostProcessedRowForCleanup(cacheEntry, this.postProcessedRows[row], row);\r\n    } else {\r\n      cacheEntry.rowNode?.forEach((node: HTMLElement) => node.parentElement?.removeChild(node));\r\n    }\r\n\r\n    delete this.rowsCache[row];\r\n    delete this.postProcessedRows[row];\r\n    this.renderedRows--;\r\n    this.counter_rows_removed++;\r\n  }\r\n\r\n  /** Apply a Formatter Result to a Cell DOM Node */\r\n  applyFormatResultToCellNode(formatterResult: FormatterResultWithHtml | FormatterResultWithText | string | HTMLElement | DocumentFragment, cellNode: HTMLDivElement, suppressRemove?: boolean) {\r\n    if (formatterResult === null || formatterResult === undefined) { formatterResult = ''; }\r\n    if (Object.prototype.toString.call(formatterResult) !== '[object Object]') {\r\n      this.applyHtmlCode(cellNode, formatterResult as string | HTMLElement);\r\n      return;\r\n    }\r\n\r\n    const formatterVal: HTMLElement | string = (formatterResult as FormatterResultWithHtml).html || (formatterResult as FormatterResultWithText).text;\r\n    this.applyHtmlCode(cellNode, formatterVal);\r\n\r\n    if ((formatterResult as FormatterResultObject).removeClasses && !suppressRemove) {\r\n      cellNode.classList.remove(...Utils.classNameToList((formatterResult as FormatterResultObject).removeClasses));\r\n    }\r\n    if ((formatterResult as FormatterResultObject).addClasses) {\r\n      cellNode.classList.add(...Utils.classNameToList((formatterResult as FormatterResultObject).addClasses));\r\n    }\r\n    if ((formatterResult as FormatterResultObject).toolTip) {\r\n      cellNode.setAttribute('title', (formatterResult as FormatterResultObject).toolTip!);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a specific cell by its row and column index\r\n   * @param {Number} row - grid row number\r\n   * @param {Number} cell - grid cell column number\r\n   */\r\n  updateCell(row: number, cell: number) {\r\n    const cellNode = this.getCellNode(row, cell);\r\n    if (!cellNode) {\r\n      return;\r\n    }\r\n\r\n    const m = this.columns[cell];\r\n    const d = this.getDataItem(row);\r\n    if (this.currentEditor && this.activeRow === row && this.activeCell === cell) {\r\n      this.currentEditor.loadValue(d);\r\n    } else {\r\n      const formatterResult = d ? this.getFormatter(row, m)(row, cell, this.getDataItemValueForColumn(d, m), m, d, this as unknown as SlickGridModel) : '';\r\n      this.applyFormatResultToCellNode(formatterResult, cellNode);\r\n      this.invalidatePostProcessingResults(row);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a specific row by its row index\r\n   * @param {Number} row - grid row number\r\n   */\r\n  updateRow(row: number) {\r\n    const cacheEntry = this.rowsCache[row];\r\n    if (!cacheEntry) {\r\n      return;\r\n    }\r\n\r\n    this.ensureCellNodesInRowsCache(row);\r\n\r\n    let formatterResult;\r\n    const d = this.getDataItem(row);\r\n\r\n    Object.keys(cacheEntry.cellNodesByColumnIdx).forEach(colIdx => {\r\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(colIdx)) {\r\n        return;\r\n      }\r\n\r\n      const columnIdx = +colIdx;\r\n      const m = this.columns[columnIdx];\r\n      const node = cacheEntry.cellNodesByColumnIdx[columnIdx];\r\n\r\n      if (row === this.activeRow && columnIdx === this.activeCell && this.currentEditor) {\r\n        this.currentEditor.loadValue(d);\r\n      } else if (d) {\r\n        formatterResult = this.getFormatter(row, m)(row, columnIdx, this.getDataItemValueForColumn(d, m), m, d, this as unknown as SlickGridModel);\r\n        this.applyFormatResultToCellNode(formatterResult, node as HTMLDivElement);\r\n      } else {\r\n        Utils.emptyElement(node);\r\n      }\r\n    });\r\n\r\n    this.invalidatePostProcessingResults(row);\r\n  }\r\n\r\n  /**\r\n   * Get the number of rows displayed in the viewport\r\n   * Note that the row count is an approximation because it is a calculated value using this formula (viewport / rowHeight = rowCount),\r\n   * the viewport must also be displayed for this calculation to work.\r\n   * @return {Number} rowCount\r\n   */\r\n  getViewportRowCount() {\r\n    const vh = this.getViewportHeight();\r\n    const scrollbarHeight = this.getScrollbarDimensions()?.height ?? 0;\r\n    return Math.floor((vh - scrollbarHeight) / this._options.rowHeight!);\r\n  }\r\n\r\n  getViewportHeight() {\r\n    if (!this._options.autoHeight || this._options.frozenColumn !== -1) {\r\n      this.topPanelH = (this._options.showTopPanel) ? this._options.topPanelHeight! + this.getVBoxDelta(this._topPanelScrollers[0]) : 0;\r\n      this.headerRowH = (this._options.showHeaderRow) ? this._options.headerRowHeight! + this.getVBoxDelta(this._headerRowScroller[0]) : 0;\r\n      this.footerRowH = (this._options.showFooterRow) ? this._options.footerRowHeight! + this.getVBoxDelta(this._footerRowScroller[0]) : 0;\r\n    }\r\n\r\n    if (this._options.autoHeight) {\r\n      let fullHeight = this._paneHeaderL.offsetHeight;\r\n      fullHeight += (this._options.showHeaderRow) ? this._options.headerRowHeight! + this.getVBoxDelta(this._headerRowScroller[0]) : 0;\r\n      fullHeight += (this._options.showFooterRow) ? this._options.footerRowHeight! + this.getVBoxDelta(this._footerRowScroller[0]) : 0;\r\n      fullHeight += (this.getCanvasWidth() > this.viewportW) ? (this.scrollbarDimensions?.height ?? 0) : 0;\r\n\r\n      this.viewportH = this._options.rowHeight!\r\n        * this.getDataLengthIncludingAddNew()\r\n        + ((this._options.frozenColumn === -1) ? fullHeight : 0);\r\n    } else {\r\n      const columnNamesH = (this._options.showColumnHeader) ? Utils.toFloat(Utils.height(this._headerScroller[0]) as number) + this.getVBoxDelta(this._headerScroller[0]) : 0;\r\n      const preHeaderH = (this._options.createPreHeaderPanel && this._options.showPreHeaderPanel) ? this._options.preHeaderPanelHeight! + this.getVBoxDelta(this._preHeaderPanelScroller) : 0;\r\n\r\n      const style = getComputedStyle(this._container);\r\n      this.viewportH = Utils.toFloat(style.height)\r\n        - Utils.toFloat(style.paddingTop)\r\n        - Utils.toFloat(style.paddingBottom)\r\n        - columnNamesH\r\n        - this.topPanelH\r\n        - this.headerRowH\r\n        - this.footerRowH\r\n        - preHeaderH;\r\n    }\r\n\r\n    this.numVisibleRows = Math.ceil(this.viewportH / this._options.rowHeight!);\r\n    return this.viewportH;\r\n  }\r\n\r\n  getViewportWidth() {\r\n    this.viewportW = parseFloat(Utils.innerSize(this._container, 'width') as unknown as string) || (this._options.devMode && this._options.devMode.containerClientWidth) || 0;\r\n    return this.viewportW;\r\n  }\r\n\r\n  /** Execute a Resize of the Grid Canvas */\r\n  resizeCanvas() {\r\n    if (!this.initialized) { return; }\r\n    this.paneTopH = 0;\r\n    this.paneBottomH = 0;\r\n    this.viewportTopH = 0;\r\n    this.viewportBottomH = 0;\r\n\r\n    this.getViewportWidth();\r\n    this.getViewportHeight();\r\n\r\n    // Account for Frozen Rows\r\n    if (this.hasFrozenRows) {\r\n      if (this._options.frozenBottom) {\r\n        this.paneTopH = this.viewportH - this.frozenRowsHeight - (this.scrollbarDimensions?.height ?? 0);\r\n        this.paneBottomH = this.frozenRowsHeight + (this.scrollbarDimensions?.height ?? 0);\r\n      } else {\r\n        this.paneTopH = this.frozenRowsHeight;\r\n        this.paneBottomH = this.viewportH - this.frozenRowsHeight;\r\n      }\r\n    } else {\r\n      this.paneTopH = this.viewportH;\r\n    }\r\n\r\n    // The top pane includes the top panel and the header row\r\n    this.paneTopH += this.topPanelH + this.headerRowH + this.footerRowH;\r\n\r\n    if (this.hasFrozenColumns() && this._options.autoHeight) {\r\n      this.paneTopH += (this.scrollbarDimensions?.height ?? 0);\r\n    }\r\n\r\n    // The top viewport does not contain the top panel or header row\r\n    this.viewportTopH = this.paneTopH - this.topPanelH - this.headerRowH - this.footerRowH;\r\n\r\n    if (this._options.autoHeight) {\r\n      if (this.hasFrozenColumns()) {\r\n        const style = getComputedStyle(this._headerScrollerL);\r\n        Utils.height(this._container, this.paneTopH + Utils.toFloat(style.height));\r\n      }\r\n\r\n      this._paneTopL.style.position = 'relative';\r\n    }\r\n\r\n    Utils.setStyleSize(this._paneTopL, 'top', Utils.height(this._paneHeaderL) || (this._options.showHeaderRow ? this._options.headerRowHeight! : 0) + (this._options.showPreHeaderPanel ? this._options.preHeaderPanelHeight! : 0));\r\n    Utils.height(this._paneTopL, this.paneTopH);\r\n\r\n    const paneBottomTop = this._paneTopL.offsetTop + this.paneTopH;\r\n\r\n    if (!this._options.autoHeight) {\r\n      Utils.height(this._viewportTopL, this.viewportTopH);\r\n    }\r\n\r\n    if (this.hasFrozenColumns()) {\r\n      Utils.setStyleSize(this._paneTopR, 'top', Utils.height(this._paneHeaderL) as number);\r\n      Utils.height(this._paneTopR, this.paneTopH);\r\n      Utils.height(this._viewportTopR, this.viewportTopH);\r\n\r\n      if (this.hasFrozenRows) {\r\n        Utils.setStyleSize(this._paneBottomL, 'top', paneBottomTop);\r\n        Utils.height(this._paneBottomL, this.paneBottomH);\r\n        Utils.setStyleSize(this._paneBottomR, 'top', paneBottomTop);\r\n        Utils.height(this._paneBottomR, this.paneBottomH);\r\n        Utils.height(this._viewportBottomR, this.paneBottomH);\r\n      }\r\n    } else {\r\n      if (this.hasFrozenRows) {\r\n        Utils.width(this._paneBottomL, '100%');\r\n        Utils.height(this._paneBottomL, this.paneBottomH);\r\n        Utils.setStyleSize(this._paneBottomL, 'top', paneBottomTop);\r\n      }\r\n    }\r\n\r\n    if (this.hasFrozenRows) {\r\n      Utils.height(this._viewportBottomL, this.paneBottomH);\r\n\r\n      if (this._options.frozenBottom) {\r\n        Utils.height(this._canvasBottomL, this.frozenRowsHeight);\r\n\r\n        if (this.hasFrozenColumns()) {\r\n          Utils.height(this._canvasBottomR, this.frozenRowsHeight);\r\n        }\r\n      } else {\r\n        Utils.height(this._canvasTopL, this.frozenRowsHeight);\r\n\r\n        if (this.hasFrozenColumns()) {\r\n          Utils.height(this._canvasTopR, this.frozenRowsHeight);\r\n        }\r\n      }\r\n    } else {\r\n      Utils.height(this._viewportTopR, this.viewportTopH);\r\n    }\r\n\r\n    if (!this.scrollbarDimensions || !this.scrollbarDimensions.width) {\r\n      this.scrollbarDimensions = this.measureScrollbar();\r\n    }\r\n\r\n    if (this._options.autosizeColsMode === GridAutosizeColsMode.LegacyForceFit) {\r\n      this.autosizeColumns();\r\n    }\r\n\r\n    this.updateRowCount();\r\n    this.handleScroll();\r\n    // Since the width has changed, force the render() to reevaluate virtually rendered cells.\r\n    this.lastRenderedScrollLeft = -1;\r\n    this.render();\r\n  }\r\n\r\n  /**\r\n   * Update paging information status from the View\r\n   * @param {PagingInfo} pagingInfo\r\n   */\r\n  updatePagingStatusFromView(pagingInfo: Pick<PagingInfo, 'pageSize' | 'pageNum' | 'totalPages'>) {\r\n    this.pagingActive = (pagingInfo.pageSize !== 0);\r\n    this.pagingIsLastPage = (pagingInfo.pageNum === pagingInfo.totalPages - 1);\r\n  }\r\n\r\n  /** Update the dataset row count */\r\n  updateRowCount() {\r\n    if (!this.initialized) { return; }\r\n\r\n    const dataLength = this.getDataLength();\r\n    const dataLengthIncludingAddNew = this.getDataLengthIncludingAddNew();\r\n    let numberOfRows = 0;\r\n    let oldH = ((this.hasFrozenRows && !this._options.frozenBottom) ? Utils.height(this._canvasBottomL) : Utils.height(this._canvasTopL)) as number;\r\n\r\n    if (this.hasFrozenRows) {\r\n      numberOfRows = this.getDataLength() - this._options.frozenRow!;\r\n    } else {\r\n      numberOfRows = dataLengthIncludingAddNew + (this._options.leaveSpaceForNewRows ? this.numVisibleRows - 1 : 0);\r\n    }\r\n\r\n    const tempViewportH = Utils.height(this._viewportScrollContainerY) as number;\r\n    const oldViewportHasVScroll = this.viewportHasVScroll;\r\n    // with autoHeight, we do not need to accommodate the vertical scroll bar\r\n    this.viewportHasVScroll = this._options.alwaysShowVerticalScroll || !this._options.autoHeight && (numberOfRows * this._options.rowHeight! > tempViewportH);\r\n\r\n    this.makeActiveCellNormal();\r\n\r\n    // remove the rows that are now outside of the data range\r\n    // this helps avoid redundant calls to .removeRow() when the size of the data decreased by thousands of rows\r\n    const r1 = dataLength - 1;\r\n    if (typeof this.rowsCache === 'object') {\r\n      Object.keys(this.rowsCache).forEach(row => {\r\n        const cachedRow = +row;\r\n        if (cachedRow > r1) {\r\n          this.removeRowFromCache(cachedRow);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (this._options.enableAsyncPostRenderCleanup) {\r\n      this.startPostProcessingCleanup();\r\n    }\r\n\r\n    if (this.activeCellNode && this.activeRow > r1) {\r\n      this.resetActiveCell();\r\n    }\r\n\r\n    oldH = this.h;\r\n    if (this._options.autoHeight) {\r\n      this.h = this._options.rowHeight! * numberOfRows;\r\n    } else {\r\n      this.th = Math.max(this._options.rowHeight! * numberOfRows, tempViewportH - (this.scrollbarDimensions?.height ?? 0));\r\n      if (this.th < this.maxSupportedCssHeight) {\r\n        // just one page\r\n        this.h = this.ph = this.th;\r\n        this.n = 1;\r\n        this.cj = 0;\r\n      } else {\r\n        // break into pages\r\n        this.h = this.maxSupportedCssHeight;\r\n        this.ph = this.h / 100;\r\n        this.n = Math.floor(this.th / this.ph);\r\n        this.cj = (this.th - this.h) / (this.n - 1);\r\n      }\r\n    }\r\n\r\n    if (this.h !== oldH || this.enforceFrozenRowHeightRecalc) {\r\n      if (this.hasFrozenRows && !this._options.frozenBottom) {\r\n        Utils.height(this._canvasBottomL, this.h);\r\n\r\n        if (this.hasFrozenColumns()) {\r\n          Utils.height(this._canvasBottomR, this.h);\r\n        }\r\n      } else {\r\n        Utils.height(this._canvasTopL, this.h);\r\n        Utils.height(this._canvasTopR, this.h);\r\n      }\r\n\r\n      this.scrollTop = this._viewportScrollContainerY.scrollTop;\r\n      this.enforceFrozenRowHeightRecalc = false; // reset enforce flag\r\n    }\r\n\r\n    const oldScrollTopInRange = (this.scrollTop + this.offset <= this.th - tempViewportH);\r\n\r\n    if (this.th === 0 || this.scrollTop === 0) {\r\n      this.page = this.offset = 0;\r\n    } else if (oldScrollTopInRange) {\r\n      // maintain virtual position\r\n      this.scrollTo(this.scrollTop + this.offset);\r\n    } else {\r\n      // scroll to bottom\r\n      this.scrollTo(this.th - tempViewportH + (this.scrollbarDimensions?.height ?? 0));\r\n    }\r\n\r\n    if (this.h !== oldH && this._options.autoHeight) {\r\n      this.resizeCanvas();\r\n    }\r\n\r\n    if (this._options.autosizeColsMode === GridAutosizeColsMode.LegacyForceFit && oldViewportHasVScroll !== this.viewportHasVScroll) {\r\n      this.autosizeColumns();\r\n    }\r\n    this.updateCanvasWidth(false);\r\n  }\r\n\r\n  /** @alias `getVisibleRange` */\r\n  getViewport(viewportTop?: number, viewportLeft?: number) {\r\n    return this.getVisibleRange(viewportTop, viewportLeft);\r\n  }\r\n\r\n  getVisibleRange(viewportTop?: number, viewportLeft?: number) {\r\n    viewportTop ??= this.scrollTop;\r\n    viewportLeft ??= this.scrollLeft;\r\n\r\n    return {\r\n      top: this.getRowFromPosition(viewportTop),\r\n      bottom: this.getRowFromPosition(viewportTop + this.viewportH) + 1,\r\n      leftPx: viewportLeft,\r\n      rightPx: viewportLeft + this.viewportW\r\n    };\r\n  }\r\n\r\n  /** Get rendered range */\r\n  getRenderedRange(viewportTop?: number, viewportLeft?: number) {\r\n    const range = this.getVisibleRange(viewportTop, viewportLeft);\r\n    const buffer = Math.round(this.viewportH / this._options.rowHeight!);\r\n    const minBuffer = this._options.minRowBuffer as number;\r\n\r\n    if (this.vScrollDir === -1) {\r\n      range.top -= buffer;\r\n      range.bottom += minBuffer;\r\n    } else if (this.vScrollDir === 1) {\r\n      range.top -= minBuffer;\r\n      range.bottom += buffer;\r\n    } else {\r\n      range.top -= minBuffer;\r\n      range.bottom += minBuffer;\r\n    }\r\n\r\n    range.top = Math.max(0, range.top);\r\n    range.bottom = Math.min(this.getDataLengthIncludingAddNew() - 1, range.bottom);\r\n\r\n    range.leftPx -= this.viewportW;\r\n    range.rightPx += this.viewportW;\r\n\r\n    range.leftPx = Math.max(0, range.leftPx);\r\n    range.rightPx = Math.min(this.canvasWidth, range.rightPx);\r\n\r\n    return range;\r\n  }\r\n\r\n  protected ensureCellNodesInRowsCache(row: number) {\r\n    const cacheEntry = this.rowsCache[row];\r\n    if (cacheEntry?.cellRenderQueue.length && cacheEntry.rowNode?.length) {\r\n      const rowNode = cacheEntry.rowNode as HTMLElement[];\r\n      let children = Array.from(rowNode[0].children) as HTMLElement[];\r\n      if (rowNode.length > 1) {\r\n        children = children.concat(Array.from(rowNode[1].children) as HTMLElement[]);\r\n      }\r\n\r\n      let i = children.length - 1;\r\n      while (cacheEntry.cellRenderQueue.length) {\r\n        const columnIdx = cacheEntry.cellRenderQueue.pop();\r\n        (cacheEntry.cellNodesByColumnIdx as HTMLElement[])[columnIdx] = children[i--];\r\n      }\r\n    }\r\n  }\r\n\r\n  protected cleanUpCells(range: CellViewportRange, row: number) {\r\n    // Ignore frozen rows\r\n    if (this.hasFrozenRows\r\n      && ((this._options.frozenBottom && row > this.actualFrozenRow) // Frozen bottom rows\r\n        || (row <= this.actualFrozenRow)                     // Frozen top rows\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    let totalCellsRemoved = 0;\r\n    const cacheEntry = this.rowsCache[row];\r\n\r\n    // Remove cells outside the range.\r\n    const cellsToRemove: number[] = [];\r\n    Object.keys(cacheEntry.cellNodesByColumnIdx).forEach(cellNodeIdx => {\r\n      // I really hate it when people mess with Array.prototype.\r\n      if (!cacheEntry.cellNodesByColumnIdx.hasOwnProperty(cellNodeIdx)) {\r\n        return;\r\n      }\r\n\r\n      // This is a string, so it needs to be cast back to a number.\r\n      const i = +cellNodeIdx;\r\n\r\n      // Ignore frozen columns\r\n      if (i <= this._options.frozenColumn!) {\r\n        return;\r\n      }\r\n\r\n      // Ignore alwaysRenderedColumns\r\n      if (Array.isArray(this.columns) && this.columns[i] && this.columns[i].alwaysRenderColumn) {\r\n        return;\r\n      }\r\n\r\n      const colspan = cacheEntry.cellColSpans[i];\r\n      if (this.columnPosLeft[i] > range.rightPx ||\r\n        this.columnPosRight[Math.min(this.columns.length - 1, (i || 0) + (colspan as number) - 1)] < range.leftPx) {\r\n        if (!(row === this.activeRow && Number(i) === this.activeCell)) {\r\n          cellsToRemove.push((i as unknown as number));\r\n        }\r\n      }\r\n    });\r\n\r\n    let cellToRemove;\r\n    let cellNode;\r\n    while (Utils.isDefined(cellToRemove = cellsToRemove.pop())) {\r\n      cellNode = cacheEntry.cellNodesByColumnIdx[cellToRemove];\r\n\r\n      if (this._options.enableAsyncPostRenderCleanup && this.postProcessedRows[row]?.[cellToRemove]) {\r\n        this.queuePostProcessedCellForCleanup(cellNode, cellToRemove, row);\r\n      } else {\r\n        cellNode.parentElement?.removeChild(cellNode);\r\n      }\r\n\r\n      delete cacheEntry.cellColSpans[cellToRemove];\r\n      delete cacheEntry.cellNodesByColumnIdx[cellToRemove];\r\n      if (this.postProcessedRows[row]) {\r\n        delete this.postProcessedRows[row][cellToRemove];\r\n      }\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      totalCellsRemoved++;\r\n    }\r\n  }\r\n\r\n  protected cleanUpAndRenderCells(range: CellViewportRange) {\r\n    let cacheEntry;\r\n    const divRow: HTMLElement = document.createElement('div');\r\n    const processedRows: number[] = [];\r\n    let cellsAdded: number;\r\n    let totalCellsAdded = 0;\r\n    let colspan: number | string;\r\n\r\n    for (let row = range.top as number, btm = range.bottom as number; row <= btm; row++) {\r\n      cacheEntry = this.rowsCache[row];\r\n      if (!cacheEntry) {\r\n        continue;\r\n      }\r\n\r\n      // cellRenderQueue populated in renderRows() needs to be cleared first\r\n      this.ensureCellNodesInRowsCache(row);\r\n\r\n      this.cleanUpCells(range, row);\r\n      // Render missing cells.\r\n      cellsAdded = 0;\r\n\r\n      let metadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row) ?? {} as ItemMetadata;\r\n      metadata = metadata?.columns as ItemMetadata;\r\n\r\n      const d = this.getDataItem(row);\r\n\r\n      // TODO:  shorten this loop (index? heuristics? binary search?)\r\n      for (let i = 0, ii = this.columns.length; i < ii; i++) {\r\n        if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n        // Cells to the right are outside the range.\r\n        if (this.columnPosLeft[i] > range.rightPx) {\r\n          break;\r\n        }\r\n\r\n        // Already rendered.\r\n        if (Utils.isDefined(colspan = cacheEntry.cellColSpans[i] as number)) {\r\n          i += (colspan > 1 ? colspan - 1 : 0);\r\n          continue;\r\n        }\r\n\r\n        colspan = 1;\r\n        if (metadata) {\r\n          const columnData = metadata[this.columns[i].id as keyof ItemMetadata] || (metadata as any)[i];\r\n          colspan = columnData?.colspan ?? 1;\r\n          if (colspan === '*') {\r\n            colspan = ii - i;\r\n          }\r\n        }\r\n\r\n        const colspanNb = colspan as number; // at this point colspan is for sure a number\r\n        if (this.columnPosRight[Math.min(ii - 1, i + colspanNb - 1)] > range.leftPx) {\r\n          this.appendCellHtml(divRow, row, i, colspanNb, d);\r\n          cellsAdded++;\r\n        }\r\n\r\n        i += (colspanNb > 1 ? colspanNb - 1 : 0);\r\n      }\r\n\r\n      if (cellsAdded) {\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        totalCellsAdded += cellsAdded;\r\n        processedRows.push(row);\r\n      }\r\n    }\r\n    if (!divRow.children.length) {\r\n      return;\r\n    }\r\n\r\n    let processedRow: number | null | undefined;\r\n    let node: HTMLElement;\r\n    while (Utils.isDefined(processedRow = processedRows.pop())) {\r\n      cacheEntry = this.rowsCache[processedRow];\r\n      let columnIdx;\r\n      while (Utils.isDefined(columnIdx = cacheEntry.cellRenderQueue.pop())) {\r\n        node = divRow.lastChild as HTMLElement;\r\n\r\n        //no idea why node would be null here but apparently it is..\r\n        if (!node) {\r\n          continue;\r\n        }\r\n        if (this.hasFrozenColumns() && (columnIdx > this._options.frozenColumn!)) {\r\n          cacheEntry.rowNode![1].appendChild(node);\r\n        } else {\r\n          cacheEntry.rowNode![0].appendChild(node);\r\n        }\r\n        cacheEntry.cellNodesByColumnIdx![columnIdx] = node;\r\n      }\r\n    }\r\n  }\r\n\r\n  protected renderRows(range: { top: number; bottom: number; leftPx: number; rightPx: number; }) {\r\n    const divArrayL: HTMLElement[] = [];\r\n    const divArrayR: HTMLElement[] = [];\r\n    const rows: number[] = [];\r\n    let needToReselectCell = false;\r\n    const dataLength = this.getDataLength();\r\n\r\n    for (let i = range.top as number, ii = range.bottom as number; i <= ii; i++) {\r\n      if (this.rowsCache[i] || (this.hasFrozenRows && this._options.frozenBottom && i === this.getDataLength())) {\r\n        continue;\r\n      }\r\n      this.renderedRows++;\r\n      rows.push(i);\r\n\r\n      // Create an entry right away so that appendRowHtml() can\r\n      // start populating it.\r\n      this.rowsCache[i] = {\r\n        rowNode: null,\r\n\r\n        // ColSpans of rendered cells (by column idx).\r\n        // Can also be used for checking whether a cell has been rendered.\r\n        cellColSpans: [],\r\n\r\n        // Cell nodes (by column idx).  Lazy-populated by ensureCellNodesInRowsCache().\r\n        cellNodesByColumnIdx: [],\r\n\r\n        // Column indices of cell nodes that have been rendered, but not yet indexed in\r\n        // cellNodesByColumnIdx.  These are in the same order as cell nodes added at the\r\n        // end of the row.\r\n        cellRenderQueue: []\r\n      };\r\n\r\n      this.appendRowHtml(divArrayL, divArrayR, i, range, dataLength);\r\n      if (this.activeCellNode && this.activeRow === i) {\r\n        needToReselectCell = true;\r\n      }\r\n      this.counter_rows_rendered++;\r\n    }\r\n\r\n    if (!rows.length) { return; }\r\n\r\n    const x = document.createElement('div');\r\n    const xRight = document.createElement('div');\r\n\r\n    divArrayL.forEach(elm => x.appendChild(elm as HTMLElement));\r\n    divArrayR.forEach(elm => xRight.appendChild(elm as HTMLElement));\r\n\r\n    for (let i = 0, ii = rows.length; i < ii; i++) {\r\n      if ((this.hasFrozenRows) && (rows[i] >= this.actualFrozenRow)) {\r\n        if (this.hasFrozenColumns()) {\r\n          if (this.rowsCache?.hasOwnProperty(rows[i]) && x.firstChild && xRight.firstChild) {\r\n            this.rowsCache[rows[i]].rowNode = [x.firstChild as HTMLElement, xRight.firstChild as HTMLElement];\r\n            this._canvasBottomL.appendChild(x.firstChild as ChildNode);\r\n            this._canvasBottomR.appendChild(xRight.firstChild as ChildNode);\r\n          }\r\n        } else {\r\n          if (this.rowsCache?.hasOwnProperty(rows[i]) && x.firstChild) {\r\n            this.rowsCache[rows[i]].rowNode = [x.firstChild as HTMLElement];\r\n            this._canvasBottomL.appendChild(x.firstChild as ChildNode);\r\n          }\r\n        }\r\n      } else if (this.hasFrozenColumns()) {\r\n        if (this.rowsCache?.hasOwnProperty(rows[i]) && x.firstChild && xRight.firstChild) {\r\n          this.rowsCache[rows[i]].rowNode = [x.firstChild as HTMLElement, xRight.firstChild as HTMLElement];\r\n          this._canvasTopL.appendChild(x.firstChild as ChildNode);\r\n          this._canvasTopR.appendChild(xRight.firstChild as ChildNode);\r\n        }\r\n      } else {\r\n        if (this.rowsCache?.hasOwnProperty(rows[i]) && x.firstChild) {\r\n          this.rowsCache[rows[i]].rowNode = [x.firstChild as HTMLElement];\r\n          this._canvasTopL.appendChild(x.firstChild as ChildNode);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (needToReselectCell) {\r\n      this.activeCellNode = this.getCellNode(this.activeRow, this.activeCell);\r\n    }\r\n  }\r\n\r\n  protected startPostProcessing() {\r\n    if (!this._options.enableAsyncPostRender) {\r\n      return;\r\n    }\r\n    clearTimeout(this.h_postrender);\r\n    this.h_postrender = setTimeout(this.asyncPostProcessRows.bind(this), this._options.asyncPostRenderDelay);\r\n  }\r\n\r\n  protected startPostProcessingCleanup() {\r\n    if (!this._options.enableAsyncPostRenderCleanup) {\r\n      return;\r\n    }\r\n    clearTimeout(this.h_postrenderCleanup);\r\n    this.h_postrenderCleanup = setTimeout(this.asyncPostProcessCleanupRows.bind(this), this._options.asyncPostRenderCleanupDelay);\r\n  }\r\n\r\n  protected invalidatePostProcessingResults(row: number) {\r\n    // change status of columns to be re-rendered\r\n    if (typeof this.postProcessedRows[row] === 'object') {\r\n      Object.keys(this.postProcessedRows[row]).forEach(columnIdx => {\r\n        if (this.postProcessedRows[row].hasOwnProperty(columnIdx)) {\r\n          this.postProcessedRows[row][columnIdx] = 'C';\r\n        }\r\n      });\r\n    }\r\n    this.postProcessFromRow = Math.min(this.postProcessFromRow as number, row);\r\n    this.postProcessToRow = Math.max(this.postProcessToRow as number, row);\r\n    this.startPostProcessing();\r\n  }\r\n\r\n  protected updateRowPositions() {\r\n    for (const row in this.rowsCache) {\r\n      if (this.rowsCache) {\r\n        const rowNumber = row ? parseInt(row, 10) : 0;\r\n        Utils.setStyleSize(this.rowsCache[rowNumber].rowNode![0], 'top', this.getRowTop(rowNumber));\r\n      }\r\n    }\r\n  }\r\n\r\n  /** (re)Render the grid */\r\n  render() {\r\n    if (!this.initialized) { return; }\r\n\r\n    this.scrollThrottle.dequeue();\r\n\r\n    const visible = this.getVisibleRange();\r\n    const rendered = this.getRenderedRange();\r\n\r\n    // remove rows no longer in the viewport\r\n    this.cleanupRows(rendered);\r\n\r\n    // add new rows & missing cells in existing rows\r\n    if (this.lastRenderedScrollLeft !== this.scrollLeft) {\r\n      if (this.hasFrozenRows) {\r\n        const renderedFrozenRows = Utils.extend(true, {}, rendered);\r\n\r\n        if (this._options.frozenBottom) {\r\n          renderedFrozenRows.top = this.actualFrozenRow;\r\n          renderedFrozenRows.bottom = this.getDataLength();\r\n        } else {\r\n          renderedFrozenRows.top = 0;\r\n          renderedFrozenRows.bottom = this._options.frozenRow;\r\n        }\r\n        this.cleanUpAndRenderCells(renderedFrozenRows);\r\n      }\r\n      this.cleanUpAndRenderCells(rendered);\r\n    }\r\n\r\n    // render missing rows\r\n    this.renderRows(rendered);\r\n\r\n    // Render frozen rows\r\n    if (this.hasFrozenRows) {\r\n      if (this._options.frozenBottom) {\r\n        this.renderRows({\r\n          top: this.actualFrozenRow, bottom: this.getDataLength() - 1, leftPx: rendered.leftPx, rightPx: rendered.rightPx\r\n        });\r\n      } else {\r\n        this.renderRows({\r\n          top: 0, bottom: this._options.frozenRow! - 1, leftPx: rendered.leftPx, rightPx: rendered.rightPx\r\n        });\r\n      }\r\n    }\r\n\r\n    this.postProcessFromRow = visible.top;\r\n    this.postProcessToRow = Math.min(this.getDataLengthIncludingAddNew() - 1, visible.bottom);\r\n    this.startPostProcessing();\r\n\r\n    this.lastRenderedScrollTop = this.scrollTop;\r\n    this.lastRenderedScrollLeft = this.scrollLeft;\r\n    this.h_render = null;\r\n    this.trigger(this.onRendered, { startRow: visible.top, endRow: visible.bottom, grid: this });\r\n  }\r\n\r\n  protected handleHeaderRowScroll() {\r\n    const scrollLeft = this._headerRowScrollContainer.scrollLeft;\r\n    if (scrollLeft !== this._viewportScrollContainerX.scrollLeft) {\r\n      this._viewportScrollContainerX.scrollLeft = scrollLeft;\r\n    }\r\n  }\r\n\r\n  protected handleFooterRowScroll() {\r\n    const scrollLeft = this._footerRowScrollContainer.scrollLeft;\r\n    if (scrollLeft !== this._viewportScrollContainerX.scrollLeft) {\r\n      this._viewportScrollContainerX.scrollLeft = scrollLeft;\r\n    }\r\n  }\r\n\r\n  protected handlePreHeaderPanelScroll() {\r\n    this.handleElementScroll(this._preHeaderPanelScroller);\r\n  }\r\n\r\n  protected handleElementScroll(element: HTMLElement) {\r\n    const scrollLeft = element.scrollLeft;\r\n    if (scrollLeft !== this._viewportScrollContainerX.scrollLeft) {\r\n      this._viewportScrollContainerX.scrollLeft = scrollLeft;\r\n    }\r\n  }\r\n\r\n  protected handleScroll() {\r\n    this.scrollTop = this._viewportScrollContainerY.scrollTop;\r\n    this.scrollLeft = this._viewportScrollContainerX.scrollLeft;\r\n    return this._handleScroll(false);\r\n  }\r\n\r\n  protected _handleScroll(isMouseWheel: boolean) {\r\n    let maxScrollDistanceY = this._viewportScrollContainerY.scrollHeight - this._viewportScrollContainerY.clientHeight;\r\n    let maxScrollDistanceX = this._viewportScrollContainerY.scrollWidth - this._viewportScrollContainerY.clientWidth;\r\n\r\n    // Protect against erroneous clientHeight/Width greater than scrollHeight/Width.\r\n    // Sometimes seen in Chrome.\r\n    maxScrollDistanceY = Math.max(0, maxScrollDistanceY);\r\n    maxScrollDistanceX = Math.max(0, maxScrollDistanceX);\r\n\r\n    // Ceiling the max scroll values\r\n    if (this.scrollTop > maxScrollDistanceY) {\r\n      this.scrollTop = maxScrollDistanceY;\r\n    }\r\n    if (this.scrollLeft > maxScrollDistanceX) {\r\n      this.scrollLeft = maxScrollDistanceX;\r\n    }\r\n\r\n    const vScrollDist = Math.abs(this.scrollTop - this.prevScrollTop);\r\n    const hScrollDist = Math.abs(this.scrollLeft - this.prevScrollLeft);\r\n\r\n    if (hScrollDist) {\r\n      this.prevScrollLeft = this.scrollLeft;\r\n\r\n      // adjust scroll position of all div containers when scrolling the grid\r\n      this._viewportScrollContainerX.scrollLeft = this.scrollLeft;\r\n      this._headerScrollContainer.scrollLeft = this.scrollLeft;\r\n      this._topPanelScrollers[0].scrollLeft = this.scrollLeft;\r\n      if (this._options.createFooterRow) {\r\n        this._footerRowScrollContainer.scrollLeft = this.scrollLeft;\r\n      }\r\n      if (this._options.createPreHeaderPanel) {\r\n        if (this.hasFrozenColumns()) {\r\n          this._preHeaderPanelScrollerR.scrollLeft = this.scrollLeft;\r\n        } else {\r\n          this._preHeaderPanelScroller.scrollLeft = this.scrollLeft;\r\n        }\r\n      }\r\n\r\n      if (this.hasFrozenColumns()) {\r\n        if (this.hasFrozenRows) {\r\n          this._viewportTopR.scrollLeft = this.scrollLeft;\r\n        }\r\n        this._headerRowScrollerR.scrollLeft = this.scrollLeft; // right header row scrolling with frozen grid\r\n      } else {\r\n        if (this.hasFrozenRows) {\r\n          this._viewportTopL.scrollLeft = this.scrollLeft;\r\n        }\r\n        this._headerRowScrollerL.scrollLeft = this.scrollLeft; // left header row scrolling with regular grid\r\n      }\r\n    }\r\n\r\n    // autoheight suppresses vertical scrolling, but editors can create a div larger than\r\n    // the row vertical size, which can lead to a vertical scroll bar appearing temporarily\r\n    // while the editor is displayed. this is not part of the grid scrolling, so we should ignore it\r\n    if (vScrollDist && !this._options.autoHeight) {\r\n      this.vScrollDir = this.prevScrollTop < this.scrollTop ? 1 : -1;\r\n      this.prevScrollTop = this.scrollTop;\r\n\r\n      if (isMouseWheel) {\r\n        this._viewportScrollContainerY.scrollTop = this.scrollTop;\r\n      }\r\n\r\n      if (this.hasFrozenColumns()) {\r\n        if (this.hasFrozenRows && !this._options.frozenBottom) {\r\n          this._viewportBottomL.scrollTop = this.scrollTop;\r\n        } else {\r\n          this._viewportTopL.scrollTop = this.scrollTop;\r\n        }\r\n      }\r\n\r\n      // switch virtual pages if needed\r\n      if (vScrollDist < this.viewportH) {\r\n        this.scrollTo(this.scrollTop + this.offset);\r\n      } else {\r\n        const oldOffset = this.offset;\r\n        if (this.h === this.viewportH) {\r\n          this.page = 0;\r\n        } else {\r\n          this.page = Math.min(this.n - 1, Math.floor(this.scrollTop * ((this.th - this.viewportH) / (this.h - this.viewportH)) * (1 / this.ph)));\r\n        }\r\n        this.offset = Math.round(this.page * this.cj);\r\n        if (oldOffset !== this.offset) {\r\n          this.invalidateAllRows();\r\n        }\r\n      }\r\n    }\r\n\r\n    if (hScrollDist || vScrollDist) {\r\n      const dx = Math.abs(this.lastRenderedScrollLeft - this.scrollLeft);\r\n      const dy = Math.abs(this.lastRenderedScrollTop - this.scrollTop);\r\n      if (dx > 20 || dy > 20) {\r\n        // if rendering is forced or scrolling is small enough to be \"easy\", just render\r\n        if (this._options.forceSyncScrolling || (dy < this.viewportH && dx < this.viewportW)) {\r\n          this.render();\r\n        } else {\r\n          // otherwise, perform \"difficult\" renders at a capped frequency\r\n          this.scrollThrottle.enqueue();\r\n        }\r\n\r\n        this.trigger(this.onViewportChanged, {});\r\n      }\r\n    }\r\n\r\n    this.trigger(this.onScroll, { scrollLeft: this.scrollLeft, scrollTop: this.scrollTop });\r\n\r\n    if (hScrollDist || vScrollDist) { return true; }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * limits the frequency at which the provided action is executed.\r\n   * call enqueue to execute the action - it will execute either immediately or, if it was executed less than minPeriod_ms in the past, as soon as minPeriod_ms has expired.\r\n   * call dequeue to cancel any pending action.\r\n   */\r\n  protected actionThrottle(action: () => void, minPeriod_ms: number) {\r\n    let blocked = false;\r\n    let queued = false;\r\n\r\n    const enqueue = () => {\r\n      if (!blocked) {\r\n        blockAndExecute();\r\n      } else {\r\n        queued = true;\r\n      }\r\n    };\r\n\r\n    const dequeue = () => {\r\n      queued = false;\r\n    };\r\n\r\n    const blockAndExecute = () => {\r\n      blocked = true;\r\n      clearTimeout(this._executionBlockTimer);\r\n      this._executionBlockTimer = setTimeout(unblock, minPeriod_ms);\r\n      action.call(this);\r\n    };\r\n\r\n    const unblock = () => {\r\n      if (queued) {\r\n        dequeue();\r\n        blockAndExecute();\r\n      } else {\r\n        blocked = false;\r\n      }\r\n    };\r\n\r\n    return {\r\n      enqueue: enqueue.bind(this),\r\n      dequeue: dequeue.bind(this)\r\n    };\r\n  }\r\n\r\n  protected asyncPostProcessRows() {\r\n    const dataLength = this.getDataLength();\r\n    while (this.postProcessFromRow <= this.postProcessToRow) {\r\n      const row = (this.vScrollDir >= 0) ? this.postProcessFromRow++ : this.postProcessToRow--;\r\n      const cacheEntry = this.rowsCache[row];\r\n      if (!cacheEntry || row >= dataLength) {\r\n        continue;\r\n      }\r\n\r\n      if (!this.postProcessedRows[row]) {\r\n        this.postProcessedRows[row] = {};\r\n      }\r\n\r\n      this.ensureCellNodesInRowsCache(row);\r\n      Object.keys(cacheEntry.cellNodesByColumnIdx).forEach(colIdx => {\r\n        if (cacheEntry.cellNodesByColumnIdx.hasOwnProperty(colIdx)) {\r\n          const columnIdx = +colIdx;\r\n          const m = this.columns[columnIdx];\r\n          const processedStatus = this.postProcessedRows[row][columnIdx]; // C=cleanup and re-render, R=rendered\r\n          if (m.asyncPostRender && processedStatus !== 'R') {\r\n            const node = cacheEntry.cellNodesByColumnIdx[columnIdx];\r\n            if (node) {\r\n              m.asyncPostRender(node, row, this.getDataItem(row), m, (processedStatus === 'C'));\r\n            }\r\n            this.postProcessedRows[row][columnIdx] = 'R';\r\n          }\r\n        }\r\n      });\r\n\r\n      this.h_postrender = setTimeout(this.asyncPostProcessRows.bind(this), this._options.asyncPostRenderDelay);\r\n      return;\r\n    }\r\n  }\r\n\r\n  protected asyncPostProcessCleanupRows() {\r\n    if (this.postProcessedCleanupQueue.length > 0) {\r\n      const groupId = this.postProcessedCleanupQueue[0].groupId;\r\n\r\n      // loop through all queue members with this groupID\r\n      while (this.postProcessedCleanupQueue.length > 0 && this.postProcessedCleanupQueue[0].groupId === groupId) {\r\n        const entry = this.postProcessedCleanupQueue.shift();\r\n        if (entry?.actionType === 'R') {\r\n          (entry.node as HTMLElement[]).forEach((node) => {\r\n            node.remove();\r\n          });\r\n        }\r\n        if (entry?.actionType === 'C') {\r\n          const column = this.columns[entry.columnIdx as number];\r\n          if (column.asyncPostRenderCleanup && entry.node) {\r\n            // cleanup must also remove element\r\n            column.asyncPostRenderCleanup(entry.node as HTMLDivElement, entry.rowIdx as number, column);\r\n          }\r\n        }\r\n      }\r\n\r\n      // call this function again after the specified delay\r\n      this.h_postrenderCleanup = setTimeout(this.asyncPostProcessCleanupRows.bind(this), this._options.asyncPostRenderCleanupDelay);\r\n    }\r\n  }\r\n\r\n  protected updateCellCssStylesOnRenderedRows(addedHash?: CssStyleHash | null, removedHash?: CssStyleHash | null) {\r\n    let node: HTMLElement | null;\r\n    let addedRowHash: any;\r\n    let removedRowHash: any;\r\n    if (typeof this.rowsCache === 'object') {\r\n      Object.keys(this.rowsCache).forEach(row => {\r\n        if (this.rowsCache) {\r\n          removedRowHash = removedHash?.[row];\r\n          addedRowHash = addedHash?.[row];\r\n\r\n          if (removedRowHash) {\r\n            Object.keys(removedRowHash).forEach(columnId => {\r\n              if (!addedRowHash || removedRowHash[columnId] !== addedRowHash[columnId]) {\r\n                node = this.getCellNode(+row, this.getColumnIndex(columnId));\r\n                if (node) {\r\n                  node.classList.remove(removedRowHash[columnId]);\r\n                }\r\n              }\r\n            });\r\n          }\r\n\r\n          if (addedRowHash) {\r\n            Object.keys(addedRowHash).forEach(columnId => {\r\n              if (!removedRowHash || removedRowHash[columnId] !== addedRowHash[columnId]) {\r\n                node = this.getCellNode(+row, this.getColumnIndex(columnId));\r\n                if (node) {\r\n                  node.classList.add(addedRowHash[columnId]);\r\n                }\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds an \"overlay\" of CSS classes to cell DOM elements. SlickGrid can have many such overlays associated with different keys and they are frequently used by plugins. For example, SlickGrid uses this method internally to decorate selected cells with selectedCellCssClass (see options).\r\n   * @param {String} key A unique key you can use in calls to setCellCssStyles and removeCellCssStyles. If a hash with that key has already been set, an exception will be thrown.\r\n   * @param {CssStyleHash} hash A hash of additional cell CSS classes keyed by row number and then by column id. Multiple CSS classes can be specified and separated by space.\r\n   * @example\r\n   * `{\r\n   * \t 0: { number_column: SlickEvent; title_column: SlickEvent;\t},\r\n   * \t 4: { percent_column: SlickEvent; }\r\n   * }`\r\n   */\r\n  addCellCssStyles(key: string, hash: CssStyleHash) {\r\n    if (this.cellCssClasses[key]) {\r\n      throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key \"${key}\" already exists.`);\r\n    }\r\n\r\n    this.cellCssClasses[key] = hash;\r\n    this.updateCellCssStylesOnRenderedRows(hash, null);\r\n    this.trigger(this.onCellCssStylesChanged, { key, hash, grid: this });\r\n  }\r\n\r\n  /**\r\n   * Removes an \"overlay\" of CSS classes from cell DOM elements. See setCellCssStyles for more.\r\n   * @param {String} key A string key.\r\n   */\r\n  removeCellCssStyles(key: string) {\r\n    if (!this.cellCssClasses[key]) {\r\n      return;\r\n    }\r\n\r\n    this.updateCellCssStylesOnRenderedRows(null, this.cellCssClasses[key]);\r\n    delete this.cellCssClasses[key];\r\n    this.trigger(this.onCellCssStylesChanged, { key, hash: null, grid: this });\r\n  }\r\n\r\n  /**\r\n   * Sets CSS classes to specific grid cells by calling removeCellCssStyles(key) followed by addCellCssStyles(key, hash). key is name for this set of styles so you can reference it later - to modify it or remove it, for example. hash is a per-row-index, per-column-name nested hash of CSS classes to apply.\r\n   * Suppose you have a grid with columns:\r\n   * [\"login\", \"name\", \"birthday\", \"age\", \"likes_icecream\", \"favorite_cake\"]\r\n   * ...and you'd like to highlight the \"birthday\" and \"age\" columns for people whose birthday is today, in this case, rows at index 0 and 9. (The first and tenth row in the grid).\r\n   * @param {String} key A string key. Will overwrite any data already associated with this key.\r\n   * @param {Object} hash A hash of additional cell CSS classes keyed by row number and then by column id. Multiple CSS classes can be specified and separated by space.\r\n   */\r\n  setCellCssStyles(key: string, hash: CssStyleHash) {\r\n    const prevHash = this.cellCssClasses[key];\r\n\r\n    this.cellCssClasses[key] = hash;\r\n    this.updateCellCssStylesOnRenderedRows(hash, prevHash);\r\n    this.trigger(this.onCellCssStylesChanged, { key, hash, grid: this });\r\n  }\r\n\r\n  /**\r\n   * Accepts a key name, returns the group of CSS styles defined under that name. See setCellCssStyles for more info.\r\n   * @param {String} key A string.\r\n   */\r\n  getCellCssStyles(key: string): CssStyleHash {\r\n    return this.cellCssClasses[key];\r\n  }\r\n\r\n  /**\r\n   * Flashes the cell twice by toggling the CSS class 4 times.\r\n   * @param {Number} row A row index.\r\n   * @param {Number} cell A column index.\r\n   * @param {Number} [speed] (optional) - The milliseconds delay between the toggling calls. Defaults to 250 ms.\r\n   */\r\n  flashCell(row: number, cell: number, speed = 250) {\r\n    const toggleCellClass = (cellNode: HTMLElement, times: number) => {\r\n      if (times < 1) {\r\n        return;\r\n      }\r\n\r\n      clearTimeout(this._flashCellTimer);\r\n      this._flashCellTimer = setTimeout(() => {\r\n        if (times % 2 === 0) {\r\n          cellNode.classList.add(this._options.cellFlashingCssClass || '');\r\n        } else {\r\n          cellNode.classList.remove(this._options.cellFlashingCssClass || '');\r\n        }\r\n        toggleCellClass(cellNode, times - 1);\r\n      }, speed);\r\n    };\r\n\r\n    if (this.rowsCache[row]) {\r\n      const cellNode = this.getCellNode(row, cell);\r\n      if (cellNode) {\r\n        toggleCellClass(cellNode, 5);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Highlight a row for a certain duration (ms) of time.\r\n   * @param {Number} row - grid row number\r\n   * @param {Number} [duration] - duration (ms), defaults to 400ms\r\n   */\r\n  highlightRow(row: number, duration?: number) {\r\n    const rowCache = this.rowsCache[row];\r\n    duration ||= this._options.rowHighlightDuration;\r\n\r\n    if (Array.isArray(rowCache?.rowNode) && this._options.rowHighlightCssClass) {\r\n      rowCache.rowNode.forEach(node => node.classList.add(...Utils.classNameToList(this._options.rowHighlightCssClass)));\r\n      clearTimeout(this._highlightRowTimer);\r\n      this._highlightRowTimer = setTimeout(() => {\r\n        rowCache.rowNode?.forEach(node => node.classList.remove(...Utils.classNameToList(this._options.rowHighlightCssClass)));\r\n      }, duration);\r\n    }\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Interactivity\r\n\r\n  protected handleMouseWheel(e: MouseEvent, _delta: number, deltaX: number, deltaY: number) {\r\n    this.scrollTop = Math.max(0, this._viewportScrollContainerY.scrollTop - (deltaY * this._options.rowHeight!));\r\n    this.scrollLeft = this._viewportScrollContainerX.scrollLeft + (deltaX * 10);\r\n    const handled = this._handleScroll(true);\r\n    if (handled) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n\r\n  protected handleDragInit(e: DragEvent, dd: DragPosition) {\r\n    const cell = this.getCellFromEvent(e);\r\n    if (!cell || !this.cellExists(cell.row, cell.cell)) {\r\n      return false;\r\n    }\r\n\r\n    const retval = this.trigger(this.onDragInit, dd, e);\r\n    if (retval.isImmediatePropagationStopped()) {\r\n      return retval.getReturnValue();\r\n    }\r\n\r\n    // if nobody claims to be handling drag'n'drop by stopping immediate propagation,\r\n    // cancel out of it\r\n    return false;\r\n  }\r\n\r\n  protected handleDragStart(e: DragEvent, dd: DragPosition) {\r\n    const cell = this.getCellFromEvent(e);\r\n    if (!cell || !this.cellExists(cell.row, cell.cell)) {\r\n      return false;\r\n    }\r\n\r\n    const retval = this.trigger(this.onDragStart, dd, e);\r\n    if (retval.isImmediatePropagationStopped()) {\r\n      return retval.getReturnValue();\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  protected handleDrag(e: DragEvent, dd: DragPosition) {\r\n    return this.trigger(this.onDrag, dd, e).getReturnValue();\r\n  }\r\n\r\n  protected handleDragEnd(e: DragEvent, dd: DragPosition) {\r\n    this.trigger(this.onDragEnd, dd, e);\r\n  }\r\n\r\n  protected handleKeyDown(e: KeyboardEvent & { originalEvent: Event; }) {\r\n    const retval = this.trigger(this.onKeyDown, { row: this.activeRow, cell: this.activeCell }, e);\r\n    let handled: boolean | undefined | void = retval.isImmediatePropagationStopped();\r\n\r\n    if (!handled) {\r\n      if (!e.shiftKey && !e.altKey) {\r\n        if (this._options.editable && this.currentEditor?.keyCaptureList) {\r\n          if (this.currentEditor.keyCaptureList.indexOf(e.which) > -1) {\r\n            return;\r\n          }\r\n        }\r\n        if (e.which === keyCode.HOME) {\r\n          handled = (e.ctrlKey) ? this.navigateTop() : this.navigateRowStart();\r\n        } else if (e.which === keyCode.END) {\r\n          handled = (e.ctrlKey) ? this.navigateBottom() : this.navigateRowEnd();\r\n        }\r\n      }\r\n    }\r\n    if (!handled) {\r\n      if (!e.shiftKey && !e.altKey && !e.ctrlKey) {\r\n        // editor may specify an array of keys to bubble\r\n        if (this._options.editable && this.currentEditor?.keyCaptureList) {\r\n          if (this.currentEditor.keyCaptureList.indexOf(e.which) > -1) {\r\n            return;\r\n          }\r\n        }\r\n        if (e.which === keyCode.ESCAPE) {\r\n          if (!this.getEditorLock()?.isActive()) {\r\n            return; // no editing mode to cancel, allow bubbling and default processing (exit without cancelling the event)\r\n          }\r\n          this.cancelEditAndSetFocus();\r\n        } else if (e.which === keyCode.PAGE_DOWN) {\r\n          this.navigatePageDown();\r\n          handled = true;\r\n        } else if (e.which === keyCode.PAGE_UP) {\r\n          this.navigatePageUp();\r\n          handled = true;\r\n        } else if (e.which === keyCode.LEFT) {\r\n          handled = this.navigateLeft();\r\n        } else if (e.which === keyCode.RIGHT) {\r\n          handled = this.navigateRight();\r\n        } else if (e.which === keyCode.UP) {\r\n          handled = this.navigateUp();\r\n        } else if (e.which === keyCode.DOWN) {\r\n          handled = this.navigateDown();\r\n        } else if (e.which === keyCode.TAB) {\r\n          handled = this.navigateNext();\r\n        } else if (e.which === keyCode.ENTER) {\r\n          if (this._options.editable) {\r\n            if (this.currentEditor) {\r\n              // adding new row\r\n              if (this.activeRow === this.getDataLength()) {\r\n                this.navigateDown();\r\n              } else {\r\n                this.commitEditAndSetFocus();\r\n              }\r\n            } else {\r\n              if (this.getEditorLock()?.commitCurrentEdit()) {\r\n                this.makeActiveCellEditable(undefined, undefined, e);\r\n              }\r\n            }\r\n          }\r\n          handled = true;\r\n        }\r\n      } else if (e.which === keyCode.TAB && e.shiftKey && !e.ctrlKey && !e.altKey) {\r\n        handled = this.navigatePrev();\r\n      }\r\n    }\r\n\r\n    if (handled) {\r\n      // the event has been handled so don't let parent element (bubbling/propagation) or browser (default) handle it\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n      try {\r\n        (e as any).originalEvent.keyCode = 0; // prevent default behaviour for special keys in IE browsers (F3, F5, etc.)\r\n      }\r\n      // ignore exceptions - setting the original event's keycode throws access denied exception for \"Ctrl\"\r\n      // (hitting control key only, nothing else), \"Shift\" (maybe others)\r\n      // eslint-disable-next-line no-empty\r\n      catch (error) { }\r\n    }\r\n  }\r\n\r\n  protected handleClick(evt: DOMEvent<HTMLDivElement> | SlickEventData_) {\r\n    const e = evt instanceof SlickEventData ? evt.getNativeEvent() : evt;\r\n\r\n    if (!this.currentEditor) {\r\n      // if this click resulted in some cell child node getting focus,\r\n      // don't steal it back - keyboard events will still bubble up\r\n      // IE9+ seems to default DIVs to tabIndex=0 instead of -1, so check for cell clicks directly.\r\n      if ((e as DOMEvent<HTMLDivElement>).target !== document.activeElement || (e as DOMEvent<HTMLDivElement>).target.classList.contains('slick-cell')) {\r\n        const selection = this.getTextSelection(); // store text-selection and restore it after\r\n        this.setFocus();\r\n        this.setTextSelection(selection as Range);\r\n      }\r\n    }\r\n\r\n    const cell = this.getCellFromEvent(e);\r\n    if (!cell || (this.currentEditor !== null && this.activeRow === cell.row && this.activeCell === cell.cell)) {\r\n      return;\r\n    }\r\n\r\n    evt = this.trigger(this.onClick, { row: cell.row, cell: cell.cell }, evt || e);\r\n    if ((evt as any).isImmediatePropagationStopped()) {\r\n      return;\r\n    }\r\n\r\n    // this optimisation causes trouble - MLeibman #329\r\n    // if ((activeCell !== cell.cell || activeRow !== cell.row) && canCellBeActive(cell.row, cell.cell)) {\r\n    if (this.canCellBeActive(cell.row, cell.cell)) {\r\n      if (!this.getEditorLock()?.isActive() || this.getEditorLock()?.commitCurrentEdit()) {\r\n        this.scrollRowIntoView(cell.row, false);\r\n\r\n        const preClickModeOn = ((e as DOMEvent<HTMLDivElement>).target?.className === preClickClassName);\r\n        const column = this.columns[cell.cell];\r\n        const suppressActiveCellChangedEvent = !!(this._options.editable && column?.editor && this._options.suppressActiveCellChangeOnEdit);\r\n        this.setActiveCellInternal(this.getCellNode(cell.row, cell.cell), null, preClickModeOn, suppressActiveCellChangedEvent, (e as DOMEvent<HTMLDivElement>));\r\n      }\r\n    }\r\n  }\r\n\r\n  protected handleContextMenu(e: Event & { target: HTMLElement; }) {\r\n    const cell = e.target.closest('.slick-cell');\r\n    if (!cell) {\r\n      return;\r\n    }\r\n\r\n    // are we editing this cell?\r\n    if (this.activeCellNode === cell && this.currentEditor !== null) {\r\n      return;\r\n    }\r\n\r\n    this.trigger(this.onContextMenu, {}, e);\r\n  }\r\n\r\n  protected handleDblClick(e: MouseEvent) {\r\n    const cell = this.getCellFromEvent(e);\r\n    if (!cell || (this.currentEditor !== null && this.activeRow === cell.row && this.activeCell === cell.cell)) {\r\n      return;\r\n    }\r\n\r\n    this.trigger(this.onDblClick, { row: cell.row, cell: cell.cell }, e);\r\n    if (e.defaultPrevented) {\r\n      return;\r\n    }\r\n\r\n    if (this._options.editable) {\r\n      this.gotoCell(cell.row, cell.cell, true, e);\r\n    }\r\n  }\r\n\r\n  protected handleHeaderMouseEnter(e: MouseEvent & { target: HTMLElement; }) {\r\n    const c = Utils.storage.get(e.target.closest('.slick-header-column'), 'column');\r\n    if (!c) {\r\n      return;\r\n    }\r\n    this.trigger(this.onHeaderMouseEnter, {\r\n      column: c,\r\n      grid: this\r\n    }, e);\r\n  }\r\n\r\n  protected handleHeaderMouseLeave(e: MouseEvent & { target: HTMLElement; }) {\r\n    const c = Utils.storage.get(e.target.closest('.slick-header-column'), 'column');\r\n    if (!c) {\r\n      return;\r\n    }\r\n    this.trigger(this.onHeaderMouseLeave, {\r\n      column: c,\r\n      grid: this\r\n    }, e);\r\n  }\r\n\r\n  protected handleHeaderRowMouseEnter(e: MouseEvent & { target: HTMLElement; }) {\r\n    const c = Utils.storage.get(e.target.closest('.slick-headerrow-column'), 'column');\r\n    if (!c) {\r\n      return;\r\n    }\r\n    this.trigger(this.onHeaderRowMouseEnter, {\r\n      column: c,\r\n      grid: this\r\n    }, e);\r\n  }\r\n\r\n  protected handleHeaderRowMouseLeave(e: MouseEvent & { target: HTMLElement; }) {\r\n    const c = Utils.storage.get(e.target.closest('.slick-headerrow-column'), 'column');\r\n    if (!c) {\r\n      return;\r\n    }\r\n    this.trigger(this.onHeaderRowMouseLeave, {\r\n      column: c,\r\n      grid: this\r\n    }, e);\r\n  }\r\n\r\n  protected handleHeaderContextMenu(e: MouseEvent & { target: HTMLElement; }) {\r\n    const header = e.target.closest('.slick-header-column');\r\n    const column = header && Utils.storage.get(header, 'column');\r\n    this.trigger(this.onHeaderContextMenu, { column }, e);\r\n  }\r\n\r\n  protected handleHeaderClick(e: MouseEvent & { target: HTMLElement; }) {\r\n    if (this.columnResizeDragging) {\r\n      return;\r\n    }\r\n\r\n    const header = e.target.closest('.slick-header-column');\r\n    const column = header && Utils.storage.get(header, 'column');\r\n    if (column) {\r\n      this.trigger(this.onHeaderClick, { column }, e);\r\n    }\r\n  }\r\n\r\n  protected handleFooterContextMenu(e: MouseEvent & { target: HTMLElement; }) {\r\n    const footer = e.target.closest('.slick-footerrow-column');\r\n    const column = footer && Utils.storage.get(footer, 'column');\r\n    this.trigger(this.onFooterContextMenu, { column }, e);\r\n  }\r\n\r\n  protected handleFooterClick(e: MouseEvent & { target: HTMLElement; }) {\r\n    const footer = e.target.closest('.slick-footerrow-column');\r\n    const column = footer && Utils.storage.get(footer, 'column');\r\n    this.trigger(this.onFooterClick, { column }, e);\r\n  }\r\n\r\n  protected handleCellMouseOver(e: MouseEvent & { target: HTMLElement; }) {\r\n    this.trigger(this.onMouseEnter, {}, e);\r\n  }\r\n\r\n  protected handleCellMouseOut(e: MouseEvent & { target: HTMLElement; }) {\r\n    this.trigger(this.onMouseLeave, {}, e);\r\n  }\r\n\r\n  protected cellExists(row: number, cell: number) {\r\n    return !(row < 0 || row >= this.getDataLength() || cell < 0 || cell >= this.columns.length);\r\n  }\r\n\r\n  /**\r\n   * Returns row and cell indexes by providing x,y coordinates.\r\n   * Coordinates are relative to the top left corner of the grid beginning with the first row (not including the column headers).\r\n   * @param x An x coordinate.\r\n   * @param y A y coordinate.\r\n   */\r\n  getCellFromPoint(x: number, y: number) {\r\n    let row = this.getRowFromPosition(y);\r\n    let cell = 0;\r\n\r\n    let w = 0;\r\n    for (let i = 0; i < this.columns.length && w <= x; i++) {\r\n      if (!this.columns[i] || this.columns[i].hidden) {\r\n        continue;\r\n      }\r\n      w += this.columns[i].width as number;\r\n      cell++;\r\n    }\r\n    cell -= 1;\r\n\r\n    // we'll return -1 when coordinate falls outside the grid canvas\r\n    if (row < -1) {\r\n      row = -1;\r\n    }\r\n\r\n    return { row, cell };\r\n  }\r\n\r\n  protected getCellFromNode(cellNode: HTMLElement) {\r\n    // read column number from .l<columnNumber> CSS class\r\n    const cls = /l\\d+/.exec(cellNode.className);\r\n    if (!cls) {\r\n      throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${cellNode.className}`);\r\n    }\r\n    return parseInt(cls[0].substr(1, cls[0].length - 1), 10);\r\n  }\r\n\r\n  protected getRowFromNode(rowNode: HTMLElement): number | null {\r\n    for (const row in this.rowsCache) {\r\n      if (this.rowsCache) {\r\n        for (const i in this.rowsCache[row].rowNode) {\r\n          if (this.rowsCache[row].rowNode?.[+i] === rowNode) {\r\n            return (row ? parseInt(row, 10) : 0);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get frozen (pinned) row offset\r\n   * @param {Number} row - grid row number\r\n   */\r\n  getFrozenRowOffset(row: number) {\r\n    // let offset = ( hasFrozenRows ) ? ( this._options.frozenBottom ) ? ( row >= actualFrozenRow ) ? ( h < viewportTopH ) ? ( actualFrozenRow * this._options.rowHeight ) : h : 0 : ( row >= actualFrozenRow ) ? frozenRowsHeight : 0 : 0; // WTF?\r\n    let offset = 0;\r\n    if (this.hasFrozenRows) {\r\n      if (this._options.frozenBottom) {\r\n        if (row >= this.actualFrozenRow) {\r\n          if (this.h < this.viewportTopH) {\r\n            offset = (this.actualFrozenRow * this._options.rowHeight!);\r\n          } else {\r\n            offset = this.h;\r\n          }\r\n        } else {\r\n          offset = 0;\r\n        }\r\n      }\r\n      else {\r\n        if (row >= this.actualFrozenRow) {\r\n          offset = this.frozenRowsHeight;\r\n        } else {\r\n          offset = 0;\r\n        }\r\n      }\r\n    } else {\r\n      offset = 0;\r\n    }\r\n\r\n    return offset;\r\n  }\r\n\r\n  /**\r\n   * Returns a hash containing row and cell indexes from a standard W3C event.\r\n   * @param {*} event A standard W3C event.\r\n   */\r\n  getCellFromEvent(evt: Event | SlickEventData_) {\r\n    const e = evt instanceof SlickEventData ? evt.getNativeEvent() : evt;\r\n    const targetEvent: any = (e as TouchEvent).touches ? (e as TouchEvent).touches[0] : e;\r\n\r\n    const cellNode = (e as Event & { target: HTMLElement }).target.closest('.slick-cell');\r\n    if (!cellNode) {\r\n      return null;\r\n    }\r\n\r\n    let row = this.getRowFromNode(cellNode.parentNode as HTMLElement);\r\n\r\n    if (this.hasFrozenRows) {\r\n      let rowOffset = 0;\r\n      const c = Utils.offset(Utils.parents(cellNode, '.grid-canvas')[0] as HTMLElement);\r\n      const isBottom = Utils.parents(cellNode, '.grid-canvas-bottom').length;\r\n\r\n      if (isBottom) {\r\n        rowOffset = (this._options.frozenBottom) ? Utils.height(this._canvasTopL) as number : this.frozenRowsHeight;\r\n      }\r\n\r\n      row = this.getCellFromPoint(targetEvent.clientX - c!.left, targetEvent.clientY - c!.top + rowOffset + document.documentElement.scrollTop).row;\r\n    }\r\n\r\n    const cell = this.getCellFromNode(cellNode as HTMLElement);\r\n\r\n    if (!Utils.isDefined(row) || !Utils.isDefined(cell)) {\r\n      return null;\r\n    } else {\r\n      return { row, cell };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an object representing information about a cell's position. All coordinates are absolute and take into consideration the visibility and scrolling position of all ancestors.\r\n   * @param {Number} row - A row number.\r\n   * @param {Number} cell - A column number.\r\n   */\r\n  getCellNodeBox(row: number, cell: number) {\r\n    if (!this.cellExists(row, cell)) {\r\n      return null;\r\n    }\r\n\r\n    const frozenRowOffset = this.getFrozenRowOffset(row);\r\n\r\n    const y1 = this.getRowTop(row) - frozenRowOffset;\r\n    const y2 = y1 + this._options.rowHeight! - 1;\r\n    let x1 = 0;\r\n    for (let i = 0; i < cell; i++) {\r\n      if (!this.columns[i] || this.columns[i].hidden) { continue; }\r\n\r\n      x1 += (this.columns[i].width || 0);\r\n\r\n      if (this._options.frozenColumn === i) {\r\n        x1 = 0;\r\n      }\r\n    }\r\n    const x2 = x1 + (this.columns[cell]?.width || 0);\r\n\r\n    return {\r\n      top: y1,\r\n      left: x1,\r\n      bottom: y2,\r\n      right: x2\r\n    };\r\n  }\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // Cell switching\r\n\r\n  /**  Resets active cell. */\r\n  resetActiveCell() {\r\n    this.setActiveCellInternal(null, false);\r\n  }\r\n\r\n  /** @alias `setFocus` */\r\n  focus() {\r\n    this.setFocus();\r\n  }\r\n\r\n  protected setFocus() {\r\n    if (this.tabbingDirection === -1) {\r\n      this._focusSink.focus();\r\n    } else {\r\n      this._focusSink2.focus();\r\n    }\r\n  }\r\n\r\n  /** Scroll to a specific cell and make it into the view */\r\n  scrollCellIntoView(row: number, cell: number, doPaging?: boolean) {\r\n    this.scrollRowIntoView(row, doPaging);\r\n\r\n    if (cell <= this._options.frozenColumn!) {\r\n      return;\r\n    }\r\n\r\n    const colspan = this.getColspan(row, cell);\r\n    this.internalScrollColumnIntoView(this.columnPosLeft[cell], this.columnPosRight[cell + (colspan > 1 ? colspan - 1 : 0)]);\r\n  }\r\n\r\n  protected internalScrollColumnIntoView(left: number, right: number) {\r\n    const scrollRight = this.scrollLeft + (Utils.width(this._viewportScrollContainerX) as number) - (this.viewportHasVScroll ? (this.scrollbarDimensions?.width ?? 0) : 0);\r\n\r\n    if (left < this.scrollLeft) {\r\n      this._viewportScrollContainerX.scrollLeft = left;\r\n      this.handleScroll();\r\n      this.render();\r\n    } else if (right > scrollRight) {\r\n      this._viewportScrollContainerX.scrollLeft = Math.min(left, right - this._viewportScrollContainerX.clientWidth);\r\n      this.handleScroll();\r\n      this.render();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scroll to a specific column and show it into the viewport\r\n   * @param {Number} cell - cell column number\r\n   */\r\n  scrollColumnIntoView(cell: number) {\r\n    this.internalScrollColumnIntoView(this.columnPosLeft[cell], this.columnPosRight[cell]);\r\n  }\r\n\r\n  protected setActiveCellInternal(newCell: HTMLDivElement | null, opt_editMode?: boolean | null, preClickModeOn?: boolean | null, suppressActiveCellChangedEvent?: boolean, e?: Event | SlickEvent_) {\r\n    if (Utils.isDefined(this.activeCellNode)) {\r\n      this.makeActiveCellNormal();\r\n      this.activeCellNode.classList.remove('active');\r\n      this.rowsCache[this.activeRow]?.rowNode?.forEach((node) => node.classList.remove('active'));\r\n    }\r\n\r\n    // let activeCellChanged = (this.activeCellNode !== newCell);\r\n    this.activeCellNode = newCell;\r\n\r\n    if (Utils.isDefined(this.activeCellNode)) {\r\n      const activeCellOffset = Utils.offset(this.activeCellNode);\r\n      let rowOffset = Math.floor(Utils.offset(Utils.parents(this.activeCellNode, '.grid-canvas')[0] as HTMLElement)!.top);\r\n      const isBottom = Utils.parents(this.activeCellNode, '.grid-canvas-bottom').length;\r\n\r\n      if (this.hasFrozenRows && isBottom) {\r\n        rowOffset -= (this._options.frozenBottom)\r\n          ? Utils.height(this._canvasTopL) as number\r\n          : this.frozenRowsHeight;\r\n      }\r\n\r\n      const cell = this.getCellFromPoint(activeCellOffset!.left, Math.ceil(activeCellOffset!.top) - rowOffset);\r\n      this.activeRow = cell.row;\r\n      this.activeCell = this.activePosX = this.activeCell = this.activePosX = this.getCellFromNode(this.activeCellNode);\r\n\r\n      if (!Utils.isDefined(opt_editMode) && this._options.autoEditNewRow) {\r\n        opt_editMode = (this.activeRow === this.getDataLength()) || this._options.autoEdit;\r\n      }\r\n\r\n      if (this._options.showCellSelection) {\r\n        this.activeCellNode.classList.add('active');\r\n        this.rowsCache[this.activeRow]?.rowNode?.forEach((node) => node.classList.add('active'));\r\n      }\r\n\r\n      if (this._options.editable && opt_editMode && this.isCellPotentiallyEditable(this.activeRow, this.activeCell)) {\r\n        clearTimeout(this.h_editorLoader);\r\n\r\n        if (this._options.asyncEditorLoading) {\r\n          this.h_editorLoader = setTimeout(() => {\r\n            this.makeActiveCellEditable(undefined, preClickModeOn, e);\r\n          }, this._options.asyncEditorLoadDelay);\r\n        } else {\r\n          this.makeActiveCellEditable(undefined, preClickModeOn, e);\r\n        }\r\n      }\r\n    } else {\r\n      this.activeRow = this.activeCell = null as any;\r\n    }\r\n\r\n    // this optimisation causes trouble - MLeibman #329\r\n    // if (activeCellChanged) {\r\n    if (!suppressActiveCellChangedEvent) {\r\n      this.trigger<OnActiveCellChangedEventArgs | null>(this.onActiveCellChanged, this.getActiveCell() as OnActiveCellChangedEventArgs);\r\n    }\r\n    // }\r\n  }\r\n\r\n  protected clearTextSelection() {\r\n    if ((document as any).selection?.empty) {\r\n      try {\r\n        // IE fails here if selected element is not in dom\r\n        (document as any).selection.empty();\r\n        // eslint-disable-next-line no-empty\r\n      } catch (e) { }\r\n    } else if (window.getSelection) {\r\n      const sel = window.getSelection();\r\n      if (sel?.removeAllRanges) {\r\n        sel.removeAllRanges();\r\n      }\r\n    }\r\n  }\r\n\r\n  protected isCellPotentiallyEditable(row: number, cell: number) {\r\n    const dataLength = this.getDataLength();\r\n    // is the data for this row loaded?\r\n    if (row < dataLength && !this.getDataItem(row)) {\r\n      return false;\r\n    }\r\n\r\n    // are we in the Add New row? Can we create new from this cell?\r\n    if (this.columns[cell].cannotTriggerInsert && row >= dataLength) {\r\n      return false;\r\n    }\r\n\r\n    // does this cell have an editor?\r\n    if (!this.columns[cell] || this.columns[cell].hidden || !this.getEditor(row, cell)) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Make the cell normal again (for example after destroying cell editor),\r\n   * we can also optionally refocus on the current active cell (again possibly after closing cell editor)\r\n   * @param {Boolean} [refocusActiveCell]\r\n   */\r\n  protected makeActiveCellNormal(refocusActiveCell = false) {\r\n    if (!this.currentEditor) {\r\n      return;\r\n    }\r\n    this.trigger(this.onBeforeCellEditorDestroy, { editor: this.currentEditor });\r\n    this.currentEditor.destroy();\r\n    this.currentEditor = null;\r\n\r\n    if (this.activeCellNode) {\r\n      const d = this.getDataItem(this.activeRow);\r\n      this.activeCellNode.classList.remove('editable');\r\n      this.activeCellNode.classList.remove('invalid');\r\n      if (d) {\r\n        const column = this.columns[this.activeCell];\r\n        const formatter = this.getFormatter(this.activeRow, column);\r\n        const formatterResult = formatter(this.activeRow, this.activeCell, this.getDataItemValueForColumn(d, column), column, d, this as unknown as SlickGridModel);\r\n        this.applyFormatResultToCellNode(formatterResult, this.activeCellNode);\r\n        this.invalidatePostProcessingResults(this.activeRow);\r\n      }\r\n      if (refocusActiveCell) {\r\n        this.setFocus();\r\n      }\r\n    }\r\n\r\n    // if there previously was text selected on a page (such as selected text in the edit cell just removed),\r\n    // IE can't set focus to anything else correctly\r\n    if (navigator.userAgent.toLowerCase().match(/msie/)) {\r\n      this.clearTextSelection();\r\n    }\r\n\r\n    this.getEditorLock()?.deactivate(this.editController as EditController);\r\n  }\r\n\r\n\r\n  editActiveCell(editor: EditorConstructor, preClickModeOn?: boolean | null, e?: Event) {\r\n    this.makeActiveCellEditable(editor, preClickModeOn, e);\r\n  }\r\n\r\n  protected makeActiveCellEditable(editor?: EditorConstructor, preClickModeOn?: boolean | null, e?: Event | SlickEvent_) {\r\n    if (!this.activeCellNode) {\r\n      return;\r\n    }\r\n    if (!this._options.editable) {\r\n      throw new Error('SlickGrid makeActiveCellEditable : should never get called when this._options.editable is false');\r\n    }\r\n\r\n    // cancel pending async call if there is one\r\n    clearTimeout(this.h_editorLoader);\r\n\r\n    if (!this.isCellPotentiallyEditable(this.activeRow, this.activeCell)) {\r\n      return;\r\n    }\r\n\r\n    const columnDef = this.columns[this.activeCell];\r\n    const item = this.getDataItem(this.activeRow);\r\n\r\n    if (this.trigger(this.onBeforeEditCell, { row: this.activeRow, cell: this.activeCell, item, column: columnDef, target: 'grid' }).getReturnValue() === false) {\r\n      this.setFocus();\r\n      return;\r\n    }\r\n\r\n    this.getEditorLock()?.activate(this.editController as EditController);\r\n    this.activeCellNode.classList.add('editable');\r\n\r\n    const useEditor = editor || this.getEditor(this.activeRow, this.activeCell);\r\n    // editor was null and columnMetadata and editorFactory returned null or undefined\r\n    // the editor must be constructable. Also makes sure that useEditor is of type EditorConstructor\r\n    if (!useEditor || typeof useEditor !== 'function') {\r\n      return;\r\n    }\r\n\r\n    // don't clear the cell if a custom editor is passed through\r\n    if (!editor && !useEditor.suppressClearOnEdit) {\r\n      Utils.emptyElement(this.activeCellNode);\r\n    }\r\n\r\n    let metadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(this.activeRow);\r\n    metadata = metadata?.columns as any;\r\n    const columnMetaData = metadata && (metadata[columnDef.id as keyof ItemMetadata] || (metadata as any)[this.activeCell]);\r\n\r\n\r\n    const editorArgs: EditorArguments<TData, C, O> = {\r\n      grid: this,\r\n      gridPosition: this.absBox(this._container),\r\n      position: this.absBox(this.activeCellNode),\r\n      container: this.activeCellNode,\r\n      column: columnDef,\r\n      columnMetaData,\r\n      item: item || {},\r\n      event: e as Event,\r\n      commitChanges: this.commitEditAndSetFocus.bind(this),\r\n      cancelChanges: this.cancelEditAndSetFocus.bind(this)\r\n    };\r\n\r\n    this.currentEditor = new useEditor(editorArgs);\r\n\r\n    if (item && this.currentEditor) {\r\n      this.currentEditor.loadValue(item);\r\n      if (preClickModeOn && this.currentEditor?.preClick) {\r\n        this.currentEditor.preClick();\r\n      }\r\n    }\r\n\r\n    this.serializedEditorValue = this.currentEditor?.serializeValue();\r\n\r\n    if (this.currentEditor?.position) {\r\n      this.handleActiveCellPositionChange();\r\n    }\r\n  }\r\n\r\n  protected commitEditAndSetFocus() {\r\n    // if the commit fails, it would do so due to a validation error\r\n    // if so, do not steal the focus from the editor\r\n    if (this.getEditorLock()?.commitCurrentEdit()) {\r\n      this.setFocus();\r\n      if (this._options.autoEdit && !this._options.autoCommitEdit) {\r\n        this.navigateDown();\r\n      }\r\n    }\r\n  }\r\n\r\n  protected cancelEditAndSetFocus() {\r\n    if (this.getEditorLock()?.cancelCurrentEdit()) {\r\n      this.setFocus();\r\n    }\r\n  }\r\n\r\n  protected absBox(elem: HTMLElement) {\r\n    const box = {\r\n      top: elem.offsetTop,\r\n      left: elem.offsetLeft,\r\n      bottom: 0,\r\n      right: 0,\r\n      width: elem.offsetWidth,\r\n      height: elem.offsetWidth,\r\n      visible: true\r\n    };\r\n    box.bottom = box.top + box.height;\r\n    box.right = box.left + box.width;\r\n\r\n    // walk up the tree\r\n    let offsetParent = elem.offsetParent;\r\n    while ((elem = elem.parentNode as HTMLElement) !== document.body) {\r\n      if (!elem || !elem.parentNode) {\r\n        break;\r\n      }\r\n\r\n      const styles = getComputedStyle(elem);\r\n      if (box.visible && elem.scrollHeight !== elem.offsetHeight && styles['overflowY'] !== 'visible') {\r\n        box.visible = box.bottom > elem.scrollTop && box.top < elem.scrollTop + elem.clientHeight;\r\n      }\r\n\r\n      if (box.visible && elem.scrollWidth !== elem.offsetWidth && styles['overflowX'] !== 'visible') {\r\n        box.visible = box.right > elem.scrollLeft && box.left < elem.scrollLeft + elem.clientWidth;\r\n      }\r\n\r\n      box.left -= elem.scrollLeft;\r\n      box.top -= elem.scrollTop;\r\n\r\n      if (elem === offsetParent) {\r\n        box.left += elem.offsetLeft;\r\n        box.top += elem.offsetTop;\r\n        offsetParent = elem.offsetParent;\r\n      }\r\n\r\n      box.bottom = box.top + box.height;\r\n      box.right = box.left + box.width;\r\n    }\r\n\r\n    return box;\r\n  }\r\n\r\n  /** Returns an object representing information about the active cell's position. All coordinates are absolute and take into consideration the visibility and scrolling position of all ancestors. */\r\n  getActiveCellPosition() {\r\n    return this.absBox(this.activeCellNode as HTMLElement);\r\n  }\r\n\r\n  /** Get the Grid Position */\r\n  getGridPosition() {\r\n    return this.absBox(this._container);\r\n  }\r\n\r\n  protected handleActiveCellPositionChange() {\r\n    if (!this.activeCellNode) {\r\n      return;\r\n    }\r\n\r\n    this.trigger(this.onActiveCellPositionChanged, {});\r\n\r\n    if (this.currentEditor) {\r\n      const cellBox = this.getActiveCellPosition();\r\n      if (this.currentEditor.show && this.currentEditor.hide) {\r\n        if (!cellBox.visible) {\r\n          this.currentEditor.hide();\r\n        } else {\r\n          this.currentEditor.show();\r\n        }\r\n      }\r\n\r\n      if (this.currentEditor.position) {\r\n        this.currentEditor.position(cellBox);\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Returns the active cell editor. If there is no actively edited cell, null is returned.   */\r\n  getCellEditor() {\r\n    return this.currentEditor;\r\n  }\r\n\r\n  /**\r\n   * Returns an object representing the coordinates of the currently active cell:\r\n   * @example\t`{ row: activeRow, cell: activeCell }`\r\n   */\r\n  getActiveCell() {\r\n    if (!this.activeCellNode) {\r\n      return null;\r\n    }\r\n    return { row: this.activeRow, cell: this.activeCell };\r\n  }\r\n\r\n  /** Returns the DOM element containing the currently active cell. If no cell is active, null is returned. */\r\n  getActiveCellNode() {\r\n    return this.activeCellNode;\r\n  }\r\n\r\n  // This get/set methods are used for keeping text-selection. These don't consider IE because they don't loose text-selection.\r\n  // Fix for firefox selection. See https://github.com/mleibman/SlickGrid/pull/746/files\r\n  protected getTextSelection() {\r\n    let textSelection: Range | null = null;\r\n    if (window.getSelection) {\r\n      const selection = window.getSelection();\r\n      if ((selection?.rangeCount ?? 0) > 0) {\r\n        textSelection = selection!.getRangeAt(0);\r\n      }\r\n    }\r\n    return textSelection;\r\n  }\r\n\r\n  protected setTextSelection(selection: Range) {\r\n    if (window.getSelection && selection) {\r\n      const target = window.getSelection();\r\n      if (target) {\r\n        target.removeAllRanges();\r\n        target.addRange(selection);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scroll to a specific row and make it into the view\r\n   * @param {Number} row - grid row number\r\n   * @param {Boolean} doPaging - scroll when pagination is enabled\r\n   */\r\n  scrollRowIntoView(row: number, doPaging?: boolean) {\r\n    if (!this.hasFrozenRows ||\r\n      (!this._options.frozenBottom && row > this.actualFrozenRow - 1) ||\r\n      (this._options.frozenBottom && row < this.actualFrozenRow - 1)) {\r\n\r\n      const viewportScrollH = Utils.height(this._viewportScrollContainerY) as number;\r\n\r\n      // if frozen row on top\r\n      // subtract number of frozen row\r\n      const rowNumber = (this.hasFrozenRows && !this._options.frozenBottom ? row - this._options.frozenRow! : row);\r\n\r\n      const rowAtTop = rowNumber * this._options.rowHeight!;\r\n      const rowAtBottom = (rowNumber + 1) * this._options.rowHeight!\r\n        - viewportScrollH\r\n        + (this.viewportHasHScroll ? (this.scrollbarDimensions?.height ?? 0) : 0);\r\n\r\n      // need to page down?\r\n      if ((rowNumber + 1) * this._options.rowHeight! > this.scrollTop + viewportScrollH + this.offset) {\r\n        this.scrollTo(doPaging ? rowAtTop : rowAtBottom);\r\n        this.render();\r\n      }\r\n      // or page up?\r\n      else if (rowNumber * this._options.rowHeight! < this.scrollTop + this.offset) {\r\n        this.scrollTo(doPaging ? rowAtBottom : rowAtTop);\r\n        this.render();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scroll to the top row and make it into the view\r\n   * @param {Number} row - grid row number\r\n   */\r\n  scrollRowToTop(row: number) {\r\n    this.scrollTo(row * this._options.rowHeight!);\r\n    this.render();\r\n  }\r\n\r\n  protected scrollPage(dir: number) {\r\n    const deltaRows = dir * this.numVisibleRows;\r\n    /// First fully visible row crosses the line with\r\n    /// y === bottomOfTopmostFullyVisibleRow\r\n    const bottomOfTopmostFullyVisibleRow = this.scrollTop + this._options.rowHeight! - 1;\r\n    this.scrollTo((this.getRowFromPosition(bottomOfTopmostFullyVisibleRow) + deltaRows) * this._options.rowHeight!);\r\n    this.render();\r\n\r\n    if (this._options.enableCellNavigation && Utils.isDefined(this.activeRow)) {\r\n      let row = this.activeRow + deltaRows;\r\n      const dataLengthIncludingAddNew = this.getDataLengthIncludingAddNew();\r\n      if (row >= dataLengthIncludingAddNew) {\r\n        row = dataLengthIncludingAddNew - 1;\r\n      }\r\n      if (row < 0) {\r\n        row = 0;\r\n      }\r\n\r\n      let cell = 0;\r\n      let prevCell: number | null = null;\r\n      const prevActivePosX = this.activePosX;\r\n      while (cell <= this.activePosX) {\r\n        if (this.canCellBeActive(row, cell)) {\r\n          prevCell = cell;\r\n        }\r\n        cell += this.getColspan(row, cell);\r\n      }\r\n\r\n      if (prevCell !== null) {\r\n        this.setActiveCellInternal(this.getCellNode(row, prevCell));\r\n        this.activePosX = prevActivePosX;\r\n      } else {\r\n        this.resetActiveCell();\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Navigate (scroll) by a page down */\r\n  navigatePageDown() {\r\n    this.scrollPage(1);\r\n  }\r\n\r\n  /** Navigate (scroll) by a page up */\r\n  navigatePageUp() {\r\n    this.scrollPage(-1);\r\n  }\r\n\r\n  /** Navigate to the top of the grid */\r\n  navigateTop() {\r\n    this.navigateToRow(0);\r\n  }\r\n\r\n  /** Navigate to the bottom of the grid */\r\n  navigateBottom() {\r\n    this.navigateToRow(this.getDataLength() - 1);\r\n  }\r\n\r\n  protected navigateToRow(row: number) {\r\n    const num_rows = this.getDataLength();\r\n    if (!num_rows) { return true; }\r\n\r\n    if (row < 0) {\r\n      row = 0;\r\n    } else if (row >= num_rows) {\r\n      row = num_rows - 1;\r\n    }\r\n\r\n    this.scrollCellIntoView(row, 0, true);\r\n    if (this._options.enableCellNavigation && Utils.isDefined(this.activeRow)) {\r\n      let cell = 0;\r\n      let prevCell: number | null = null;\r\n      const prevActivePosX = this.activePosX;\r\n      while (cell <= this.activePosX) {\r\n        if (this.canCellBeActive(row, cell)) {\r\n          prevCell = cell;\r\n        }\r\n        cell += this.getColspan(row, cell);\r\n      }\r\n\r\n      if (prevCell !== null) {\r\n        this.setActiveCellInternal(this.getCellNode(row, prevCell));\r\n        this.activePosX = prevActivePosX;\r\n      } else {\r\n        this.resetActiveCell();\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  protected getColspan(row: number, cell: number): number {\r\n    const metadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n    if (!metadata || !metadata.columns) {\r\n      return 1;\r\n    }\r\n\r\n    const columnData = metadata.columns[this.columns[cell].id] || metadata.columns[cell];\r\n    let colspan = columnData?.colspan;\r\n    if (colspan === '*') {\r\n      colspan = this.columns.length - cell;\r\n    } else {\r\n      colspan = colspan || 1;\r\n    }\r\n\r\n    return colspan as number;\r\n  }\r\n\r\n  protected findFirstFocusableCell(row: number) {\r\n    let cell = 0;\r\n    while (cell < this.columns.length) {\r\n      if (this.canCellBeActive(row, cell)) {\r\n        return cell;\r\n      }\r\n      cell += this.getColspan(row, cell);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  protected findLastFocusableCell(row: number) {\r\n    let cell = 0;\r\n    let lastFocusableCell: number | null = null;\r\n    while (cell < this.columns.length) {\r\n      if (this.canCellBeActive(row, cell)) {\r\n        lastFocusableCell = cell;\r\n      }\r\n      cell += this.getColspan(row, cell);\r\n    }\r\n    return lastFocusableCell;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected gotoRight(row: number, cell: number, _posX?: number) {\r\n    if (cell >= this.columns.length) {\r\n      return null;\r\n    }\r\n\r\n    do {\r\n      cell += this.getColspan(row, cell);\r\n    }\r\n    while (cell < this.columns.length && !this.canCellBeActive(row, cell));\r\n\r\n    if (cell < this.columns.length) {\r\n      return {\r\n        row,\r\n        cell,\r\n        posX: cell\r\n      };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected gotoLeft(row: number, cell: number, _posX?: number) {\r\n    if (cell <= 0) {\r\n      return null;\r\n    }\r\n\r\n    const firstFocusableCell = this.findFirstFocusableCell(row);\r\n    if (firstFocusableCell === null || firstFocusableCell >= cell) {\r\n      return null;\r\n    }\r\n\r\n    let prev = {\r\n      row,\r\n      cell: firstFocusableCell,\r\n      posX: firstFocusableCell\r\n    };\r\n    let pos;\r\n    while (true) {\r\n      pos = this.gotoRight(prev.row, prev.cell, prev.posX);\r\n      if (!pos) {\r\n        return null;\r\n      }\r\n      if (pos.cell >= cell) {\r\n        return prev;\r\n      }\r\n      prev = pos;\r\n    }\r\n  }\r\n\r\n  protected gotoDown(row: number, cell: number, posX: number) {\r\n    let prevCell;\r\n    const dataLengthIncludingAddNew = this.getDataLengthIncludingAddNew();\r\n    while (true) {\r\n      if (++row >= dataLengthIncludingAddNew) {\r\n        return null;\r\n      }\r\n\r\n      prevCell = cell = 0;\r\n      while (cell <= posX) {\r\n        prevCell = cell;\r\n        cell += this.getColspan(row, cell);\r\n      }\r\n\r\n      if (this.canCellBeActive(row, prevCell)) {\r\n        return {\r\n          row,\r\n          cell: prevCell,\r\n          posX\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  protected gotoUp(row: number, cell: number, posX: number) {\r\n    let prevCell;\r\n    while (true) {\r\n      if (--row < 0) {\r\n        return null;\r\n      }\r\n\r\n      prevCell = cell = 0;\r\n      while (cell <= posX) {\r\n        prevCell = cell;\r\n        cell += this.getColspan(row, cell);\r\n      }\r\n\r\n      if (this.canCellBeActive(row, prevCell)) {\r\n        return {\r\n          row,\r\n          cell: prevCell,\r\n          posX\r\n        };\r\n      }\r\n    }\r\n  }\r\n\r\n  protected gotoNext(row: number, cell: number, posX?: number) {\r\n    if (!Utils.isDefined(row) && !Utils.isDefined(cell)) {\r\n      row = cell = posX = 0;\r\n      if (this.canCellBeActive(row, cell)) {\r\n        return {\r\n          row,\r\n          cell,\r\n          posX: cell\r\n        };\r\n      }\r\n    }\r\n\r\n    const pos = this.gotoRight(row, cell, posX);\r\n    if (pos) {\r\n      return pos;\r\n    }\r\n\r\n    let firstFocusableCell: number | null = null;\r\n    const dataLengthIncludingAddNew = this.getDataLengthIncludingAddNew();\r\n\r\n    // if at last row, cycle through columns rather than get stuck in the last one\r\n    if (row === dataLengthIncludingAddNew - 1) { row--; }\r\n\r\n    while (++row < dataLengthIncludingAddNew) {\r\n      firstFocusableCell = this.findFirstFocusableCell(row);\r\n      if (firstFocusableCell !== null) {\r\n        return {\r\n          row,\r\n          cell: firstFocusableCell,\r\n          posX: firstFocusableCell\r\n        };\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  protected gotoPrev(row: number, cell: number, posX?: number) {\r\n    if (!Utils.isDefined(row) && !Utils.isDefined(cell)) {\r\n      row = this.getDataLengthIncludingAddNew() - 1;\r\n      cell = posX = this.columns.length - 1;\r\n      if (this.canCellBeActive(row, cell)) {\r\n        return {\r\n          row,\r\n          cell,\r\n          posX: cell\r\n        };\r\n      }\r\n    }\r\n\r\n    let pos;\r\n    let lastSelectableCell;\r\n    while (!pos) {\r\n      pos = this.gotoLeft(row, cell, posX);\r\n      if (pos) {\r\n        break;\r\n      }\r\n      if (--row < 0) {\r\n        return null;\r\n      }\r\n\r\n      cell = 0;\r\n      lastSelectableCell = this.findLastFocusableCell(row);\r\n      if (lastSelectableCell !== null) {\r\n        pos = {\r\n          row,\r\n          cell: lastSelectableCell,\r\n          posX: lastSelectableCell\r\n        };\r\n      }\r\n    }\r\n    return pos;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected gotoRowStart(row: number, _cell: number, _posX?: number) {\r\n    const newCell = this.findFirstFocusableCell(row);\r\n    if (newCell === null) { return null; }\r\n\r\n    return {\r\n      row,\r\n      cell: newCell,\r\n      posX: newCell\r\n    };\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  protected gotoRowEnd(row: number, _cell: number, _posX?: number) {\r\n    const newCell = this.findLastFocusableCell(row);\r\n    if (newCell === null) { return null; }\r\n\r\n    return {\r\n      row,\r\n      cell: newCell,\r\n      posX: newCell\r\n    };\r\n  }\r\n\r\n  /** Switches the active cell one cell right skipping unselectable cells. Unline navigateNext, navigateRight stops at the last cell of the row. Returns a boolean saying whether it was able to complete or not. */\r\n  navigateRight() {\r\n    return this.navigate('right');\r\n  }\r\n\r\n  /** Switches the active cell one cell left skipping unselectable cells. Unline navigatePrev, navigateLeft stops at the first cell of the row. Returns a boolean saying whether it was able to complete or not. */\r\n  navigateLeft() {\r\n    return this.navigate('left');\r\n  }\r\n\r\n  /** Switches the active cell one row down skipping unselectable cells. Returns a boolean saying whether it was able to complete or not. */\r\n  navigateDown() {\r\n    return this.navigate('down');\r\n  }\r\n\r\n  /** Switches the active cell one row up skipping unselectable cells. Returns a boolean saying whether it was able to complete or not. */\r\n  navigateUp() {\r\n    return this.navigate('up');\r\n  }\r\n\r\n  /** Tabs over active cell to the next selectable cell. Returns a boolean saying whether it was able to complete or not. */\r\n  navigateNext() {\r\n    return this.navigate('next');\r\n  }\r\n\r\n  /** Tabs over active cell to the previous selectable cell. Returns a boolean saying whether it was able to complete or not. */\r\n  navigatePrev() {\r\n    return this.navigate('prev');\r\n  }\r\n\r\n  /** Navigate to the start row in the grid */\r\n  navigateRowStart() {\r\n    return this.navigate('home');\r\n  }\r\n\r\n  /** Navigate to the end row in the grid */\r\n  navigateRowEnd() {\r\n    return this.navigate('end');\r\n  }\r\n\r\n  /**\r\n   * @param {string} dir Navigation direction.\r\n   * @return {boolean} Whether navigation resulted in a change of active cell.\r\n   */\r\n  protected navigate(dir: 'up' | 'down' | 'left' | 'right' | 'prev' | 'next' | 'home' | 'end') {\r\n    if (!this._options.enableCellNavigation) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.activeCellNode && dir !== 'prev' && dir !== 'next') {\r\n      return false;\r\n    }\r\n\r\n    if (!this.getEditorLock()?.commitCurrentEdit()) {\r\n      return true;\r\n    }\r\n    this.setFocus();\r\n\r\n    const tabbingDirections = {\r\n      'up': -1,\r\n      'down': 1,\r\n      'left': -1,\r\n      'right': 1,\r\n      'prev': -1,\r\n      'next': 1,\r\n      'home': -1,\r\n      'end': 1\r\n    };\r\n    this.tabbingDirection = tabbingDirections[dir];\r\n\r\n    const stepFunctions = {\r\n      'up': this.gotoUp,\r\n      'down': this.gotoDown,\r\n      'left': this.gotoLeft,\r\n      'right': this.gotoRight,\r\n      'prev': this.gotoPrev,\r\n      'next': this.gotoNext,\r\n      'home': this.gotoRowStart,\r\n      'end': this.gotoRowEnd\r\n    };\r\n    const stepFn = stepFunctions[dir];\r\n    const pos = stepFn.call(this, this.activeRow, this.activeCell, this.activePosX);\r\n    if (pos) {\r\n      if (this.hasFrozenRows && this._options.frozenBottom && pos.row === this.getDataLength()) {\r\n        return;\r\n      }\r\n\r\n      const isAddNewRow = (pos.row === this.getDataLength());\r\n\r\n      if ((!this._options.frozenBottom && pos.row >= this.actualFrozenRow)\r\n        || (this._options.frozenBottom && pos.row < this.actualFrozenRow)\r\n      ) {\r\n        this.scrollCellIntoView(pos.row, pos.cell, !isAddNewRow && this._options.emulatePagingWhenScrolling);\r\n      }\r\n      this.setActiveCellInternal(this.getCellNode(pos.row, pos.cell));\r\n      this.activePosX = pos.posX;\r\n      return true;\r\n    } else {\r\n      this.setActiveCellInternal(this.getCellNode(this.activeRow, this.activeCell));\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns a DOM element containing a cell at a given row and cell.\r\n   * @param row A row index.\r\n   * @param cell A column index.\r\n   */\r\n  getCellNode(row: number, cell: number): HTMLDivElement | null {\r\n    if (this.rowsCache[row]) {\r\n      this.ensureCellNodesInRowsCache(row);\r\n      try {\r\n        if (this.rowsCache[row].cellNodesByColumnIdx.length > cell) {\r\n          return this.rowsCache[row].cellNodesByColumnIdx[cell] as HTMLDivElement | null;\r\n        }\r\n        else {\r\n          return null;\r\n        }\r\n      } catch (e) {\r\n        return this.rowsCache[row].cellNodesByColumnIdx[cell] as HTMLDivElement | null;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Sets an active cell.\r\n   * @param {number} row - A row index.\r\n   * @param {number} cell - A column index.\r\n   * @param {boolean} [optionEditMode] Option Edit Mode is Auto-Edit?\r\n   * @param {boolean} [preClickModeOn] Pre-Click Mode is Enabled?\r\n   * @param {boolean} [suppressActiveCellChangedEvent] Are we suppressing Active Cell Changed Event (defaults to false)\r\n   */\r\n  setActiveCell(row: number, cell: number, opt_editMode?: boolean, preClickModeOn?: boolean, suppressActiveCellChangedEvent?: boolean) {\r\n    if (!this.initialized) { return; }\r\n    if (row > this.getDataLength() || row < 0 || cell >= this.columns.length || cell < 0) {\r\n      return;\r\n    }\r\n\r\n    if (!this._options.enableCellNavigation) {\r\n      return;\r\n    }\r\n\r\n    this.scrollCellIntoView(row, cell, false);\r\n    this.setActiveCellInternal(this.getCellNode(row, cell), opt_editMode, preClickModeOn, suppressActiveCellChangedEvent);\r\n  }\r\n\r\n  /**\r\n   * Sets an active cell.\r\n   * @param {number} row - A row index.\r\n   * @param {number} cell - A column index.\r\n   * @param {boolean} [suppressScrollIntoView] - optionally suppress the ScrollIntoView that happens by default (defaults to false)\r\n   */\r\n  setActiveRow(row: number, cell?: number, suppressScrollIntoView?: boolean) {\r\n    if (!this.initialized) { return; }\r\n    if (row > this.getDataLength() || row < 0 || (cell ?? 0) >= this.columns.length || (cell ?? 0) < 0) {\r\n      return;\r\n    }\r\n\r\n    this.activeRow = row;\r\n    if (!suppressScrollIntoView) {\r\n      this.scrollCellIntoView(row, cell || 0, false);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns true if you can click on a given cell and make it the active focus.\r\n   * @param {number} row A row index.\r\n   * @param {number} col A column index.\r\n   */\r\n  canCellBeActive(row: number, cell: number) {\r\n    if (!this._options.enableCellNavigation || row >= this.getDataLengthIncludingAddNew() ||\r\n      row < 0 || cell >= this.columns.length || cell < 0) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.columns[cell] || this.columns[cell].hidden) {\r\n      return false;\r\n    }\r\n\r\n    const rowMetadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n    if (rowMetadata?.focusable !== undefined) {\r\n      return !!rowMetadata.focusable;\r\n    }\r\n\r\n    const columnMetadata = rowMetadata?.columns;\r\n    if (columnMetadata?.[this.columns[cell].id]?.focusable !== undefined) {\r\n      return !!columnMetadata[this.columns[cell].id].focusable;\r\n    }\r\n    if (columnMetadata?.[cell]?.focusable !== undefined) {\r\n      return !!columnMetadata[cell].focusable;\r\n    }\r\n\r\n    return !!(this.columns[cell].focusable);\r\n  }\r\n\r\n  /**\r\n   * Returns true if selecting the row causes this particular cell to have the selectedCellCssClass applied to it. A cell can be selected if it exists and if it isn't on an empty / \"Add New\" row and if it is not marked as \"unselectable\" in the column definition.\r\n   * @param {number} row A row index.\r\n   * @param {number} col A column index.\r\n   */\r\n  canCellBeSelected(row: number, cell: number) {\r\n    if (row >= this.getDataLength() || row < 0 || cell >= this.columns.length || cell < 0) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.columns[cell] || this.columns[cell].hidden) {\r\n      return false;\r\n    }\r\n\r\n    const rowMetadata = (this.data as CustomDataView<TData>)?.getItemMetadata?.(row);\r\n    if (rowMetadata?.selectable !== undefined) {\r\n      return !!rowMetadata.selectable;\r\n    }\r\n\r\n    const columnMetadata = rowMetadata?.columns && (rowMetadata.columns[this.columns[cell].id] || rowMetadata.columns[cell]);\r\n    if (columnMetadata?.selectable !== undefined) {\r\n      return !!columnMetadata.selectable;\r\n    }\r\n\r\n    return !!this.columns[cell].selectable;\r\n  }\r\n\r\n  /**\r\n   * Accepts a row integer and a cell integer, scrolling the view to the row where row is its row index, and cell is its cell index. Optionally accepts a forceEdit boolean which, if true, will attempt to initiate the edit dialogue for the field in the specified cell.\r\n   * Unlike setActiveCell, this scrolls the row into the viewport and sets the keyboard focus.\r\n   * @param {Number} row A row index.\r\n   * @param {Number} cell A column index.\r\n   * @param {Boolean} [forceEdit] If true, will attempt to initiate the edit dialogue for the field in the specified cell.\r\n   */\r\n  gotoCell(row: number, cell: number, forceEdit?: boolean, e?: Event | SlickEvent_) {\r\n    if (!this.initialized) { return; }\r\n    if (!this.canCellBeActive(row, cell)) {\r\n      return;\r\n    }\r\n\r\n    if (!this.getEditorLock()?.commitCurrentEdit()) {\r\n      return;\r\n    }\r\n\r\n    this.scrollCellIntoView(row, cell, false);\r\n\r\n    const newCell = this.getCellNode(row, cell);\r\n\r\n    // if selecting the 'add new' row, start editing right away\r\n    const column = this.columns[cell];\r\n    const suppressActiveCellChangedEvent = !!(this._options.editable && column?.editor && this._options.suppressActiveCellChangeOnEdit);\r\n    this.setActiveCellInternal(newCell, (forceEdit || (row === this.getDataLength()) || this._options.autoEdit), null, suppressActiveCellChangedEvent, e);\r\n\r\n    // if no editor was created, set the focus back on the grid\r\n    if (!this.currentEditor) {\r\n      this.setFocus();\r\n    }\r\n  }\r\n\r\n\r\n  //////////////////////////////////////////////////////////////////////////////////////////////\r\n  // IEditor implementation for the editor lock\r\n\r\n  protected commitCurrentEdit() {\r\n    const self = this as SlickGrid<TData, C, O>;\r\n    const item = self.getDataItem(self.activeRow);\r\n    const column = self.columns[self.activeCell];\r\n\r\n    if (self.currentEditor) {\r\n      if (self.currentEditor.isValueChanged()) {\r\n        const validationResults = self.currentEditor.validate();\r\n\r\n        if (validationResults.valid) {\r\n          const row = self.activeRow;\r\n          const cell = self.activeCell;\r\n          const editor = self.currentEditor;\r\n          const serializedValue = self.currentEditor.serializeValue();\r\n          const prevSerializedValue = self.serializedEditorValue;\r\n\r\n          if (self.activeRow < self.getDataLength()) {\r\n            const editCommand = {\r\n              row,\r\n              cell,\r\n              editor,\r\n              serializedValue,\r\n              prevSerializedValue,\r\n              execute: () => {\r\n                editor.applyValue(item, serializedValue);\r\n                self.updateRow(row);\r\n                self.trigger(self.onCellChange, { command: 'execute', row, cell, item, column });\r\n              },\r\n              undo: () => {\r\n                editor.applyValue(item, prevSerializedValue);\r\n                self.updateRow(row);\r\n                self.trigger(self.onCellChange, { command: 'undo', row, cell, item, column, });\r\n              }\r\n            };\r\n\r\n            if (self._options.editCommandHandler) {\r\n              self.makeActiveCellNormal(true);\r\n              self._options.editCommandHandler(item, column, editCommand);\r\n            } else {\r\n              editCommand.execute();\r\n              self.makeActiveCellNormal(true);\r\n            }\r\n\r\n          } else {\r\n            const newItem = {};\r\n            self.currentEditor.applyValue(newItem, self.currentEditor.serializeValue());\r\n            self.makeActiveCellNormal(true);\r\n            self.trigger(self.onAddNewRow, { item: newItem, column });\r\n          }\r\n\r\n          // check whether the lock has been re-acquired by event handlers\r\n          return !self.getEditorLock()?.isActive();\r\n        } else {\r\n          // Re-add the CSS class to trigger transitions, if any.\r\n          if (self.activeCellNode) {\r\n            self.activeCellNode.classList.remove('invalid');\r\n            Utils.width(self.activeCellNode);// force layout\r\n            self.activeCellNode.classList.add('invalid');\r\n          }\r\n\r\n          self.trigger(self.onValidationError, {\r\n            editor: self.currentEditor,\r\n            cellNode: self.activeCellNode,\r\n            validationResults,\r\n            row: self.activeRow,\r\n            cell: self.activeCell,\r\n            column\r\n          });\r\n\r\n          self.currentEditor.focus();\r\n          return false;\r\n        }\r\n      }\r\n\r\n      self.makeActiveCellNormal(true);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  protected cancelCurrentEdit() {\r\n    this.makeActiveCellNormal();\r\n    return true;\r\n  }\r\n\r\n  protected rowsToRanges(rows: number[]) {\r\n    const ranges: SlickRange_[] = [];\r\n    const lastCell = this.columns.length - 1;\r\n    for (let i = 0; i < rows.length; i++) {\r\n      ranges.push(new SlickRange(rows[i], 0, rows[i], lastCell));\r\n    }\r\n    return ranges;\r\n  }\r\n\r\n  /** Returns an array of row indices corresponding to the currently selected rows. */\r\n  getSelectedRows() {\r\n    if (!this.selectionModel) {\r\n      throw new Error('SlickGrid Selection model is not set');\r\n    }\r\n    return this.selectedRows.slice(0);\r\n  }\r\n\r\n  /**\r\n   * Accepts an array of row indices and applies the current selectedCellCssClass to the cells in the row, respecting whether cells have been flagged as selectable.\r\n   * @param {Array<number>} rowsArray - an array of row numbers.\r\n   * @param {String} [caller] - an optional string to identify who called the method\r\n   */\r\n  setSelectedRows(rows: number[], caller?: string) {\r\n    if (!this.selectionModel) {\r\n      throw new Error('SlickGrid Selection model is not set');\r\n    }\r\n    if (this && this.getEditorLock && !this.getEditorLock()?.isActive()) {\r\n      this.selectionModel.setSelectedRanges(this.rowsToRanges(rows), caller || 'SlickGrid.setSelectedRows');\r\n    }\r\n  }\r\n\r\n  /** html sanitizer to avoid scripting attack */\r\n  sanitizeHtmlString(dirtyHtml: string, suppressLogging?: boolean) {\r\n    if (!this._options.sanitizer || typeof dirtyHtml !== 'string') {\r\n      return dirtyHtml;\r\n    }\r\n\r\n    const cleanHtml = this._options.sanitizer(dirtyHtml);\r\n\r\n    if (!suppressLogging && this._options.logSanitizedHtml && this.logMessageCount <= this.logMessageMaxCount && cleanHtml !== dirtyHtml) {\r\n      console.log(`sanitizer altered html: ${dirtyHtml} --> ${cleanHtml}`);\r\n      if (this.logMessageCount === this.logMessageMaxCount) {\r\n        console.log(`sanitizer: silencing messages after first ${this.logMessageMaxCount}`);\r\n      }\r\n      this.logMessageCount++;\r\n    }\r\n    return cleanHtml;\r\n  }\r\n}\r\n\r\n// extend Slick namespace on window object when building as iife\r\nif (IIFE_ONLY && window.Slick) {\r\n  Utils.extend(Slick, {\r\n    Grid: SlickGrid,\r\n  });\r\n}"],
  "mappings": "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",
  "names": ["_a", "_b"]
}
