/**
 * SlickGrid v4.0.0-beta.0
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-05-17
 * file: ./plugins/slick.cellmenu.js
 */
!function(e){Slick.Utils.extend(!0,e,{Slick:{Plugins:{CellMenu:function(t){let r,u=-1,m=-1,p,f,d="",l=new Slick.EventHandler,c=this,a,g,h,v=new Slick.BindingEventService,i={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,maxHeight:"none",width:"auto"};function e(e){var t=p.getCellFromEvent(e),t=(u=t&&t.cell,m=t&&t.row,p.getColumns()[u]),l=p.getDataItem(m),i=r.commandItems||[],n=r.optionItems||[];if(t&&t.cellMenu&&(i.length||n.length)&&(b(),0!=c.onBeforeMenuShow.notify({cell:u,row:m,grid:p},e,c).getReturnValue())){var o=isNaN(r.maxHeight)?r.maxHeight:r.maxHeight+"px",s=isNaN(r.width)?r.width:r.width+"px",s=((h=document.createElement("div")).className="slick-cell-menu "+d,h.role="menu",h.style.width=s,h.style.maxHeight=o,h.style.top=e.pageY+5+"px",h.style.left=e.pageX+"px",h.style.display="none",document.createElement("button")),o=(s.type="button",s.className="close",s.dataset.dismiss="slick-cell-menu",s.ariaLabel="Close",document.createElement("span"));if(o.className="close",o.ariaHidden="true",o.innerHTML="&times;",s.appendChild(o),!r.hideOptionSection&&0<n.length&&((o=document.createElement("div")).className="slick-cell-menu-option-list",o.role="menu",r.hideCloseButton||(v.bind(s,"click",C),h.appendChild(s)),h.appendChild(o),function(e,l,i,n){if(n&&i&&e){e&&e.optionTitle&&((g=document.createElement("div")).className="title",g.textContent=e.optionTitle,l.appendChild(g));for(let t=0,e=i.length;t<e;t++){let e=!0;var o=i[t],s=y(o.itemVisibilityOverride,n),d=y(o.itemUsabilityOverride,n);s&&(Object.prototype.hasOwnProperty.call(o,"itemUsabilityOverride")&&(o.disabled=!d),(s=document.createElement("div")).className="slick-cell-menu-item",s.role="menuitem",!o.divider&&"divider"!==o||(s.classList.add("slick-cell-menu-item-divider"),e=!1),!o.disabled&&d||s.classList.add("slick-cell-menu-item-disabled"),o.hidden&&s.classList.add("slick-cell-menu-item-hidden"),o.cssClass&&s.classList.add(o.cssClass),o.tooltip&&(s.title=o.tooltip),(d=document.createElement("div")).className="slick-cell-menu-icon",s.appendChild(d),o.iconCssClass&&d.classList.add(o.iconCssClass),o.iconImage&&(d.style.backgroundImage="url("+o.iconImage+")"),(d=document.createElement("span")).className="slick-cell-menu-content",d.textContent=o.title,s.appendChild(d),o.textCssClass&&d.classList.add(o.textCssClass),l.appendChild(s),e)&&v.bind(s,"click",S.bind(this,o))}}}(r,o,n,{cell:u,row:m,column:t,dataContext:l,grid:p})),!r.hideCommandSection&&0<i.length&&((o=document.createElement("div")).className="slick-cell-menu-command-list",o.role="menu",r.hideCloseButton||0!==n.length&&!r.hideOptionSection||(v.bind(s,"click",C),h.appendChild(s)),h.appendChild(o),function(e,l,i,n){if(n&&i&&e){e&&e.commandTitle&&((a=document.createElement("div")).className="title",a.textContent=e.commandTitle,l.appendChild(a));for(let t=0,e=i.length;t<e;t++){let e=!0;var o=i[t],s=y(o.itemVisibilityOverride,n),d=y(o.itemUsabilityOverride,n);s&&(Object.prototype.hasOwnProperty.call(o,"itemUsabilityOverride")&&(o.disabled=!d),(s=document.createElement("div")).className="slick-cell-menu-item",s.role="menuitem",!o.divider&&"divider"!==o||(s.classList.add("slick-cell-menu-item-divider"),e=!1),!o.disabled&&d||s.classList.add("slick-cell-menu-item-disabled"),o.hidden&&s.classList.add("slick-cell-menu-item-hidden"),o.cssClass&&s.classList.add(o.cssClass),o.tooltip&&(s.title=o.tooltip),(d=document.createElement("div")).className="slick-cell-menu-icon",s.appendChild(d),o.iconCssClass&&d.classList.add(o.iconCssClass),o.iconImage&&(d.style.backgroundImage="url("+o.iconImage+")"),(d=document.createElement("span")).className="slick-cell-menu-content",d.textContent=o.title,s.appendChild(d),o.textCssClass&&d.classList.add(o.textCssClass),l.appendChild(s),e)&&v.bind(s,"click",w.bind(this,o))}}}(r,o,i,{cell:u,row:m,column:t,dataContext:l,grid:p})),h.style.display="block",document.body.appendChild(h),0!=c.onAfterMenuShow.notify({cell:u,row:m,grid:p},e,c).getReturnValue())return h}}function C(e){e.defaultPrevented||b(e)}function b(e,t){(h=h||document.querySelector(".slick-cell-menu."+d))&&h.remove&&0!=c.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:p,menu:h},e,c).getReturnValue()&&(h.remove(),h=null)}function n(l,i){l instanceof Slick.EventData&&(l=l.getNativeEvent());var n=p.getCellFromEvent(l),o=p.getDataItem(n.row),n=p.getColumns()[n.cell];if(n&&n.cellMenu&&l.preventDefault(),r=Slick.Utils.extend({},r,n.cellMenu),(i=i||{}).columnDef=n,i.dataContext=o,i.grid=p,y(r.menuUsabilityOverride,i)){if(h=e(l)){{n=l;o=n.target.closest(".slick-cell"),i=o&&Slick.Utils.offset(o);let e=o?i.left:n.pageX,t=o?i.top:n.pageY;var s,i=o.offsetWidth||0,n=h&&h.offsetHeight||0,l=h&&h.offsetWidth||r.width||0,d=f.rowHeight,c=r.autoAdjustDropOffset,a=r.autoAlignSideOffset;r.autoAdjustDrop&&(s=Slick.Utils.calculateAvailableSpace(o).bottom,o=Slick.Utils.calculateAvailableSpace(o).top,s=s+c-d,t="top"==(s<n&&s<o-c+d?"top":"bottom")?(h.classList.remove("dropdown"),h.classList.add("dropup"),t-n-c):(h.classList.remove("dropup"),h.classList.add("dropdown"),t+d+c)),r.autoAlignSide&&(s=p.getGridPosition(),"left"==(e+l>=s.width?"left":"right")?(h.classList.remove("dropright"),h.classList.add("dropleft"),e=e-(l-i)-a):(h.classList.remove("dropleft"),h.classList.add("dropright"),e+=a)),h.style.top=t+"px",h.style.left=e+"px"}h.setAttribute("aria-expanded","true"),h.style.display="block"}v.bind(document.body,"mousedown",function(e){h==e.target||h&&h.contains(e.target)||e.defaultPrevented||k(e,{cell:u,row:m})}.bind(this))}}function k(e,t){h&&0!=c.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:p,menu:h},e,c).getReturnValue()&&h&&h.remove&&(h.remove(),h=null)}function w(e,t){var l,i,n,o,s;!e||e.disabled||e.divider||"divider"===e||(s=e.command||"",l=m,i=u,n=p.getColumns()[i],o=p.getDataItem(l),null!==s&&""!==s&&(s={cell:i,row:l,grid:p,command:s,item:e,column:n,dataContext:o},c.onCommand.notify(s,t,c),"function"==typeof e.action&&e.action.call(this,t,s),t.defaultPrevented||k(t,{cell:i,row:l})))}function S(e,t){var l,i,n,o,s;!e||e.disabled||e.divider||"divider"===e||p.getEditorLock().commitCurrentEdit()&&(s=void 0!==e.option?e.option:"",l=m,i=u,n=p.getColumns()[i],o=p.getDataItem(l),void 0!==s)&&(s={cell:i,row:l,grid:p,option:s,item:e,column:n,dataContext:o},c.onOptionSelected.notify(s,t,c),"function"==typeof e.action&&e.action.call(this,t,s),t.defaultPrevented||k(t,{cell:i,row:l}))}function y(e,t){return"function"!=typeof e||e.call(this,t)}Slick.Utils.extend(this,{init:function(e){p=e,f=e.getOptions(),r=Slick.Utils.extend({},i,t),d=e&&e.getUID?e.getUID():"",l.subscribe(p.onClick,n),r.hideMenuOnScroll&&l.subscribe(p.onScroll,b)},closeMenu:b,destroy:function(){c.onAfterMenuShow.unsubscribe(),c.onBeforeMenuShow.unsubscribe(),c.onBeforeMenuClose.unsubscribe(),c.onCommand.unsubscribe(),c.onOptionSelected.unsubscribe(),l.unsubscribeAll(),v.unbindAll(),h&&h.remove&&h.remove(),a=null,g=null,h=null},pluginName:"CellMenu",setOptions:function(e){r=Slick.Utils.extend({},r,e)},onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onBeforeMenuClose:new Slick.Event,onCommand:new Slick.Event,onOptionSelected:new Slick.Event})}}}})}(window);