/**
 * SlickGrid v4.0.1
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-06-30
 * file: ./plugins/slick.crossgridrowmovemanager.js
 */
!function(e){Slick.Utils.extend(!0,e,{Slick:{CrossGridRowMoveManager:function(n){var l,s,r,c,d,i=this,a=null,o=new Slick.EventHandler,t={columnId:"_move",cssClass:null,cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.95,rowMoveShadowScale:.75,singleRowMove:!1,width:40};n&&"function"==typeof n.usabilityOverride&&y(n.usabilityOverride);function w(e){e.stopImmediatePropagation()}function u(e,o){var t=l.getCellFromEvent(e),i=t&&t.row;if(p(i,l.getDataItem(i),l)){if(n.cancelEditOnDrag&&l.getEditorLock().isActive()&&l.getEditorLock().cancelCurrentEdit(),l.getEditorLock().isActive()||!f(t.cell))return!1;d=!0,e.stopImmediatePropagation(),n.hideRowMoveShadow||(e=(i=l.getCellNode(t.row,t.cell))&&i.closest(".slick-row"))&&(o.clonedSlickRow=e.cloneNode(!0),o.clonedSlickRow.classList.add("slick-reorder-shadow-row"),o.clonedSlickRow.style.display="none",o.clonedSlickRow.style.marginLeft=Number(n.rowMoveShadowMarginLeft||0)+"px",o.clonedSlickRow.style.marginTop=Number(n.rowMoveShadowMarginTop||0)+"px",o.clonedSlickRow.style.opacity=""+(n.rowMoveShadowOpacity||.95),o.clonedSlickRow.style.transform=`scale(${n.rowMoveShadowScale||.75})`,s.appendChild(o.clonedSlickRow));i=n.singleRowMove?[t.row]:l.getSelectedRows(),e=(0!==i.length&&i.some(e=>e===t.row)||(i=[t.row],n.disableRowSelection)||l.setSelectedRows(i),i.sort(function(e,o){return e-o}),l.getOptions().rowHeight);o.fromGrid=l,o.toGrid=r,o.selectedRows=i,o.selectionProxy=document.createElement("div"),o.selectionProxy.className="slick-reorder-proxy",o.selectionProxy.style.display="none",o.selectionProxy.style.position="absolute",o.selectionProxy.style.zIndex="99999",o.selectionProxy.style.width=c.clientWidth+"px",o.selectionProxy.style.height=e*i.length+"px",c.appendChild(o.selectionProxy),o.guide=document.createElement("div"),o.guide.className="slick-reorder-guide",o.guide.style.position="absolute",o.guide.style.zIndex="99999",o.guide.style.width=c.clientWidth+"px",o.guide.style.top="-1000px",c.appendChild(o.guide),o.insertBefore=-1}}function g(e,o){var t;d&&(e.stopImmediatePropagation(),e=((e=e.getNativeEvent()).touches?e.touches[0]:e).pageY-(Slick.Utils.offset(c).top||0),o.selectionProxy.style.top=e-5+"px",o.selectionProxy.style.display="block",o.clonedSlickRow&&(o.clonedSlickRow.style.top=e-6+"px",o.clonedSlickRow.style.display="block"),(e=Math.max(0,Math.min(Math.round(e/r.getOptions().rowHeight),r.getDataLength())))!==o.insertBefore)&&(!(t={fromGrid:l,toGrid:r,rows:o.selectedRows,insertBefore:e})===i.onBeforeMoveRows.notify(t).getReturnValue()?o.canMove=!1:o.canMove=!0,a&&o.canMove&&(t=r.getDataItem(e),o.canMove=p(e,t,r)),o.canMove?o.guide.style.top=e*(r.getOptions().rowHeight||0)+"px":o.guide.style.top="-1000px",o.insertBefore=e)}function v(e,o){d&&(d=!1,e.stopImmediatePropagation(),o.guide.remove(),o.selectionProxy.remove(),o.clonedSlickRow&&(o.clonedSlickRow.remove(),o.clonedSlickRow=null),o.canMove)&&(e={fromGrid:l,toGrid:r,rows:o.selectedRows,insertBefore:o.insertBefore},i.onMoveRows.notify(e))}function e(e,o,t,i,n,l){return p(e,n,l)?{addClasses:"cell-reorder dnd",text:""}:null}function p(e,o,t){return"function"!=typeof a||a(e,o,t)}function y(e){a=e}function f(e){return/move|selectAndMove/.test(l.getColumns()[e].behavior)}Slick.Utils.extend(this,{onBeforeMoveRows:new Slick.Event,onMoveRows:new Slick.Event,init:function(e){n=Slick.Utils.extend(!0,{},t,n),s=(l=e).getCanvasNode(),r=n.toGrid,c=r.getCanvasNode(),o.subscribe(l.onDragInit,w).subscribe(l.onDragStart,u).subscribe(l.onDrag,g).subscribe(l.onDragEnd,v)},destroy:function(){o.unsubscribeAll()},getColumnDefinition:function(){return{id:n.columnId||"_move",name:"",field:"move",width:n.width||40,behavior:"selectAndMove",selectable:!1,resizable:!1,cssClass:n.cssClass,formatter:e}},setOptions:function(e){n=Slick.Utils.extend({},n,e)},usabilityOverride:y,isHandlerColumn:f,pluginName:"CrossGridRowMoveManager"})}}})}(window);