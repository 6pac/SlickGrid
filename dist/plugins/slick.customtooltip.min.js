/**
 * SlickGrid v4.0.0
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-06-28
 * file: ./plugins/slick.customtooltip.js
 */
!function(C){Slick.Utils.extend(!0,C,{Slick:{Plugins:{CustomTooltip:function(o){var i,f,l,d,m,p,c,g={className:"slick-custom-tooltip",offsetLeft:0,offsetRight:0,offsetTopBottom:4,hideArrow:!1,tooltipTextMaxLength:700,regularTooltipWhiteSpace:"pre-line",whiteSpace:"normal"},r=new Slick.EventHandler,h={};function n(t,e){s(t,e,"slick-header-column")}function a(t,e){s(t,e,"slick-headerrow-column")}function s(t,e,o){b();var i={row:-1,cell:d.getColumns().findIndex(function(t){return e&&e.column&&e.column.id===t.id})},l=e.column,r={},n="slick-headerrow-column"===o;(e=e||{}).cell=i.cell,e.row=i.row,e.columnDef=l,e.dataContext=r,e.grid=d,e.type=n?"header-row":"header",h=Slick.Utils.extend(!0,{},c,l.customTooltip),l&&l.disableTooltip||!k(h.usabilityOverride,e)||l&&t.target&&(t=t.target,o=o,f="function"!=typeof t.closest?t.classList.contains(o)?t:t.parentElement.classList.contains(o)?t.parentElement:null:t.closest("."+o),t=n?h.headerRowFormatter:h.headerFormatter,h.useRegularTooltip||!t?y(n?h.useRegularTooltip?null:t:l.name,i,null,l,r):f&&"function"==typeof t&&S(t,i,null,l,r))}function u(t,e){if(b(),d&&t){var r=d.getCellFromEvent(t);if(r){var n=l?l.getItem(r.row):d.getDataItem(r.row),a=d.getColumns()[r.cell];if(f=d.getCellNode(r.row,r.cell),h=Slick.Utils.extend(!0,{},c,a.customTooltip),n&&a&&((e=e||{}).cell=r.cell,e.row=r.row,e.columnDef=a,e.dataContext=n,e.grid=d,e.type="cell",!(a&&a.disableTooltip||!k(h.usabilityOverride,e)))){var s=n.hasOwnProperty(a.field)?n[a.field]:null;if(h.useRegularTooltip||!h.formatter)y(a.formatter,r,s,a,n);else if("function"==typeof h.formatter&&S(h.formatter,r,s,a,n),"function"==typeof h.asyncProcess){t=h.asyncProcess(r.row,r.cell,s,a,n,d);if(!h.asyncPostFormatter)throw new Error('[SlickGrid] when using "asyncProcess", you must also provide an "asyncPostFormatter" formatter');t instanceof Promise&&(i=function(t){var e=!1;if(t instanceof Promise)return{promise:t.then(function(t){if(e)throw{isPromiseCancelled:!0};return t}),cancel:function(){e=!0}};return t}(t)).promise.then(function(t){var e=r,o=s,i=a,l=n;b(),l=Slick.Utils.extend(!0,{},l,{[h.asyncParamsPropName||"__params"]:t}),S(h.asyncPostFormatter,e,o,i,l)}).catch(function(t){if(!t.isPromiseCancelled)throw t})}}}}}function w(e,t){var o;return e?(t.forEach(function(t){t=e.getAttribute(t);t&&(o=t)}),o):null}function y(t,e,o,i,l){var r,n=document.createElement("div"),a=(n.innerHTML=T(t,e,o,i,l),i.toolTip||"");a||(f&&f.clientWidth<f.scrollWidth&&!h.useRegularTooltipFromFormatterOnly?(a=(f.textContent||"").trim()||"",h.tooltipTextMaxLength&&a.length>h.tooltipTextMaxLength&&(a=a.substring(0,h.tooltipTextMaxLength-3)+"..."),r=f):(h.useRegularTooltipFromFormatterOnly?r=n.querySelector("[title], [data-slick-tooltip]"):(r=w(f,["title","data-slick-tooltip"])?f:n.querySelector("[title], [data-slick-tooltip]"))&&w(r,["title","data-slick-tooltip"])||!f||(r=f.querySelector("[title], [data-slick-tooltip]")),(!a||"function"==typeof t&&h.useRegularTooltipFromFormatterOnly)&&(a=w(r,["title","data-slick-tooltip"])||""))),""!==a&&S(t,e,o,i,l,a),x(r,a)}function x(t,e){t=t||f&&(f.hasAttribute("title")&&f.getAttribute("title")?f:f.querySelector("[title]"));t&&(t.setAttribute("data-slick-tooltip",e||""),t.hasAttribute("title"))&&t.setAttribute("title","")}function v(t){var e=0,o=(C.pageXOffset||document.documentElement.scrollLeft,C.pageYOffset||document.documentElement.scrollTop||0),t=L(t);return e=t?t.top-o:e}function L(t){var e,o,i,l;if(t)return void(l=i=o=e=0)!==(t=t.getBoundingClientRect()).top&&void 0!==t.left&&(e=t.top+C.pageYOffset,o=t.left+C.pageXOffset,l=t.right,i=t.bottom),{top:e,left:o,bottom:i,right:l}}function b(){i&&i.cancel&&i.cancel();var t=document.body.querySelector("."+h.className+"."+d.getUID());t&&t.remove&&t.remove()}function T(t,e,o,i,l){return"function"==typeof t?(o="object"==typeof(e=t(e.row,e.cell,o,i,l,d))&&e&&e.text?e.text:"string"==typeof e?e:"",d.sanitizeHtmlString(o)):"string"==typeof t?d.sanitizeHtmlString(t):""}function S(t,e,o,i,l,r,n){(p=document.createElement("div")).className=h.className,p.classList.add(d.getUID()),p.classList.add("l"+e.cell),p.classList.add("r"+e.cell);var a,s,c,t=r||T(t,e,o,i,l)||"",t=h.tooltipTextMaxLength&&t.length>h.tooltipTextMaxLength?t.substring(0,h.tooltipTextMaxLength-3)+"...":t;let u="";!r||h&&h.renderRegularTooltipAsHtml?(u=d.sanitizeHtmlString(t),p.innerHTML=u,p.style.whiteSpace=h&&h.whiteSpace||g.whiteSpace):(u=t||"",p.textContent=u,p.style.whiteSpace=h&&h.regularTooltipWhiteSpace||g.regularTooltipWhiteSpace),h.maxHeight&&(p.style.maxHeight=h.maxHeight+"px"),h.maxWidth&&(p.style.maxWidth=h.maxWidth+"px"),u&&(document.body.appendChild(p),o=e,p&&(o=L(f=f||d.getCellNode(o.row,o.cell)),i=f.offsetWidth,l=p.getBoundingClientRect().height,r=p.getBoundingClientRect().width,e=document.body.offsetWidth||C.innerWidth,a=o.top-p.offsetHeight-(h.offsetTopBottom||0),s=(o&&o.left||0)-(h.offsetRight||0),"center"===(c=h.position||"auto")?(s+=i/2-r/2+(h.offsetRight||0),p.classList.remove("arrow-left-align"),p.classList.remove("arrow-right-align"),p.classList.add("arrow-center-align")):"right-align"===c||("auto"===c||"left-align"!==c)&&e<s+r?(s-=r-i-(h.offsetLeft||0),p.classList.remove("arrow-center-align"),p.classList.remove("arrow-left-align"),p.classList.add("arrow-right-align")):(p.classList.remove("arrow-center-align"),p.classList.remove("arrow-right-align"),p.classList.add("arrow-left-align")),"bottom"===c||"auto"===c&&l>v(f)?(a=o.top+(m.rowHeight||0)+(h.offsetTopBottom||0),p.classList.remove("arrow-down"),p.classList.add("arrow-up")):(p.classList.add("arrow-down"),p.classList.remove("arrow-up")),p.style.top=a+"px",p.style.left=s+"px"),h.hideArrow||p.classList.add("tooltip-arrow"),x(n,t))}function k(t,e){return"function"!=typeof t||t.call(this,e)}Slick.Utils.extend(this,{init:function(t){var e=(d=t)&&t.getData()||[];l=Array.isArray(e)?null:e,m=t.getOptions()||{},c=Slick.Utils.extend(!0,{},g,m.customTooltip,o),r.subscribe(t.onMouseEnter,u).subscribe(t.onHeaderMouseEnter,n).subscribe(t.onHeaderRowMouseEnter,a).subscribe(t.onMouseLeave,b).subscribe(t.onHeaderMouseLeave,b).subscribe(t.onHeaderRowMouseLeave,b)},destroy:function(){b(),r.unsubscribeAll()},hide:b,setOptions:function(t){c=Slick.Utils.extend({},c,t)},pluginName:"CustomTooltip"})}}}})}(window);