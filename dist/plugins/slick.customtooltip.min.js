/**
    * SlickGrid v2.4.45
    * (c) 2009-present Michael Leibman
    * homepage: http://github.com/mleibman/slickgrid
    * license: MIT
    * date: 2022-10-09
    * file: ./plugins/slick.customtooltip.js
    */
!function(H){H.extend(!0,window,{Slick:{Plugins:{CustomTooltip:function(o){var i,d,n,f,p,m,c,l={className:"slick-custom-tooltip",offsetLeft:0,offsetRight:0,offsetTopBottom:4,hideArrow:!1,tooltipTextMaxLength:700,regularTooltipWhiteSpace:"pre-line",whiteSpace:"normal"},r=new Slick.EventHandler,g={};function a(t,e){u(t,e,"slick-header-column")}function s(t,e){u(t,e,"slick-headerrow-column")}function u(t,e,o){T();var i,n={row:-1,cell:f.getColumns().findIndex(function(t){return e&&e.column&&e.column.id===t.id})},l=e.column,r={},a="slick-headerrow-column"===o;(e=e||{}).cell=n.cell,e.row=n.row,e.columnDef=l,e.dataContext=r,e.grid=f,e.type=a?"header-row":"header",g=H.extend(!0,{},c,l.customTooltip),l&&l.disableTooltip||!C(g.usabilityOverride,e)||l&&t.target&&(t=t.target,i=o,d="function"!=typeof t.closest?t.classList.contains(i)?t:t.parentElement.classList.contains(i)?t.parentElement:null:t.closest("."+i),t=(a="slick-headerrow-column"===o)?g.headerRowFormatter:g.headerFormatter,g.useRegularTooltip||!t?y(a?g.useRegularTooltip?null:t:l.name,n,null,l,r):d&&"function"==typeof t&&S(t,n,null,l,r))}function h(t,e){if(T(),f&&t){var l=f.getCellFromEvent(t);if(l){var r=n?n.getItem(l.row):f.getDataItem(l.row),a=f.getColumns()[l.cell];if(d=f.getCellNode(l.row,l.cell),g=H.extend(!0,{},c,a.customTooltip),r&&a&&((e=e||{}).cell=l.cell,e.row=l.row,e.columnDef=a,e.dataContext=r,e.grid=f,e.type="cell",!(a&&a.disableTooltip||!C(g.usabilityOverride,e)))){var s=r.hasOwnProperty(a.field)?r[a.field]:null;if(g.useRegularTooltip||!g.formatter)y(a.formatter,l,s,a,r);else if("function"==typeof g.formatter&&S(g.formatter,l,s,a,r),"function"==typeof g.asyncProcess){t=g.asyncProcess(l.row,l.cell,s,a,r,f);if(!g.asyncPostFormatter)throw new Error('[SlickGrid] when using "asyncProcess", you must also provide an "asyncPostFormatter" formatter');t instanceof Promise&&(i=function(t){var e=!1;if(t instanceof Promise)return{promise:t.then(function(t){if(e)throw{isPromiseCancelled:!0};return t}),cancel:function(){e=!0}};return t}(t)).promise.then(function(t){var e=l,o=s,i=a,n=r;T(),n=H.extend(!0,{},n,{[g.asyncParamsPropName||"__params"]:t}),S(g.asyncPostFormatter,e,o,i,n)}).catch(function(t){if(!t.isPromiseCancelled)throw t})}}}}}function w(e,t){var o;return e?(t.forEach(function(t){t=e.getAttribute(t);t&&(o=t)}),o):null}function y(t,e,o,i,n){var l,r=document.createElement("div"),a=(r.innerHTML=L(t,e,o,i,n),i.toolTip||"");a||(d&&d.clientWidth<d.scrollWidth&&!g.useRegularTooltipFromFormatterOnly?(a=(d.textContent||"").trim()||"",g.tooltipTextMaxLength&&a.length>g.tooltipTextMaxLength&&(a=a.substr(0,g.tooltipTextMaxLength-3)+"..."),l=d):(g.useRegularTooltipFromFormatterOnly?l=r.querySelector("[title], [data-slick-tooltip]"):(l=w(d,["title","data-slick-tooltip"])?d:r.querySelector("[title], [data-slick-tooltip]"))&&w(l,["title","data-slick-tooltip"])||!d||(l=d.querySelector("[title], [data-slick-tooltip]")),(!a||"function"==typeof t&&g.useRegularTooltipFromFormatterOnly)&&(a=w(l,["title","data-slick-tooltip"])||""))),""!==a&&S(t,e,o,i,n,a),x(l,a)}function x(t,e){t=t||d&&(d.hasAttribute("title")&&d.getAttribute("title")?d:d.querySelector("[title]"));t&&(t.setAttribute("data-slick-tooltip",e||""),t.hasAttribute("title")&&t.setAttribute("title",""))}function b(t){var e=0,o=(window.pageXOffset||document.documentElement.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||0),t=v(t);return e=t?t.top-o:e}function v(t){var e,o,i,n;if(t)return void(n=i=o=e=0)!==(t=t.getBoundingClientRect()).top&&void 0!==t.left&&(e=t.top+window.pageYOffset,o=t.left+window.pageXOffset,n=t.right,i=t.bottom),{top:e,left:o,bottom:i,right:n}}function T(){i&&i.cancel&&i.cancel();var t=document.body.querySelector("."+g.className+"."+f.getUID());t&&t.remove&&t.remove()}function L(t,e,o,i,n){return"function"==typeof t?(o="object"==typeof(e=t(e.row,e.cell,o,i,n,f))&&e&&e.text?e.text:"string"==typeof e?e:"",f.sanitizeHtmlString(o)):"string"==typeof t?f.sanitizeHtmlString(t):""}function S(t,e,o,i,n,l,r){(m=document.createElement("div")).className=g.className,m.classList.add(f.getUID()),m.classList.add("l"+e.cell),m.classList.add("r"+e.cell);var a,s,c,t=l||L(t,e,o,i,n)||"",t=g.tooltipTextMaxLength&&t.length>g.tooltipTextMaxLength?t.substr(0,g.tooltipTextMaxLength-3)+"...":t;let u="";!l||g&&g.renderRegularTooltipAsHtml?(u=f.sanitizeHtmlString(t),m.innerHTML=u,m.style.whiteSpace=g&&g.whiteSpace||_defaultOptions.whiteSpace):(u=t||"",m.textContent=u,m.style.whiteSpace=g&&g.regularTooltipWhiteSpace||_defaultOptions.regularTooltipWhiteSpace),g.maxHeight&&(m.style.maxHeight=g.maxHeight+"px"),g.maxWidth&&(m.style.maxWidth=g.maxWidth+"px"),u&&(document.body.appendChild(m),o=e,m&&(o=v(d=d||f.getCellNode(o.row,o.cell)),i=d.offsetWidth,n=m.getBoundingClientRect().height,l=m.getBoundingClientRect().width,e=document.body.offsetWidth||window.innerWidth,a=o.top-m.offsetHeight-(g.offsetTopBottom||0),s=(o&&o.left||0)-(g.offsetLeft||0),"left-align"===(c=g.position||"auto")||"auto"===c&&e<s+l?(s-=l-i-(g.offsetRight||0),m.classList.remove("arrow-left-align"),m.classList.add("arrow-right-align")):(m.classList.add("arrow-left-align"),m.classList.remove("arrow-right-align")),"bottom"===c||"auto"===c&&n>b(d)?(a=o.top+(p.rowHeight||0)+(g.offsetTopBottom||0),m.classList.remove("arrow-down"),m.classList.add("arrow-up")):(m.classList.add("arrow-down"),m.classList.remove("arrow-up")),m.style.top=a+"px",m.style.left=s+"px"),g.hideArrow||m.classList.add("tooltip-arrow"),x(r,t))}function C(t,e){return"function"!=typeof t||t.call(this,e)}H.extend(this,{init:function(t){var e=(f=t)&&t.getData()||[];n=Array.isArray(e)?null:e,p=t.getOptions()||{},c=H.extend(!0,{},l,p.customTooltip,o),r.subscribe(t.onMouseEnter,h).subscribe(t.onHeaderMouseEnter,a).subscribe(t.onHeaderRowMouseEnter,s).subscribe(t.onMouseLeave,T).subscribe(t.onHeaderMouseLeave,T).subscribe(t.onHeaderRowMouseLeave,T)},destroy:function(){T(),r.unsubscribeAll()},hide:T,setOptions:function(t){c=H.extend({},c,t)},pluginName:"CustomTooltip"})}}}})}(jQuery);