/**
 * SlickGrid v4.0.1
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-06-30
 * file: ./plugins/slick.contextmenu.js
 */
!function(e){Slick.Utils.extend(!0,e,{Slick:{Plugins:{ContextMenu:function(t){let r,m=-1,u=-1,p,a,h="",n=new Slick.EventHandler,f=this,v,C,g,b=new Slick.BindingEventService,i={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:-4,autoAlignSideOffset:0,hideMenuOnScroll:!1,maxHeight:"none",width:"auto",optionShownOverColumnIds:[],commandShownOverColumnIds:[]};function e(e){var t=(e=e instanceof Slick.EventData?e.getNativeEvent():e).touches?e.touches[0]:e,n=p.getCellFromEvent(e),n=(m=n&&n.cell,u=n&&n.row,p.getColumns()[m]),i=p.getDataItem(u),l=x(r.optionShownOverColumnIds,n.id),o=x(r.commandShownOverColumnIds,n.id),s=r.commandItems||[],d=r.optionItems||[];if(n&&(o||l)&&(s.length||d.length)&&(S(e),0!=f.onBeforeMenuShow.notify({cell:m,row:u,grid:p},e,f).getReturnValue())){var c=isNaN(r.maxHeight)?r.maxHeight:r.maxHeight+"px",a=isNaN(r.width)?r.width:r.width+"px",a=((g=document.createElement("div")).className="slick-context-menu "+h,g.role="menu",g.style.width=a,g.style.maxHeight=c,g.style.top=t.pageY+"px",g.style.left=t.pageX+"px",g.style.display="none",document.createElement("button")),c=(a.type="button",a.className="close",a.dataset.dismiss="slick-context-menu",a.ariaLabel="Close",document.createElement("span"));if(c.className="close",c.ariaHidden="true",c.innerHTML="&times;",a.appendChild(c),!r.hideOptionSection&&l&&0<d.length&&((t=document.createElement("div")).className="slick-context-menu-option-list",t.role="menu",r.hideCloseButton||(b.bind(a,"click",w),g.appendChild(a)),g.appendChild(t),function(e,n,i,l){if(l&&i&&e){e&&e.optionTitle&&((v=document.createElement("div")).className="title",v.textContent=e.optionTitle,n.appendChild(v));for(let t=0,e=i.length;t<e;t++){let e=!0;var o=i[t],s=O(o.itemVisibilityOverride,l),d=O(o.itemUsabilityOverride,l);s&&(Object.prototype.hasOwnProperty.call(o,"itemUsabilityOverride")&&(o.disabled=!d),(s=document.createElement("div")).className="slick-context-menu-item",s.role="menuitem",!o.divider&&"divider"!==o||(s.classList.add("slick-context-menu-item-divider"),e=!1),!o.disabled&&d||s.classList.add("slick-context-menu-item-disabled"),o.hidden&&s.classList.add("slick-context-menu-item-hidden"),o.cssClass&&s.classList.add(...o.cssClass.split(" ")),o.tooltip&&(s.title=o.tooltip),(d=document.createElement("div")).role="button",d.className="slick-context-menu-icon",s.appendChild(d),o.iconCssClass&&d.classList.add(...o.iconCssClass.split(" ")),o.iconImage&&(d.style.backgroundImage="url("+o.iconImage+")"),(d=document.createElement("span")).className="slick-context-menu-content",d.textContent=o.title,s.appendChild(d),o.textCssClass&&d.classList.add(...o.textCssClass.split(" ")),n.appendChild(s),e)&&b.bind(s,"click",y.bind(this,o))}}}(r,t,d,{cell:m,row:u,column:n,dataContext:i,grid:p})),!r.hideCommandSection&&o&&0<s.length&&((c=document.createElement("div")).className="slick-context-menu-command-list",c.role="menu",r.hideCloseButton||l&&0!==d.length&&!r.hideOptionSection||(b.bind(a,"click",w),g.appendChild(a)),g.appendChild(c),function(e,n,i,l){if(l&&i&&e){e&&e.commandTitle&&((C=document.createElement("div")).className="title",C.textContent=e.commandTitle,n.appendChild(C));for(let t=0,e=i.length;t<e;t++){let e=!0;var o=i[t],s=O(o.itemVisibilityOverride,l),d=O(o.itemUsabilityOverride,l);s&&(Object.prototype.hasOwnProperty.call(o,"itemUsabilityOverride")&&(o.disabled=!d),(s=document.createElement("div")).className="slick-context-menu-item",s.role="menuitem",!o.divider&&"divider"!==o||(s.classList.add("slick-context-menu-item-divider"),e=!1),!o.disabled&&d||s.classList.add("slick-context-menu-item-disabled"),o.hidden&&s.classList.add("slick-context-menu-item-hidden"),o.cssClass&&s.classList.add(...o.cssClass.split(" ")),o.tooltip&&(s.title=o.tooltip),(d=document.createElement("div")).className="slick-context-menu-icon",s.appendChild(d),o.iconCssClass&&d.classList.add(...o.iconCssClass.split(" ")),o.iconImage&&(d.style.backgroundImage="url("+o.iconImage+")"),(d=document.createElement("span")).className="slick-context-menu-content",d.textContent=o.title,s.appendChild(d),o.textCssClass&&d.classList.add(...o.textCssClass.split(" ")),n.appendChild(s),e)&&b.bind(s,"click",k.bind(this,o))}}}(r,c,s,{cell:m,row:u,column:n,dataContext:i,grid:p})),g.style.display="block",document.body.appendChild(g),0!=f.onAfterMenuShow.notify({cell:m,row:u,grid:p},e,f).getReturnValue())return g}}function w(e){e.defaultPrevented||S(e)}function S(e,t){(g=g||document.querySelector(".slick-context-menu."+h))&&g.remove&&0!=f.onBeforeMenuClose.notify({cell:t&&t.cell,row:t&&t.row,grid:p,menu:g},e,f).getReturnValue()&&(g.remove(),g=null)}function x(n,i){let l=!1;if(n&&0<n.length)for(let e=0,t=n.length;e<t;e++)n[e]===i&&(l=!0);else l=!0;return l}function l(n,i){(n=n instanceof Slick.EventData?n.getNativeEvent():n).preventDefault();var l,o=p.getCellFromEvent(n),s=p.getColumns()[o.cell],d=p.getDataItem(o.row);if((i=i||{}).cell=o.cell,i.row=o.row,i.columnDef=s,i.dataContext=d,i.grid=p,O(r.menuUsabilityOverride,i)){if(g=e(n)){{o=n;s=o.touches?o.touches[0]:o,o=o.target.closest(".slick-cell");let e=s.pageX,t=o?Slick.Utils.offset(o).top:s.pageY;s=g&&g.offsetHeight||0,d=g&&g.offsetWidth||r.width||0;var i=a.rowHeight,n=r.autoAdjustDropOffset,c=r.autoAlignSideOffset;r.autoAdjustDrop&&(l=Slick.Utils.calculateAvailableSpace(o).bottom,o=Slick.Utils.calculateAvailableSpace(o).top,l=(l=l+n-i)<s&&l<o-n+i?"top":"bottom",t="top"==l?(g.classList.remove("dropdown"),g.classList.add("dropup"),t-s-n):(g.classList.remove("dropup"),g.classList.add("dropdown"),t+i+n));r.autoAlignSide&&(o=p.getGridPosition(),"left"==(e+d>=o.width?"left":"right")?(g.classList.remove("dropright"),g.classList.add("dropleft"),e=e-d-c):(g.classList.remove("dropleft"),g.classList.add("dropright"),e+=c));g.style.top=t+"px",g.style.left=e+"px"}g.style.display="block"}b.bind(document.body,"click",e=>{e.defaultPrevented||S(e,{cell:m,row:u})})}}function k(t,n){if(t&&!t.disabled&&!t.divider){var i=t.command||"",l=u,o=m,s=p.getColumns()[o],d=p.getDataItem(l);let e;Object.prototype.hasOwnProperty.call(d,s&&s.field)&&(e=d[s.field]),null!=i&&""!==i&&(o={cell:o,row:l,grid:p,command:i,item:t,column:s,dataContext:d,value:e},f.onCommand.notify(o,n,f),"function"==typeof t.action)&&t.action.call(this,n,o)}}function y(e,t){var n,i,l,o,s;e.disabled||e.divider||p.getEditorLock().commitCurrentEdit()&&(n=void 0!==e.option?e.option:"",i=u,s=m,l=p.getColumns()[s],o=p.getDataItem(i),void 0!==n)&&(s={cell:s,row:i,grid:p,option:n,item:e,column:l,dataContext:o},f.onOptionSelected.notify(s,t,f),"function"==typeof e.action)&&e.action.call(this,t,s)}function O(e,t){return"function"!=typeof e||e.call(this,t)}Slick.Utils.extend(this,{init:function(e){p=e,a=e.getOptions(),r=Slick.Utils.extend({},i,t),h=e&&e.getUID?e.getUID():"",n.subscribe(p.onContextMenu,l),r.hideMenuOnScroll&&n.subscribe(p.onScroll,S)},closeMenu:S,destroy:function(){f.onAfterMenuShow.unsubscribe(),f.onBeforeMenuShow.unsubscribe(),f.onBeforeMenuClose.unsubscribe(),f.onCommand.unsubscribe(),f.onOptionSelected.unsubscribe(),n.unsubscribeAll(),b.unbindAll(),g&&g.remove&&g.remove(),C=null,v=null,g=null},pluginName:"ContextMenu",setOptions:function(e){r=Slick.Utils.extend({},r,e),e.commandShownOverColumnIds&&(r.commandShownOverColumnIds=e.commandShownOverColumnIds),e.optionShownOverColumnIds&&(r.optionShownOverColumnIds=e.optionShownOverColumnIds)},onAfterMenuShow:new Slick.Event,onBeforeMenuShow:new Slick.Event,onBeforeMenuClose:new Slick.Event,onCommand:new Slick.Event,onOptionSelected:new Slick.Event})}}}})}(window);