/**
 * SlickGrid v4.0.1
 * (c) 2009-present Michael Leibman
 * homepage: http://github.com/mleibman/slickgrid
 * license: MIT
 * date: 2023-06-30
 * file: ./plugins/slick.state.js
 */
!function(t){Slick.Utils.extend(!0,t,{Slick:{State:function(i){var o,n,s=(i=Slick.Utils.extend(!0,{},a,i)).storage,e=new Slick.Event,r={state:null,current:null};function u(){var t;if(n&&s)return(t={sortcols:o.getSortColumns(),viewport:o.getViewport(),columns:o.getColumns().map(function(t){return{id:t.id,width:t.width}}),userData:null}).userData=r.current,l(t.userData),e.notify(t),s.set(i.key_prefix+n,t)}function c(t){return r.current=t,this}function l(t){r.state=t,c(t)}Slick.Utils.extend(this,{init:function(t){(n=(o=t).cid||i.cid)?(o.onColumnsResized.subscribe(u),o.onColumnsReordered.subscribe(u),o.onSort.subscribe(u)):console.warn("grid has no client id. state persisting is disabled.")},destroy:function(){o.onSort.unsubscribe(u),o.onColumnsReordered.unsubscribe(u),o.onColumnsResized.unsubscribe(u),u()},save:u,setUserData:c,resetUserData:function(){return r.current=r.state,this},getUserData:function(){return r.current},getStateUserData:function(){return r.state},restore:function(){return new Promise((r,e)=>{n?s?s.get(i.key_prefix+n).then(function(t){var e,n,s;t&&(t.sortcols&&o.setSortColumns(t.sortcols||[]),t.viewport&&i.scrollRowIntoView&&o.scrollRowIntoView(t.viewport.top,!0),t.columns&&((e=i.defaultColumns)&&(n={},e.forEach(function(t){n[t.id]=t}),s=[],(t.columns||[]).forEach(function(t){n[t.id]&&s.push(Slick.Utils.extend(!0,{},n[t.id],{width:t.width,headerCssClass:t.headerCssClass}))}),t.columns=s),o.setColumns(t.columns)),l(t.userData)),r(t)}).catch(function(t){e(t)}):e("missing store"):e("missing client id")})},onStateChanged:e,reset:function(){s.set(i.key_prefix+n,{}),l(null)}})}}});var a={key_prefix:"slickgrid:",storage:new function(){var r=t.localStorage;return void 0===r&&console.error("localStorage is not available. slickgrid statepersistor disabled."),{get:function(s){return new Promise((t,e)=>{if(r)try{var n=r.getItem(s);if(n)return t(JSON.parse(n));t({})}catch(t){e(t)}else e("missing localStorage")})},set:function(t,e){r&&(void 0!==e&&(e=JSON.stringify(e)),r.setItem(t,e))}}},scrollRowIntoView:!0}}(window);